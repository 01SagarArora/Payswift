var prevGSTAmount=0;var currentGSTAmount=0;var totalPayableAmount=0;var gvRedeemedAmount=0;var isZeroNonPassThroughPayment=false;var cardBinTypeFromDB="CREDIT";var redeemNow=true;var totalCartAmountWithoutConvFeesPercentage=0;var payNowCallFromQRCode=false;var forceStopPolling=false;var pollPayStatInterval;window.onerror=function(d,c,b){var e="ERROR : "+d+", URL : "+c+", LINENO : "+b;var a=(detailsJson&&detailsJson.superPnr!==null&&detailsJson.superPnr!==undefined)?detailsJson.superPnr:"-1";if(!c.includes("raven.min.js")){PaymentCommon.sendJSerror(e,a)}};ProcessPayment={paymentMode:"FULL",proceedWithPromo:true,portalUrl:"",payNowUrl:"payNow",getQRCode:function(d,b,a,c){$("#QRCodeDiv").find(".cpmt_cardNameLabel").text("Scan below QR with your UPI app");$("#QRCodeImage").attr("src","/PaySwift/getQRImage?mtxnId="+d+"&uid="+b);$("#QRCodeImage").off("load").on("load",function(){$("#loadingQR").hide();$("#QRCodeImage").show();ProcessPayment.enablePayNow();PaymentCommon.handlePaymentInitResponse(a,c)})},stopPollingForQRCode:function(){$("#QRCodeDiv").find(".cpmt_cardNameLabel").text("Don't have VPA? Scan QR with your UPI app");$("#loadingQR").hide();$("#QRCodeImage").hide();$("#showQRButton").show();forceStopPolling=true;clearInterval(pollPayStatInterval)},QRPayNowRequest:function(){payNowCallFromQRCode=true;forceStopPolling=false;$("#showQRButton").hide();$("#loadingQR").show();$("#sub_payopQR").val("qr");this.payNow()},payNow:function(){YatraPaymentUI.pushGAInfoGeneric("Payment","Paynow:"+YatraPayment.getPayOp());var c=YatraPayment.getPayOp();if(arguments.callee.caller.name!="QRPayNowRequest"){if(c!=="upi"||(c=="upi"&&YatraPayment.validatePaymentDiv("paymentForm"))){ProcessPayment.stopPollingForQRCode();$("#sub_payopQR").val(undefined)}payNowCallFromQRCode=false}if(!payNowCallFromQRCode){if(!YatraPayment.validatePaymentDiv("paymentForm")){return}}var c=YatraPayment.getPayOp();c=YatraEWalletPaymentUI.isCompleteEwalletPayment()&&c!="gv"?"ew":c;if(c=="paypal"&&!$("input[name=paypal]","#paypalContainer").is(":checked")){$(".paypal_pmt_msg_INFO").show();return}if(!payNowCallFromQRCode){if(c=="upi"){forceStopPolling=false;Popup.showPopup("Enter mpin on your UPI app to approve payment.","Payment Initiated")}else{if(c=="tez"){forceStopPolling=false;Popup.showPopup("Enter mpin in your Google Pay app to authorize payment.","Payment Initiated")}else{if(c=="tez_pwa"){forceStopPolling=false;Popup.showPopup("Enter mpin in your Google Pay app to authorize payment.","Payment Initiated")}else{if(c=="cred"){forceStopPolling=false;Popup.showPopup("Enter mpin in your Cred app to authorize payment.","Payment Initiated")}else{Popup.processingPayment()}}}}}this.portalUrl=YatraPayment.getPaymentOptionUrl(c);var h=ProcessPayment.createPayNowForm();ProcessPayment.disablePayNow();ProcessPayment.updatePayNowTrackingData(YatraPaymentUI.getPaymentOption());YatraPaymentUI.adobeTrackPaymentLoadData(YatraPayment.getPayOp(),YatraPayment.getParameterByName("ctype"),YatraPaymentUI.getPaymentOption());YatraPaymentUI.pushGATrackingData();try{if(detailsJson&&detailsJson.liveDataProduct==="flights"){YatraPaymentUI.pushGTAPayswiftTrackingData(c)}else{YatraPaymentUI.pushGTAPayswiftTrakingHotelData(c)}}catch(d){log_error(d)}var b=$(h).serialize();$.ajax({url:ProcessPayment.payNowUrl,type:"POST",data:b,success:function(y){try{Popup.hidePopup();if(!y){alert("It seems there is some issue with the Site currently. Please try after some time.");return false;ProcessPayment.enablePayNow()}resp=y;if(resp.success||resp.redirect){if(resp.promoSuccess&&resp.promoWarning){PaymentCommon.onAmountChange();var B=new Template();B.set("promo-code-warning-message-template");var m;var s;var t;var k=resp.promoWarning;var n=YatraPayment.getPayOp();YatraPaymentUI.adobeTrackPromoFaliure();if(n=="paypal"&&$("input[name=paypal]","#paypalContainer").is(":checked")){t="<span >"+$("input[name=paypal]:checked","#paypalContainer").attr("currencysymbol")+"</span>";m=YatraPayment.formatAmount((resp.promoAmount/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2));s=YatraPayment.formatAmount((resp.redirectMap.amount/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2))}else{t="<span class='RupeeSign'>Rs</span>";m=resp.promoAmount;s=resp.redirectMap.amount}$("#promo-code-warning-message").html(B.render({discountedAmount:YatraHelper.formatPrice(s),promoWarn:k,promoAmount:m,currencySymbol:t,gstMessage:(resp.showGSTMessage)?". Any applicable GST will also be adjusted.":""}));PaymentCommon.showBlackDiv();$("#valid_warning_promo_code_discount_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(!resp.priceValidationSuccess){PaymentCommon.onAmountChange();var B=new Template();B.set("price-change-warning-message-template");var n=YatraPayment.getPayOp();if(n=="paypal"&&$("input[name=paypal]","#paypalContainer").is(":checked")){t="<span >"+$("input[name=paypal]:checked","#paypalContainer").attr("currencysymbol")+"</span>";s=YatraPayment.formatAmount((resp.redirectMap.amount/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2))}else{t="<span class='RupeeSign'>Rs</span>";s=resp.redirectMap.amount}var u=PaymentCommon.fetchPriceValidateErrorMessages(resp);$("#pricing-failure-error-message").html(B.render({newAmount:YatraHelper.formatPrice(s),pricingErrorMessages:u,currencySymbol:t}));PaymentCommon.showBlackDiv();$("#pricing_error_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(resp.primeWarning){var A=new Template();A.set("prime-warning-message-template");$("#prime-failure-error-message").html(A.render({pricingErrorMessages:resp.primeErrorMessage}));PaymentCommon.showBlackDiv();$("#prime_error_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(!payNowCallFromQRCode){YatraPaymentUI.hideSessionTimerPopup()}PaymentCommon.continueWithPayment(resp)}}}}else{if(!resp.discountSuccess){ShoppingCart.updateVisaDiscount(0);PaymentCommon.onAmountChange();PaymentCommon.showBlackDiv();$("#invalid_visa_discount_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(!resp.lobValidationSuccess){PaymentCommon.onAmountChange();var B=new Template();B.set("validate-error-message-template");var p=PaymentCommon.fetchValidateErrorMessages(resp);$("#validate-error-message").html(B.render({validateErrorMessages:p}));PaymentCommon.showBlackDiv();$("#validate_error_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(!resp.promoSuccess){PaymentCommon.onAmountChange();var B=new Template();B.set("promo-code-failure-message-template");var z=detailsJson.promo.amount;var v=ProcessPayment.paymentMode;if(v=="PARTIAL"){z=-parseInt(detailsJson.partialPayment.partialPromoAmount)}if(v=="HOLDANDPAY"){z=-parseInt(detailsJson.holdPayment.hnpPromoAmount)}var r;var o;var t;if(typeof z!="number"){r=parseInt(z)}else{r=z}var n=YatraPayment.getPayOp();if(n=="paypal"&&$("input[name=paypal]","#paypalContainer").is(":checked")){t="<span >"+$("input[name=paypal]:checked","#paypalContainer").attr("currencysymbol")+"</span>";z=YatraPayment.formatAmount((z/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2));o=YatraPayment.formatAmount(((ShoppingCart.totalPayableAmount+r)/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2))}else{t="<span class='RupeeSign'>Rs</span>";z=z;o=ShoppingCart.totalPayableAmount+r}YatraPaymentUI.adobeTrackPromoFaliure();var C=PaymentCommon.fetchPromoErrorMessages(resp);$("#promo-code-failure-message").html(B.render({fullAmount:o,promoMessages:C,promoAmount:z,currencySymbol:t,gstMessage:(resp.showGSTMessage)?"and any applicable GST will also be adjusted":""}));if(resp.changePromoUrl&&resp.changePromoUrl!=""){}else{$("#ChangePromo").parent().hide()}PaymentCommon.showBlackDiv();$("#invalid_promo_code_discount_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(resp.promoSuccess&&resp.promoWarning){PaymentCommon.onAmountChange();var B=new Template();B.set("promo-code-warning-message-template");var m=resp.promoAmount;var s=resp.amountToCollect;var k=resp.promoWarning;var t;var n=YatraPayment.getPayOp();if(n=="paypal"&&$("input[name=paypal]","#paypalContainer").is(":checked")){t="<span >"+$("input[name=paypal]:checked","#paypalContainer").attr("currencysymbol")+"</span>";m=YatraPayment.formatAmount((m/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2));s=YatraPayment.formatAmount((s/($("input[name=paypal]:checked","#paypalContainer").attr("forexrate"))).toFixed(2))}else{t="<span class='RupeeSign'>Rs</span>"}YatraPaymentUI.adobeTrackPromoFaliure();$("#promo-code-warning-message").html(B.render({discountedAmount:s,promoWarn:k,promoAmount:m,currencySymbol:t,gstMessage:(resp.showGSTMessage)?"and any applicable GST will also be adjusted":""}));PaymentCommon.showBlackDiv();$("#valid_warning_promo_code_discount_pop_up").css({display:"block"});ProcessPayment.enablePayNow()}else{if(resp.message==undefined){resp.message="Something went wrong."}$("#failed_msg_container").html(resp.message);$("#failed_payment_res").show();var l=document.getElementById("failed_payment_res");if(l){l.scrollIntoView({behavior:"smooth"})}ProcessPayment.enablePayNow()}}}}}}catch(q){log_error(q)}},error:function(l,e,k){alert("It seems there is some issue with the Site currently. Please try after some time.");ProcessPayment.enablePayNow();Popup.hidePopup()}});if(detailsJson&&(!$.isEmptyObject(detailsJson.gaResponse))){try{var g=ProcessPayment.getGAPaymentOption(c);var f='{"option": "Pay Now : '+g+'"}';var a=detailsJson.gaResponse;a.actionObj.option=f;if(typeof yt_ga!="undefined"&&typeof yt_ga.addProduct!="undefined"){yt_ga.addProduct(a)}}catch(j){console.log(j)}}},updatePayNowTrackingData:function(c){try{var a={};a.tenant=detailsJson.product;if(detailsJson.ci){a.ci=detailsJson.ci}if(detailsJson.uuid){a.pricingId=detailsJson.uuid}a.ttv=detailsJson.totalAmout;a.spnr=detailsJson.superPnr;a.stage="payment";a.paymentType=ProcessPayment.paymentMode;a.convFee=PaymentCommon.getConvienceFee(c);a.ttid=detailsJson.superPnr;a.yaaction="continue";a.yaValue="pay now";a.referrerURL=document.referrer;a.screenHeight=screen.height;a.screenWidth=screen.width;var b="/livedata-analytics/updateLiveData";YatraPaymentUI.sendLiveTrackingAjax(JSON.stringify(a),b)}catch(d){console.log(d)}},getGAPaymentOption:function(a){if(a=="cc"){paymentOption="Credit Card"}else{if(a=="dc"){paymentOption="Debit Card"}else{if(a=="nb"){paymentOption="Net Banking"}else{paymentOption="Others"}}}return paymentOption},disablePayNow:function(){try{var a="#"+getContinueButtonId();$(a).addClass("cpmt_disable_button");$(a).prop("disabled",true)}catch(b){log_error(b)}},enablePayNow:function(){try{var a="#"+getContinueButtonId();$(a).removeClass("cpmt_disable_button");if($(a).hasClass("emi-paynow-btn-disabled")){$(a).removeClass("emi-paynow-btn-disabled")}$(a).prop("disabled",false)}catch(b){log_error(b)}},createPayNowForm:function(){var f={};f.paymentOptionParameters=YatraPayment.getPaymentOptionParameters("paymentForm");f.amountDisplayed=(detailsJson.payLaterFlow&&detailsJson.payLaterFlow=="true")?1:((detailsJson.currencyName&&detailsJson.currencyName!="INR"&&!internationalCurrency&&detailsJson.currencyConversionRate)?detailsJson.totalAmount:(detailsJson.isTcsEnabled?(Ewallet.ecashRedeemedAmount>0?ShoppingCart.totalPayableAmount:(GV.totalGVAmount()>0?GV.balanceAmountAfterGV:ShoppingCart.getTotalCartAmount()+Number(ShoppingCart.tcsAmount))):ShoppingCart.totalPayableAmount));f.superPnr=detailsJson.superPnr;f.ttid=detailsJson.ttid;f.paymentMode=ProcessPayment.paymentMode;f.client=client;f.card_bin_type=cardBinTypeFromDB;f.cardDiscountingStatus=cardDiscountingStatus;f.otherDiscountingStatus=otherDiscountingStatus;f.additionalPayment=isAdditionalPaymentAttempt;f.ylp=YatraEWalletPaymentUI.getYLP();f.paymentProcessType=YatraPaymentUI.getMultiPayOpt();f.cvvRequired=YatraPaymentUI.cvvRequired;if(YatraPayment.getPayOp()=="emi"){f.ncemi=YatraPaymentUI.isNoCostEmiFlag}if(GV&&GV.voucherNodes){f.vouchers=JSON.stringify(GV.voucherNodes);f.voucherAmount=GV.totalGVAmount();f.isPGPaymentRequiredForVoucher=GV.isPGPaymentRequiredForVoucher}if(YatraEWalletPaymentUI.isBookingForEcashGV()&&redeemAuthJSON==null){var b=getPaymentJSON();f.amountToRedeem=b.wallet.maxRedeemableECash;var e=detailsJson.userDetails;if(e!=undefined&&e!=null){f.email=e.email}}if(typeof(uuid)!="undefined"&&uuid!=undefined&&uuid!=null){f.uuid=uuid}f.product=detailsJson.product;if(detailsJson.promo&&ProcessPayment.proceedWithPromo&&(ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.promo.cartLabel]][detailsJson.promo.cartLabel]!=0||(detailsJson.promo.ecashAmount&&detailsJson.promo.ecashAmount>0))){f.promoCode=detailsJson.promo.code}var d=document.createElement("form");d.setAttribute("method","post");for(var c in f){if(f.hasOwnProperty(c)){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",c);a.setAttribute("value",f[c]);d.appendChild(a)}}document.body.appendChild(d);return d}};PaymentCommon={isVisaApplied:function(){if((!$.isEmptyObject(detailsJson.discount))&&(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")){return true}else{return false}},isDiscountApplied:function(){if((!$.isEmptyObject(detailsJson.discount))&&(detailsJson.discount.type.toUpperCase()!="VISA"&&detailsJson.discount.type.toUpperCase()!="CARD")){return true}else{return false}},isPayOpValidForVisa:function(){var a=YatraPayment.getPayOp();if(a=="cc"||a=="dc"||a=="qb"){return true}return false},handleVisa:function(c,a){var e=$('input:radio[name="payOption"]:checked').val();if(e=="payPartial"){c=false;a="partial_payment_visa_removed_pop_up"}var b=ShoppingCart.getTotalCartAmount();if(c){if(detailsJson.discount&&detailsJson.discount.type&&(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]==0&&b>detailsJson.discount.amount){var d=$(".cpmt_Paymentdiv").offset().top;a="visa_discount_applied_pop_up";PaymentCommon.displayPartialVisaFailureMessage(a,d);ShoppingCart.updateVisaDiscount("-"+detailsJson.discount.amount);cardDiscountingStatus="true";return}else{if(detailsJson.discount&&detailsJson.discount.type&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]==0&&b>detailsJson.discount.amount){a="other_discount_applied_pop_up";var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialVisaFailureMessage(a,d);ShoppingCart.updateOtherDiscount("-"+detailsJson.discount.amount);otherDiscountingStatus="true";return}}}else{if(e=="payFull"){a="payop_changed_visa_discount_pop_up";if(PaymentCommon.isDiscountApplied()){a="other_discount_applied_pop_up";var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialOtherFailureMessage(a,d);ShoppingCart.updateOtherDiscount("-"+detailsJson.discount.amount);otherDiscountingStatus="true"}if(PaymentCommon.isVisaApplied()){var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialVisaFailureMessage(a,d);cardDiscountingStatus="false";ShoppingCart.updateVisaDiscount(0)}}else{if(PaymentCommon.isVisaApplied()){var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialVisaFailureMessage(a,d);cardDiscountingStatus="false";ShoppingCart.updateVisaDiscount(0)}else{if(PaymentCommon.isDiscountApplied()){a="partial_payment_discount_removed_pop_up";var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialOtherFailureMessage(a,d);otherDiscountingStatus="false";ShoppingCart.updateOtherDiscount(0)}}}}},getConvienceFee:function(b){if(!detailsJson.convFee){return 0}var d=detailsJson.convFee;var e=PaymentMode.partialEnabledForProduct&&partial_payOpArr.indexOf(b)>=0;var a=PaymentMode.holdAndPayEnabledForProduct&&holdAndPay_payOpArr.indexOf(b)>=0;if(detailsJson.useModeSpecificConvFee=="true"&&(e||a)){var c=$('input:radio[name="payOption"]:checked').val();if(c=="payPartial"&&detailsJson.convFee_partial){d=detailsJson.convFee_partial}else{if(c=="holdAndPay"&&detailsJson.convFee_hnp){d=detailsJson.convFee_hnp}}}return d[b]?parseFloat(d[b]):parseFloat(d["default"])},getPayAtHotel:function(){if(!detailsJson.payAtHotel){return 0}return parseFloat(detailsJson.payAtHotel)},getConvFeeTaxes:function(){if(!detailsJson.convenienceFeeTaxes){return 0}return parseFloat(detailsJson.convenienceFeeTaxes)},getConvFeeGST:function(){if(!detailsJson.convFeeGST){return 0}return parseFloat(detailsJson.convFeeGST)},changePayNowLabel:function(c){if("INT_HOTEL_BKG"==c){$("#payNow").val("Confirm Booking");$(".contiue-section .mobilePay").addClass("hideForHotel");$("body").addClass("pah-hack-only");$("#tcStrip_id").text("Confirm Booking")}else{if(ShoppingCart.totalPayableAmount==0){$("#"+getContinueButtonId()).css("display","inline-block");$("#"+getContinueButtonId()).val("Complete Booking");$("#tcStrip_id").text("Complete Booking");$("#gv-promo-msg-completeBooking").html(" To use any other payment method, please remove voucher(s) ");if(enableEWallet&&eCashJSON!=null&&eCashJSON.status==true){var a=YatraEWalletPaymentUI.getAmountInRupee(eCashJSON.totalEcash.redeemableECashInPaisa);if(parseInt(a)>0){var b=YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON?redeemAuthJSON.amountInPaisa?redeemAuthJSON.amountInPaisa:0:0);if(parseInt(b)>0){$("#ecash-div").show();$("#gv-promo-msg-completeBooking").html("To use any other payment method, please remove eCash or Gift Voucher(s)")}else{$("#ecash-div").hide()}}}if(YatraPayment.getPayOp()=="gv"){$("#gv-promo-msg-completeBooking").show()}}else{$("#gv-promo-msg-completeBooking").hide();if(YatraPayment.getPayOp()=="gv"){$("#"+getContinueButtonId()).hide()}$("#"+getContinueButtonId()).val("Pay Now");this.setPayNowLabelforCorp(c);$("#tcStrip_id").text("Pay Now");if(enableEWallet&&eCashJSON!=null&&eCashJSON.status==true){var a=YatraEWalletPaymentUI.getAmountInRupee(eCashJSON.totalEcash.redeemableECashInPaisa);if(parseInt(a)>0&&disableEcash==false){$("#ecash-div").show()}}}}},setPayNowLabelforCorp:function(a){if(a=="crpdom"||a=="crpint"||a=="crpdom_hotel"||a=="crpint_hotel"||a=="crpinthotel"||a=="crpdomhotel"||a=="cinsweb"||a=="corpInsurance"||a=="corpSAPG"||a=="crp"||a=="corpbusdesktop"){$("#"+getContinueButtonId()).val("Book Now")}else{$("#"+getContinueButtonId()).val("Pay Now")}},showBlackDiv:function(){$("body").addClass("show-promo-pop-body");$(".black_div_pop").show()},hideBlackDiv:function(){$("body").removeClass("show-promo-pop-body");$(".black_div_pop").hide()},fetchPromoErrorMessages:function(e){var c=e.promoMessages;var d=c.length;var a="";for(var b=0;b<d;b++){a+="<p> ";a+=c[b];a+="</p>"}return a},fetchValidateErrorMessages:function(e){var c=e.lobValidationMessage;var d=c.length;var a="";for(var b=0;b<d;b++){a+="<p> ";a+=c[b];a+="</p>"}return a},fetchPriceValidateErrorMessages:function(e){var c=e.priceValidationMessage;var d=c.length;var a="";for(var b=0;b<d;b++){a+="<p> ";a+=c[b];a+="</p>"}return a},continueWithPayment:function(b){try{if(b.ajax){if(b.redirectMap&&(b.redirectMap.walletService=="PTM"||b.redirectMap.bankCode=="PTM")){PaymentCommon.loadPaytm(b)}else{PaymentCommon.postPaymentAjax(b)}}else{PaymentCommon.generateFormAndPost(b.rurl,b.redirectMap)}}catch(a){console.log(a);PaymentCommon.sendJSerror(a,b.redirectMap.ttid)}},onScriptLoad:function(c){var a={root:"",flow:"DEFAULT",data:{orderId:c.mtxnid,token:c.txnToken,tokenType:"TXN_TOKEN",amount:c.amount},handler:{notifyMerchant:function(d,e){if(d=="APP_CLOSED"){ProcessPayment.enablePayNow()}}}};if(window.Paytm&&window.Paytm.CheckoutJS){window.Paytm.CheckoutJS.onLoad(function b(){window.Paytm.CheckoutJS.init(a).then(function d(){window.Paytm.CheckoutJS.invoke()})})}},loadPaytm:function(b){var a=document.createElement("script");a.type="application/javascript";a.crossOrigin="anonymous";if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;PaymentCommon.onScriptLoad(b.redirectMap)}}}else{a.onload=function(){PaymentCommon.onScriptLoad(b.redirectMap)}}a.src="https://secure.paytmpayments.com/merchantpgpui/checkoutjs/merchants/"+b.redirectMap.mid+".js";document.getElementsByTagName("head")[0].appendChild(a)},generateFormAndPost:function(d,e){var c=document.createElement("form");c.setAttribute("method","post");c.setAttribute("action",d);for(var b in e){if(e.hasOwnProperty(b)){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",b);a.setAttribute("value",e[b]);c.appendChild(a)}}document.body.appendChild(c);c.submit()},postPaymentAjax:function(a){try{if(!payNowCallFromQRCode){if(resp.googlePay){Popup.showPopup("Enter mpin in your Google Pay app to authorize payment.","Payment Initiated")}else{if(resp.cred){Popup.showPopup("A notification has been sent to your mobile phone. Please complete payment on Cred App","Payment Initiated")}else{Popup.showPopup("Enter mpin in your UPI app to authorize payment.","Payment Initiated")}}}$.ajax({url:a.rurl,type:"POST",cache:false,data:a.redirectMap,success:function(c){try{c=JSON.parse(c)}catch(d){console.log("Error reading Txn Init Response")}if(c.suc&&c.suc=="true"){if(payNowCallFromQRCode){ProcessPayment.getQRCode(c.mtxnid,c.uid,c,a)}else{PaymentCommon.handlePaymentInitResponse(c,a)}}else{PaymentCommon.handlePaymentInitResponse(c,a)}},error:function(e,c,d){PaymentCommon.handleErrorRedirect(a.failRedirectMap)}})}catch(b){console.log(b);PaymentCommon.sendJSerror(b,a.redirectMap.ttid)}},handlePaymentInitResponse:function(c,a){try{if(c){if(c.suc&&c.suc=="true"){var b=10*1000;var f=120+(2*10*1000);if(c.pollIntervalInSec&&c.payByDurationInSec){var d=c.payByDurationInSec;b=c.pollIntervalInSec*1000;f=(d+2*(b))*1000}var g=new Date().getTime();pollPayStatInterval=setInterval(function(){if(forceStopPolling){clearInterval(pollPayStatInterval);payNowCallFromQRCode=false;return}if((new Date().getTime()-g)>f){clearInterval(pollPayStatInterval);payNowCallFromQRCode=false;PaymentCommon.handleErrorRedirect(a.failRedirectMap);return}a.redirectMap.mtxnid=c.mtxnid;a.pollPayStatInterval=pollPayStatInterval;PaymentCommon.postPollStatusAjax(a)},b)}else{if(c.suc&&c.suc=="false"){PaymentCommon.generateFormAndPost(c.redirectURL,c.fieldMap)}}return}handleErrorRedirect(a.failRedirectMap)}catch(e){console.log(e);PaymentCommon.sendJSerror(e,a.redirectMap.ttid)}},handleErrorRedirect:function(a){var b=a.rurl;delete a.rurl;PaymentCommon.generateFormAndPost(b,a)},postPollStatusAjax:function(a){$.ajax({url:a.pollStatusUrl,type:"POST",cache:false,data:a.redirectMap,success:function(b){PaymentCommon.handlePaymentStatusResponse(b,a.pollPayStatInterval)},error:function(d,b,c){}})},handlePaymentStatusResponse:function(a,c){try{a=JSON.parse(a)}catch(b){console.log("Error reading Txn Status Response")}if(a&&a.txnComplete=="true"){clearInterval(c);PaymentCommon.generateFormAndPost(a.rurl,a.fieldMap)}},paymentTimer:function(l,m){var j=l,h,k;var g=0;setInterval(function(){timeLeft=j;h=parseInt(j/60,10);k=parseInt(j%60,10);h=h<10?"0"+h:h;k=k<10?"0"+k:k;m.text(h+":"+k);if(--j<0){j=l}if(g==timeLeft){Popup.showSessionExpire();setTimeout(function(){PaymentCommon.sessionEndRedirect()},800)}},1000)},showTimer:function(e){$("#time-label").show();var d=60*e,c=$("#time");this.paymentTimer(d,c)},sessionEndRedirect:function(){PaymentCommon.generateFormAndPost(detailsJson.session.rurl,detailsJson.session.params)},displayPartialVisaFailureMessage:function(a,b){$(".payment_popUp").hide();$("#"+a).css("top",b).show()},displayPartialOtherFailureMessage:function(a,b){$(".payment_popUp").hide();$("#"+a).css("top",b).show()},handleVisaDiscountCommon:function(c,f,g){var b;var d=ShoppingCart.getTotalCartAmount();var e;if(detailsJson.discount&&detailsJson.discount.cartLabel&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]!=0){e=true}else{if(detailsJson&&detailsJson.discount&&detailsJson.discount.amount){e=d>detailsJson.discount.amount?true:false}else{e=true}}if(detailsJson.discount&&c&&(!$.isEmptyObject(detailsJson.discount))){if((detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")&&e){var a;$.ajax({url:"/PaySwift/Discounting/validateVisaCard.htm",type:"POST",async:false,timeout:"5000",data:"cardData="+c+"&ttid="+detailsJson.superPnr+"&product="+detailsJson.product+"&payop="+g,success:function(l){if(l.status.toUpperCase()=="TRUE"){if(detailsJson.discount&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]==0){a="valid_partial_visa_discount_pop_up"}if(ShoppingCart.totalPayableAmount<detailsJson.discount.amount&&Ewallet.ecashRedeemedAmount>0){Ewallet.showAlert();YatraEWalletPaymentUI.reverseAuth()}b=detailsJson.discount.amount;ShoppingCart.updateVisaDiscount("-"+b);cardDiscountingStatus=l.status.toLowerCase();GV.maintainState=false}else{if(detailsJson.discount&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]!=0){a="invalid_partial_visa_discount_pop_up"}b=0;ShoppingCart.updateVisaDiscount(b);cardDiscountingStatus="false";if(GV.gv){GV.maintainState=true}else{GV.maintainState=false}}PaymentCommon.displayPartialVisaFailureMessage(a,f);var j=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);if(j){var k=0;if(typeof(detailsJson.promo)!="undefined"&&detailsJson.promo!=undefined){k=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.promo.cartLabel]][detailsJson.promo.cartLabel]}currentGSTAmount=ShoppingCart.json[ShoppingCart.labelIndex.GST]["GST"];prevGSTAmount=currentGSTAmount;var h=ShoppingCart.totalPayableAmount;YatraPaymentUI.updateGSTCartUI(Number(YatraEWalletPaymentUI.getYLP())+Number(Math.abs(k))+Number(Math.abs(b)));YatraPaymentUI.ewalletRedemptionUpdateOnGSTIncrease(h,prevGSTAmount,currentGSTAmount)}PaymentCommon.onAmountChange()}})}}},onAmountChange:function(){ShoppingCart.update();YatraPaymentUI.onAmountChange();PaymentCommon.changePayNowLabel(detailsJson.product);YatraPaymentUI.setElementText("partialPayNowAmount",ShoppingCart.totalPayableAmount)},sendJSerror:function(b,a){console.log(b,a);$.ajax({url:"/PaySwift/trackUPIJSError?ttid="+a+"&description="+b.toString(),type:"GET",async:false,timeout:"5000",cache:false,success:function(c){console.log(c)},error:function(c){console.log("error",c)}})}};ShoppingCart={json:[],labelIndex:{},rowTemplateId:"rowTemplate",rowTemplateString:"rowTemplateString",rowTemplateStringWithInfo:"rowTemplateStringWithInfo",rowTemplateWithDiv:"rowTemplateWithDiv",rowTemplateWithDivWithInfo:"rowTemplateWithDivWithInfo",rowTemplateInsideDiv:"rowTemplateInsideDiv",breakDownContainer:"breakDownContainer",totalAmountSpan:"totalAmountSpan",totalBookingSpan:"totalBookingSpan",payAtHotelSpan:"payAtHotelSpan",advanceAmountSpan:"advanceAmountSpan",totalAmtInPayBlk:"totalAmountFix",fareElementId:"paymentDetailsCont",excludedChargesContId:"excludedChargesCont",excludedChargesRow:"excludedChargesRow",itineraryHTMLContainer:"itineraryHTMLContainer",itineraryDetailHeader:"itineraryDetailHeader",paxDetailContainer:"show-paxDetails-block",totalPayableAmount:0,tcsAmount:0,intialise:function(){Ewallet.maxRedeemableECash=(detailsJson.maxRedeemableECash)?parseFloat(detailsJson.maxRedeemableECash):((detailsJson.walletDetails)&&(detailsJson.walletDetails.maxRedeemableECash))?parseFloat(detailsJson.walletDetails.maxRedeemableECash):0;this.generateFareBreakupArray();this.addConvFee();this.addConvFeeTax();if(detailsJson.convFeeGST){this.addConvFeeGST()}this.update();$("#"+this.fareElementId).show();this.generateExcludedCharges();this.showExcludedChargesForCorporate();if(detailsJson.itenaryHtml&&!(detailsJson.product=="HOTEL_IN"||detailsJson.product=="homestays"||detailsJson.product=="INT_HOTEL_BKG"||detailsJson.product=="tghomestays"||detailsJson.product=="tgdomhotel")){$("#"+this.itineraryDetailHeader).show();$("#"+this.itineraryHTMLContainer).html(detailsJson.itenaryHtml.replace(/[\n\t\r]/g,"").replace(/\\"/g,'"'));try{$("#containerScroll").tinyscrollbar()}catch(b){}}else{if(detailsJson.itenaryHtml&&!$("body").hasClass("no-broadCast")){$("#"+this.itineraryDetailHeader).show();$("#"+this.itineraryHTMLContainer).html(detailsJson.itenaryHtml.replace(/[\n\t\r]/g,"").replace(/\\"/g,'"'));try{$("#containerScroll").tinyscrollbar()}catch(b){}}else{$("#"+this.itineraryDetailHeader).hide()}}if(detailsJson.paxDetails){$("."+this.paxDetailContainer).show();$("."+this.paxDetailContainer).html(detailsJson.paxDetails.replace(/[\n\t\r]/g,"").replace(/\\"/g,'"'))}if(detailsJson.session&&detailsJson.session.exp&&detailsJson.session.exp=="true"){PaymentCommon.showTimer(detailsJson.session.timer)}if(detailsJson.step1Url){var a=new Template();a.set("editStep");$("#spanEditStep1").html($("#spanEditStep1").html()+" "+a.render({url:detailsJson.step1Url}))}if(detailsJson.step2Url){var a=new Template();a.set("editStep");$("#spanEditStep2").html($("#spanEditStep2").html()+" "+a.render({url:detailsJson.step2Url}))}if(detailsJson.tncUrl){$("#tncLink").attr("href",detailsJson.tncUrl)}if(messageForDisplay){$("#failed_msg_container").html(messageForDisplay);$("#failed_payment_res").show()}if(detailsJson.isPassthrough){$("#passthroughDiv").show()}if(detailsJson.merchant&&detailsJson.merchant=="travelguru"){$(".pciDjj").hide()}if(!$.isEmptyObject(detailsJson.discount)){if(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD"){cardDiscountingStatus=true}else{otherDiscountingStatus=true}}},update:function(){this.totalPayableAmount=Number(0);this.payAtHotelAmount=Number(0);var o=new Template();o.set(this.rowTemplateId);var k="Rs.";if(detailsJson.curcd){var l=detailsJson.curcd;if("usd"==l.toLowerCase()){$("span").removeClass("RupeeSign");$(".curcd").text("$")}if("sgd"==l.toLowerCase()){$("span").removeClass("RupeeSign");$(".curcd").text("S$")}}ShoppingCart.handleConvFeesPercentage();if(detailsJson.currencyName&&detailsJson.currencyName!="INR"&&detailsJson.currencyConversionRate&&!internationalProduct){$(".newCurr").removeClass("RupeeSign");$(".newCurr").text(detailsJson.currencyName+" ");$(".exchangeRatePayNow").show();$("#exchangeCurrencyPayNow").html(detailsJson.currencyName);$("#exchangeRatePayNow").html(detailsJson.currencyConversionRate);$(".totalPayInf .totalPrice small").css("width","70%");$(".totalPrice .you-pay-txt").css("width","28%");if(!internationalProduct){$(".exchangeRatePayNow").show()}}var j=new Template();j.set(this.rowTemplateString);var e=new Template();e.set(this.rowTemplateStringWithInfo);var h="";for(var g in ShoppingCart.json){for(var p in ShoppingCart.json[g]){if(p=="Convenience Fee"){$("#confeeId").html(ShoppingCart.json[g][p])}var m=ShoppingCart.json[g][p];if(detailsJson.isTcsEnabled&&p=="Voucher Redeemed (-)"){continue}if(m!=0&&typeof m!="object"){if(!isNaN(m)){if((p=="Hotel Taxes"&&detailsJson.adobeTrackPaymentLoad&&detailsJson.adobeTrackPaymentLoad.hotel&&detailsJson.adobeTrackPaymentLoad.hotel.hotelInfo&&detailsJson.adobeTrackPaymentLoad.hotel.hotelInfo.supplierDetails=="EXP_DOM")||(p=="Yatra Promo Offer (-)"&&detailsJson.fareBreakup&&detailsJson.fareBreakup.messages&&detailsJson.fareBreakup.messages.adjConvFeeAndTax)){var q=(p=="Yatra Promo Offer (-)"&&detailsJson.fareBreakup&&detailsJson.fareBreakup.messages&&detailsJson.fareBreakup.messages.adjConvFeeAndTax)?detailsJson.fareBreakup.messages.adjConvFeeAndTax:"Tax Recovery Charges and Service Fees";h+=e.render({label:p,amount:Math.abs(m),message:q})}else{h+=o.render({label:p,amount:Math.abs(m)})}}else{if(m!=""){h+=j.render({label:p,amount:m})}}}else{if(typeof m!="object"&&m==0&&p=="Convenience Fee & Taxes"){if(detailsJson.product=="HOTEL_IN"){if(!isNaN(m)){h+=o.render({label:p,amount:Math.abs(m)})}}}else{if((detailsJson.productlob=="flight-ssr"&&m==0&&typeof m!="object"&&(p.includes("Seat")||p.includes("Meal")||p.includes("Baggage")))||(m==0&&typeof m!="object"&&p=="Convenience Fee"&&detailsJson.product=="ytprimedom")){if(!isNaN(m)){h+=o.render({label:p,amount:Math.abs(m)})}}else{if(typeof m==="object"&&m.amount){var d=new Template();var n=m.amount;if(!isNaN(n)){var b=m.key;if(m.description){d.set(this.rowTemplateWithDivWithInfo)}else{d.set(this.rowTemplateWithDiv)}h+=d.render({label:p,amount:Math.abs(n),name:b,message:m.description});h=this.makeExpandableDiv(m.breakup,p,b,h)}}}}}}}if(roundOffCart){this.totalPayableAmount=Math.round(this.getTotalCartAmount())}else{this.totalPayableAmount=this.getTotalCartAmount()}this.payAtHotelAmount=Number(PaymentCommon.getPayAtHotel());var c=$("#emiBank_select").val();var a=YatraPaymentUI.getPaymentOption();if(this.totalPayableAmount<disableEMICondition.amex[3].min&&a=="emi"&&c=="amex"){YatraPaymentUI.disableEMI($("#emiBank_select").val())}else{YatraPaymentUI.enableEMI($("#emiBank_select").val());let cAmt=ShoppingCart.getTotalCartAmount();let selEmiOpt=$("#emiBank_select").val();let selectedTenure=$(".emi-tenure-radio:checked").prop("name",selEmiOpt).val();if(cAmt&&selEmiOpt){YatraPaymentUI.disableEmiDetails(cAmt,selEmiOpt);if(cAmt<disableEMICondition[selEmiOpt][selectedTenure].min){YatraPaymentUI.disableEMI(selEmiOpt)}}}if((this.totalPayableAmount<disableEMICondition.bajaj[3].min||this.totalPayableAmount>(disableEMICondition.bajaj[12].max-1))&&a=="emi"&&c=="bajaj"){YatraPaymentUI.disableEMI($("#emiBank_select").val(),this.totalPayableAmount>(disableEMICondition.bajaj[12].max-1)?true:false)}else{YatraPaymentUI.enableEMI($("#emiBank_select").val());let cAmt=ShoppingCart.getTotalCartAmount();let selEmiOpt=$("#emiBank_select").val();let selectedTenure=$(".emi-tenure-radio:checked").prop("name",selEmiOpt).val();if(cAmt&&selEmiOpt){YatraPaymentUI.disableEmiDetails(cAmt,selEmiOpt);if(cAmt<disableEMICondition[selEmiOpt][selectedTenure].min){YatraPaymentUI.disableEMI(selEmiOpt)}}}if(detailsJson.isTcsEnabled){if($("input:radio[name=payOption]:checked").attr("id")!="partPayOption"&&$("input:radio[name=payOption]:checked").attr("id")!="holdAndPayOption"){h+=o.render({label:"Payable",amount:(GV.totalGVAmount()>0?(GV.balanceAmountAfterGV+GV.totalGVAmount()-ShoppingCart.tcsAmount):ShoppingCart.getTotalCartAmount())})}h+=o.render({label:"TCS",amount:ShoppingCart.tcsAmount});if(GV.totalGVAmount()>0){h+=o.render({label:"Voucher Redeemed (-)",amount:GV.totalGVAmount()})}this.totalPayableAmount=(GV.totalGVAmount()>0)?(Ewallet.ecashRedeemedAmount>0?(GV.balanceAmountAfterGV-Ewallet.ecashRedeemedAmount<0?Number(detailsJson.totalAmount)+Number(ShoppingCart.tcsAmount)-GV.totalGVAmount()-Ewallet.ecashRedeemedAmount:(GV.balanceAmountAfterGV-Ewallet.ecashRedeemedAmount)):GV.balanceAmountAfterGV):Number(ShoppingCart.tcsAmount)+this.totalPayableAmount}if(detailsJson.currencyName&&detailsJson.currencyName!="INR"&&detailsJson.currencyConversionRate){h+=o.render({label:"Total Amount",amount:this.totalPayableAmount})}$("#"+ShoppingCart.breakDownContainer).html(h);var f=document.getElementById("expandableDiv");if(typeof(f)!="undefined"&&f!=undefined&&f!=null){if(typeof(x)!="undefined"&&x!=undefined&&x!=null){f.innerHTML=x;f.style.display="block"}}if(this.payAtHotelAmount!=0){$("#"+ShoppingCart.totalBookingSpan).html(YatraHelper.formatPrice(this.totalPayableAmount));$("#"+ShoppingCart.payAtHotelSpan).html(YatraHelper.formatPrice(Number(PaymentCommon.getPayAtHotel())));this.totalPayableAmount-=Number(PaymentCommon.getPayAtHotel());$("#"+ShoppingCart.advanceAmountSpan).html(YatraHelper.formatPrice(this.totalPayableAmount))}else{$(".payAtHotelBreakup").hide()}if(detailsJson.currencyName&&detailsJson.currencyName!="INR"&&!internationalCurrency&&detailsJson.currencyConversionRate){$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(detailsJson.totalAmount));$("#totalAmountSpann").html(YatraHelper.formatPrice(detailsJson.totalAmount))}else{$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(this.totalPayableAmount));if(detailsJson.payLaterFlow&&detailsJson.payLaterFlow=="true"){$("#totalAmountSpann").html(YatraHelper.formatPrice(1));$(".amout-aside").css({left:59});$("#"+ShoppingCart.totalAmtInPayBlk).html(YatraHelper.formatPrice(1))}else{$("#totalAmountSpann").html(YatraHelper.formatPrice(this.totalPayableAmount));$("#"+ShoppingCart.totalAmtInPayBlk).html(YatraHelper.formatPrice(this.totalPayableAmount))}}},makeExpandableDiv:function(g,f,h,e){var b=new Template();b.set(this.rowTemplateInsideDiv);var a="<div class='tab' id='mainTemplate'><input id='tab-"+h+"' class='tab-input' type='checkbox' name='tabs'> <label for='tab-"+h+"' class='tab-label'>Label One</label>	<ul class='tab-content'>".replace(/[\n\t\r]/g,"").replace(/\\"/g,'"');for(var f in g){var d=g[f];if(d!=0){a+=b.render({label:f,amount:Math.abs(d)})}}a+="</ul> </div>".replace(/[\n\t\r]/g,"").replace(/\\"/g,'"');var c="";$.each($(e),function(j,m){if(this.firstChild){var l=$(this);var k=l.find("#"+h);if(k.length){l.append(a);c+=l.prop("outerHTML")}else{c+=l.prop("outerHTML")}}});return c},handleConvFeesPercentage:function(){if(detailsJson.convFeePercent){ShoppingCart.updateConvFeesExpandable(0,0,0);var b=Math.round(this.getTotalCartAmount());totalCartAmountWithoutConvFeesPercentage=b;var g=YatraPayment.getPayOp();var d=detailsJson.convFeeGSTPercent?detailsJson.convFeeGSTPercent:5;console.log("selected pay op in update ",g);if(g){var a=detailsJson.convFeePercent[g]?detailsJson.convFeePercent[g]:detailsJson.convFeePercent["default"];var f=Math.round((b*a)/100);var e=Math.round((f*d)/100);var c=f+e;ShoppingCart.updateConvFeesExpandable(c,f,e)}}},getTotalCartAmount:function(){var b=0;for(var e in ShoppingCart.json){for(var d in ShoppingCart.json[e]){var c=ShoppingCart.json[e][d];if(d!=="Payable"){if(c!=0&&typeof c!="object"){if(!isNaN(c)){b+=Number(c)}}else{if(typeof c==="object"&&c.amount){var a=c.amount;b+=Number(a)}}}}}if(b<0){return 0}return b},getTotalCartAmountForTCS:function(){var f=0;for(var h in ShoppingCart.json){for(var j in ShoppingCart.json[h]){var k=ShoppingCart.json[h][j];if(j!=="Payable"){if(k!=0&&typeof k!="object"){if(!isNaN(k)){f+=Number(k)}}else{if(typeof k==="object"&&k.amount){var g=k.amount;f+=Number(g)}}}}}if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){return f}if(f<0){return 0}return f},updateVisaDiscount:function(a){if(detailsJson.discount&&(!$.isEmptyObject(detailsJson.discount))&&(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")){this.json[this.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]=a}},updateOtherDiscount:function(a){if(detailsJson.discount&&(!$.isEmptyObject(detailsJson.discount))){this.json[this.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]=a}},updatePromocode:function(a){this.json[this.labelIndex[detailsJson.promo.cartLabel]][detailsJson.promo.cartLabel]=a},updateConvFeesExpandable:function(a,b,c){ShoppingCart.json[ShoppingCart.labelIndex["Convenience Fee & Taxes"]]["Convenience Fee & Taxes"].amount=a;ShoppingCart.json[ShoppingCart.labelIndex["Convenience Fee & Taxes"]]["Convenience Fee & Taxes"].breakup["Convenience Fee"]=b;ShoppingCart.json[ShoppingCart.labelIndex["Convenience Fee & Taxes"]]["Convenience Fee & Taxes"].breakup["Yatra GST"]=c},updateGST:function(a){this.json[this.labelIndex.GST]["GST"]=a;currentGSTAmount=a},updateGVRedeemed:function(a){this.json[this.labelIndex["Voucher Redeemed (-)"]]["Voucher Redeemed (-)"]=-a;gvRedeemedAmount=a},addConvFee:function(){this.json[this.labelIndex["Convenience Fee"]]["Convenience Fee"]=PaymentCommon.getConvienceFee(YatraPaymentUI.getPaymentOption())},addWalletInfo:function(){this.json[this.labelIndex["eCash Redeemed (-)"]]["eCash Redeemed (-)"]=-Ewallet.ecashRedeemedAmount},addEcashGVWalletInfo:function(){var a=parseInt($("#nexpEcashForGVToRedeem").val());this.json[this.labelIndex["Paid with eCash (-)"]]["Paid with eCash (-)"]=-a},addConvFeeTax:function(){this.json[this.labelIndex["Taxes (Including ST, SBC, KKC)"]]["Taxes (Including ST, SBC, KKC)"]=PaymentCommon.getConvFeeTaxes()},addConvFeeGST:function(){this.json[this.labelIndex.GST]["GST"]=PaymentCommon.getConvFeeGST()},addPartialOrHold:function(c,b,a){this.json[this.labelIndex["Pay Later"]]["Pay Later"]=-c;this.json[this.labelIndex.Payable]["Payable"]=a;this.json[this.labelIndex["Due Date"]]["Due Date"]=b},generateFareBreakupArray:function(){var b=0;for(var a in detailsJson.fareBreakup){if(typeof detailsJson.fareBreakup[a]==="object"&&detailsJson.fareBreakup[a].breakUp){this.json[b]={};if(this.moreThanOneNonZeroElements(detailsJson.fareBreakup[a].breakUp)||(detailsJson.convFeePercent&&a=="convFeeAndTax")||a=="additionalTaxes"){this.json[b][detailsJson.fareBreakup[a].label]={amount:detailsJson.fareBreakup[a].amount};if(detailsJson.fareBreakup[a].description){this.json[b][detailsJson.fareBreakup[a].label].description=detailsJson.fareBreakup[a].description}this.json[b][detailsJson.fareBreakup[a].label].breakup=detailsJson.fareBreakup[a].breakUp}else{this.json[b][detailsJson.fareBreakup[a].label]=detailsJson.fareBreakup[a].amount}this.labelIndex[detailsJson.fareBreakup[a].label]=b;b++}else{this.json[b]={};this.json[b][a]=detailsJson.fareBreakup[a];this.labelIndex[a]=b;b++}}this.json[b]={"Convenience Fee":0};this.labelIndex["Convenience Fee"]=b;b++;this.json[b]={"Taxes (Including ST, SBC, KKC)":0};this.labelIndex["Taxes (Including ST, SBC, KKC)"]=b;b++;if(this.labelIndex.GST==undefined){this.json[b]={GST:0};this.labelIndex.GST=b;b++}if(!detailsJson.isTcsEnabled){this.json[b]={"Voucher Redeemed (-)":0};this.labelIndex["Voucher Redeemed (-)"]=b;b++}this.json[b]={"eCash Redeemed (-)":0};this.labelIndex["eCash Redeemed (-)"]=b;b++;this.json[b]={Payable:0};this.labelIndex.Payable=b;b++;this.json[b]={"Pay Later":0};this.labelIndex["Pay Later"]=b;b++;this.json[b]={"Due Date":""};this.labelIndex["Due Date"]=b;b++;this.json[b]={"Payment Surcharge":0};this.labelIndex["Payment Surcharge"]=b;b++;this.json[b]={"Paid with eCash (-)":0};this.labelIndex["Paid with eCash (-)"]=b;b++;if(detailsJson.isTcsEnabled){this.json[b]={"Voucher Redeemed (-)":0};this.labelIndex["Voucher Redeemed (-)"]=b;b++}},showExcludedChargesForCorporate:function(){var c="";var d=new Template();d.set("excludedChargesforCorp");if(detailsJson.taxBreakUp&&detailsJson.taxBreakUp.breakUp){for(var b in detailsJson.taxBreakUp.breakUp){c+=d.render({label:b,amount:Math.abs(detailsJson.taxBreakUp.breakUp[b])})}$("#excludedChargesCORPContainer").html(c);var a=new Template();a.set("excludedChargesHover");c=a.render({label:detailsJson.taxBreakUp.label,message:detailsJson.taxBreakUp.description});$("#excludedChargesHoverCont").html(c)}},generateExcludedCharges:function(){this.exchangeChargesArr=[];if(detailsJson.extraCharges&&detailsJson.extraCharges.breakdown&&detailsJson.extraCharges.breakdown.excluded&&detailsJson.extraCharges.breakdown.excluded.length){for(var c in detailsJson.extraCharges.breakdown.excluded){this.exchangeChargesArr[c]={label:detailsJson.extraCharges.breakdown.excluded[c].name,amount:detailsJson.extraCharges.breakdown.excluded[c].charge}}var b="";var d=new Template();d.set(ShoppingCart.excludedChargesRow);for(var a in ShoppingCart.exchangeChargesArr){b+=d.render({label:ShoppingCart.exchangeChargesArr[a].label,amount:Math.abs(ShoppingCart.exchangeChargesArr[a].amount)})}$("#"+ShoppingCart.excludedChargesRow).html(b);detailsJson.excludedChargesBreakUpInfo=detailsJson.excludedChargesBreakUpInfo||" Please note: Due to fluctuations in currency, the price shown may change at the time of payment";if(detailsJson.excludedChargesBreakUpInfo){var b="";var d=new Template();d.set(ShoppingCart.excludedChargesContId);b+=d.render({message:detailsJson.excludedChargesBreakUpInfo});$("#"+ShoppingCart.excludedChargesContId).html(b)}$("#"+ShoppingCart.excludedChargesContId).show()}},moreThanOneNonZeroElements:function(a){var c=0;for(var b in a){if(a[b]!=0){c++}}if(c>1){return true}else{return false}},addPGSurcharge:function(j){var c=getPaymentJSON();if(!detailsJson.agentPaymentOptions.amountDetails||(detailsJson.isPassthrough=="true"&&(c.product=="crpdom_hotel"||c.product=="crpint_hotel"||c.product=="crpdomhotel"||c.product=="crpinthotel"))){return}try{this.json[this.labelIndex["Payment Surcharge"]]["Payment Surcharge"]=0;var a=this.getTotalCartAmount();var b=0;var f=j.paymentOption.toUpperCase();var d=j.paymentType;if(f=="QB"){f=d.toUpperCase()}if(j.cardBrand){d=j.cardBrand.toUpperCase()}if(!detailsJson.agentPaymentOptions.amountDetails[f]||!detailsJson.agentPaymentOptions.amountDetails[f][d]){this.json[this.labelIndex["Payment Surcharge"]]["Payment Surcharge"]=0;PaymentCommon.onAmountChange();return}var g=detailsJson.agentPaymentOptions.amountDetails[f][d];b=parseInt(Math.round(g.surchargeWithGST));this.json[this.labelIndex["Payment Surcharge"]]["Payment Surcharge"]=b}catch(h){this.json[this.labelIndex["Payment Surcharge"]]["Payment Surcharge"]=0}PaymentCommon.onAmountChange()},handlePassthroughMessage:function(b){var a=b.paymentOption.toUpperCase();var h=b.paymentType.toUpperCase();var g=b.cardBrand.toUpperCase();if(a=="CC"||a=="DC"){var j=a;var e=h}else{if(a=="CORPCARD"){var j=a;var e=g}else{var j=h;var e=g}}if(detailsJson.agentPaymentOptions.amountDetails[j]&&detailsJson.agentPaymentOptions.amountDetails[j][e]){var f=detailsJson.agentPaymentOptions.amountDetails[j][e];var c=f.passthroughAmount;var d=f.message?f.message:"";if(d!=""){$("#passThroughMessage_id").show();$("#passThroughMessage_id").html(d)}else{$("#passThroughMessage_id").hide()}}},handlePassthrough:function(b){this.passThroughAmount=0;if(!detailsJson.isPassthrough){$("#passthroughDiv").hide();return}var a=b.paymentOption.toUpperCase();var h=b.paymentType.toUpperCase();var g=b.cardBrand.toUpperCase();if(a=="CC"||a=="DC"){var j=a;var e=h}else{if(a=="CORPCARD"){var j=a;var e=g}else{var j=h;var e=g}}if(detailsJson.agentPaymentOptions.amountDetails[j]&&detailsJson.agentPaymentOptions.amountDetails[j][e]){var f=detailsJson.agentPaymentOptions.amountDetails[j][e];var c=f.passthroughAmount;if(c==undefined||c=="undefined"){$("#passthroughDiv").hide();return}var k=this.getTotalCartAmount();this.passThroughAmount=parseInt(c);$("#ptAmount").html(YatraHelper.formatPrice(c));var d=k-c>0?k-c:0;if(d==0){isZeroNonPassThroughPayment=true;YatraPaymentUI.disableCVVforGdsFlow();YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"))}else{isZeroNonPassThroughPayment=false}$("#pgAmount").html(YatraHelper.formatPrice(d));$("#passthroughDiv").show();return}$("#passthroughDiv").hide()}};var Ewallet={ecashRedeemedAmount:0,maxRedeemableECash:0,showAlert:function(){alert("Since your payment amount has changed, please cancel the eCash redemption and redeem it again.")},confirmPageChange:function(a){if(Ewallet.ecashRedeemedAmount>0){YatraEWalletPaymentUI.reverseAuth(false)}if(a=="1"){var c=$("#spanEditStep1 a");var b=c.attr("url")}else{if(a=="2"){var c=$("#spanEditStep2 a");var b=c.attr("url")}}c.removeAttr("href");if(!$.isEmptyObject(b)){window.location=b}}};function getPaymentJSON(){var b={amount:ShoppingCart.totalPayableAmount+Ewallet.ecashRedeemedAmount,cartAmount:ShoppingCart.totalPayableAmount,superPNR:detailsJson.superPnr,merchant:(detailsJson.merchant)?detailsJson.merchant:"yatra",product:detailsJson.product,international:{},wallet:{maxRedeemableECash:Ewallet.maxRedeemableECash,product:"",channel:"",device:"",previousEcashRedeemed:previousEcashRedeemed}};if(detailsJson.userDetails){b.userEmail=detailsJson.userDetails.email}if(detailsJson.travelDate){b.international.travelDate=detailsJson.travelDate}if(detailsJson.origin){b.international.origin=detailsJson.origin}if(detailsJson.destination){b.international.destination=detailsJson.destination}if(detailsJson.tripType){b.international.tripType=detailsJson.tripType}if(detailsJson.agentProfileType){b.agentProfileType=detailsJson.agentProfileType}if(detailsJson.gavpv){b.gavpv=detailsJson.gavpv}if(detailsJson.partialPayment){var e=Number(detailsJson.totalAmount);var d=Number(detailsJson.partialPayment.partialPayAmount);var c={isEligibleForPartial:detailsJson.partialPayment.isEligible,payNowAmount:e,partialPayNowAmount:d,partialPayLaterAmount:e-d,isSelected:(detailsJson.partialPayment.isSelected)?detailsJson.partialPayment.isSelected:"false"};b.partialpayment=c}if(detailsJson.holdPayment){var e=Number(detailsJson.totalAmount);var d=Number(detailsJson.holdPayment.holdAmount);var a={isEligibleForHold:detailsJson.holdPayment.isEligible,payNowAmount:e,holdAndPayNowAmount:d,holdAndPayLaterAmount:e-d,isSelected:(detailsJson.holdPayment.isSelected)?detailsJson.holdPayment.isSelected:"false"};b.holdAndPay=a}if(detailsJson.walletDetails){if(detailsJson.walletDetails.product){b.wallet.product=detailsJson.walletDetails.product}if(detailsJson.walletDetails.channel){b.wallet.channel=detailsJson.walletDetails.channel}if(detailsJson.walletDetails.device){b.wallet.device=detailsJson.walletDetails.device}}return b}function updateLiveDataOnPayOpChanged(c){try{var a={};a.tenant=detailsJson.product;if(detailsJson.ci){a.ci=detailsJson.ci}if(detailsJson.pricingId){a.pricingId=detailsJson.pricingId}a.ttv=detailsJson.totalAmout;a.spnr=detailsJson.superPnr;a.stage="payment";a.paymentType=ProcessPayment.paymentMode;a.convFee=PaymentCommon.getConvienceFee(c);a.ttid=detailsJson.superPnr;a.yaaction="PaymentMode";a.yaValue=c;a.referrerURL=document.referrer;a.screenHeight=screen.height;a.screenWidth=screen.width;var b="/livedata-analytics/updateLiveData";YatraPaymentUI.sendLiveTrackingAjax(JSON.stringify(a),b)}catch(d){console.log(d)}}function processPayOp(e){var h=ShoppingCart.json[ShoppingCart.labelIndex["Convenience Fee"]]["Convenience Fee"];var b=PaymentCommon.getConvienceFee(e);if(b<h&&(h-b)>ShoppingCart.totalPayableAmount&&Ewallet.ecashRedeemedAmount>0){Ewallet.showAlert();YatraEWalletPaymentUI.reverseAuth()}if(e.toUpperCase()=="QB"&&detailsJson.discount&&(!$.isEmptyObject(detailsJson.discount))&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]!=0){var g=$('input:radio[name="cardid"][checked="checked"]');var f=$(g).val();var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(f,d,e)}else{if(!(e.toUpperCase()=="CC"||e.toUpperCase()=="DC"||e.toUpperCase()=="GV")){if(!GV.maintainState){if(detailsJson&&(!$.isEmptyObject(detailsJson.discount))&&(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")){var c=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialVisaFailureMessage("payop_changed_visa_discount_pop_up",c)}cardDiscountingStatus="false";ShoppingCart.updateVisaDiscount(0)}}else{if(!GV.maintainState){cardDiscountingStatus="false";var a=ShoppingCart.getTotalCartAmount();if(detailsJson.discount&&detailsJson.discount.type&&(detailsJson.discount.type.toUpperCase()=="VISA"||detailsJson.discount.type.toUpperCase()=="CARD")&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]==0&&a>detailsJson.discount.amount){var c=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.displayPartialVisaFailureMessage("visa_discount_applied_pop_up",c);ShoppingCart.updateVisaDiscount("-"+detailsJson.discount.amount)}}}}ShoppingCart.addConvFee();PaymentCommon.onAmountChange();updateLiveDataOnPayOpChanged(e)}function paymentOptionChange(a){ShoppingCart.addPGSurcharge(a);ShoppingCart.handlePassthrough(a);ShoppingCart.handlePassthroughMessage(a)}function processPartialPayment(b){try{if(b=="payPartial"){Ewallet.maxRedeemableECash=(detailsJson.partialPayment.maxRedeemableECash)?parseFloat(detailsJson.partialPayment.maxRedeemableECash):0;ProcessPayment.paymentMode="PARTIAL";ShoppingCart.addPartialOrHold(detailsJson.totalAmount-detailsJson.partialPayment.partialPayAmount,detailsJson.partialPayment.payByDate?detailsJson.partialPayment.payByDate:"",detailsJson.partialPayment.partialPayAmount);if(Ewallet.ecashRedeemedAmount>0&&ShoppingCart.totalPayableAmount<(detailsJson.totalAmount-detailsJson.partialPayment.partialPayAmount)){Ewallet.showAlert();YatraEWalletPaymentUI.reverseAuth()}if(detailsJson.promo&&detailsJson.partialPayment.partialPromoAmount){ShoppingCart.updatePromocode(detailsJson.partialPayment.partialPromoAmount)}if((typeof detailsJson.partialPayment!="undefined")&&(typeof detailsJson.partialPayment.earnEcash!="undefined")&&(detailsJson.partialPayment.earnEcash!=null)){var d=detailsJson.partialPayment.earnEcash;$("#ecash_container").removeClass("hide");$("#ecashAmount").html(YatraHelper.formatPrice(d));$("#earnEcashDiv").removeClass("hide")}PaymentCommon.handleVisa(false,"partial_payment_visa_removed_pop_up")}else{if(b=="holdAndPay"){ProcessPayment.paymentMode="HOLDANDPAY";Ewallet.maxRedeemableECash=(detailsJson.holdPayment.maxRedeemableECash)?parseFloat(detailsJson.holdPayment.maxRedeemableECash):0;ShoppingCart.addPartialOrHold(detailsJson.totalAmount-detailsJson.holdPayment.holdAmount,detailsJson.holdPayment.payByDate?detailsJson.holdPayment.payByDate:"",detailsJson.holdPayment.holdAmount);if(Ewallet.ecashRedeemedAmount>0&&ShoppingCart.totalPayableAmount<(detailsJson.totalAmount-detailsJson.holdPayment.holdAmount)){Ewallet.showAlert();YatraEWalletPaymentUI.reverseAuth()}if(detailsJson.promo&&detailsJson.holdPayment.hnpPromoAmount){ShoppingCart.updatePromocode(detailsJson.holdPayment.hnpPromoAmount)}if((typeof detailsJson.holdPayment!="undefined")&&(typeof detailsJson.holdPayment.earnEcash!="undefined")&&(detailsJson.holdPayment.earnEcash!=null)){var d=detailsJson.holdPayment.earnEcash;$("#ecash_container").removeClass("hide");$("#ecashAmount").html(YatraHelper.formatPrice(d));$("#earnEcashDiv").removeClass("hide")}}else{Ewallet.maxRedeemableECash=(detailsJson.maxRedeemableECash)?parseFloat(detailsJson.maxRedeemableECash):((detailsJson.walletDetails)&&(detailsJson.walletDetails.maxRedeemableECash))?parseFloat(detailsJson.walletDetails.maxRedeemableECash):0;ProcessPayment.paymentMode="FULL";if(detailsJson.promo){ShoppingCart.updatePromocode("-"+detailsJson.promo.amount)}ShoppingCart.addPartialOrHold(0,"",0);if((typeof detailsJson.earnEcash!="undefined")&&(detailsJson.earnEcash!=null)&&(detailsJson.earnEcash!=0)){var d=detailsJson.earnEcash;$("#ecash_container").removeClass("hide");$("#ecashAmount").html(YatraHelper.formatPrice(d));$("#earnEcashDiv").removeClass("hide")}var a=YatraPayment.getPayOp();if(a.toUpperCase()=="CC"||a.toUpperCase()=="DC"||a.toUpperCase()=="GV"){if(!GV.maintainState){PaymentCommon.handleVisa(true,"visa_discount_applied_pop_up")}}else{PaymentCommon.handleVisa(false,"payop_changed_visa_discount_pop_up")}}}if(detailsJson.promo&&detailsJson.promo.ecashAmount&&detailsJson.promo.ecashAmount>0){$("#ecash_container").removeClass("hide");var c=detailsJson.promo.ecashAmount;$("#ecashPromoAmount").html(YatraHelper.formatPrice(c));$("#promoEcashEarned").removeClass("hide");if((typeof detailsJson.earnEcash!="undefined")&&(detailsJson.earnEcash!=null)){var f=parseInt(detailsJson.promo.ecashAmount)+parseInt(detailsJson.earnEcash);$("#totalECashEarned").html(YatraHelper.formatPrice(f));$("#totalECashEarnedLi").removeClass("hide")}}if(detailsJson.isTcsEnabled){YatraPaymentUI.callForRecalculatingTcs()}PaymentCommon.onAmountChange()}catch(g){log_error(g)}}function processWalletPayment(b,a){try{if(b=="REDEEM"){Ewallet.ecashRedeemedAmount=a}else{Ewallet.ecashRedeemedAmount=0;$("#nexpEcashForGVToRedeem").val(0)}if(YatraEWalletPaymentUI.isBookingForEcashGV()){ShoppingCart.addEcashGVWalletInfo()}else{ShoppingCart.addWalletInfo()}ProcessPayment.stopPollingForQRCode();PaymentCommon.onAmountChange()}catch(c){log_error(c)}}function getContinueButtonId(){return"payNow"}function log_error(a){}function myFunction(b){console.log("// Get the checkbox",b);if(b.checked){var a=document.getElementById("payNow");a.disabled=false}}function onChangeBnpl(a){if(a=="SPMT"){$(".cpmt_tnCbnplstrip").attr("style","display: block");var b=document.getElementById("payNow");b.disabled=true}else{$(".cpmt_tnCbnplstrip").attr("style","display: none")}}var YatraPayment={initialisePage:function(){YatraPaymentUI.addAdobeProduct();YatraPaymentUI.getAdobeJSON(detailsJson);ShoppingCart.intialise();YatraPaymentUI.showHotelMessage(detailsJson.product,detailsJson.payAtHotel);YatraPaymentUI.showFareBreakUpMessage(detailsJson.fareBreakUpMsg);YatraPaymentUI.showYouPayMessage(detailsJson.youPayMsg);YatraPaymentUI.showStaticMessage(detailsJson);YatraPaymentUI.bankDownMesage();if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){YatraPaymentUI.callForRecalculatingTcs()}YatraPaymentUI.changePayNowButtonLabel(detailsJson.product)},getParamValue:function(b,a){return $("#"+b+" input[name="+a+"]").val()},getPayOp:function(){var a="#tab_"+YatraPaymentUI.getPaymentOption();return $(a).find("input[name=payop]").val()},getPaymentDiv:function(){var a="#tab_"+YatraPaymentUI.getPaymentOption();var b=YatraPayment.getPayOp();if(b=="qb"){a=a+"_qb"}return a},validatePaymentDiv:function(b){var a=PaymentValidation.validate("#"+b);var c=false;if(a){a=YatraPaymentUI.validateRewardPoints()}if(a){a=YatraQBPaymentUI.validateQBAuth()}if(a){a=CreditPool.validate()}if(a){a=CashPool.validate()}if(a){c=YatraPaymentUI.validateCitiEmiTnc()}return c},validatePaymentTab:function(){var b=PaymentValidation.validate("#tab_"+YatraPaymentUI.getPaymentOption());var a=false;var c=false;if(b){a=YatraPaymentUI.validateRewardPoints()}if(a){c=YatraPaymentUI.validateCitiEmiTnc()}return c},appendByKeyValue:function(a,b){if((a!=null&&a!=""&&a!="undefined")&&(b!=null&&b!=""&&b!="undefined")){return a+"="+b+"|"}return""},getAppendedParamters:function(a){var d="";var b=YatraPayment.getPaymentDiv();var c=$(b+" input");c.each(function(){var e=$(this).prop("type");switch(e){case"radio":if($(this).is(":checked")){if(this.name!="paypal"){d+=YatraPayment.appendByKeyValue(this.name,$(this).val())}if(this.name=="paypal"){d+=YatraPayment.appendByKeyValue("currency",$(this).attr("id"));d+=YatraPayment.appendByKeyValue("forexAmount",$(this).attr("forexamount").replace(",",""));d+=YatraPayment.appendByKeyValue("forexRate",$(this).attr("forexrate"))}}break;default:IE_Placeholder.removeDefaultText($(this));d+=YatraPayment.appendByKeyValue(this.name,$(this).val());break}});c=$(b+" select");c.each(function(){d+=YatraPayment.appendByKeyValue(this.name,$(this).val())});return d},getAppendedQBParamters:function(){var d="";var b=YatraPayment.getPaymentDiv();var c=$(b).children("input");c.each(function(){d+=YatraPayment.appendByKeyValue(this.name,$(this).val())});var f=$(b+" input[name= cardid]:checked");d+=YatraPayment.appendByKeyValue("cardid",$(f).val());d+=YatraPayment.appendByKeyValue("cardType",$(f).attr("processcardid"));d+=YatraPayment.appendByKeyValue("cardBrand",$(f).attr("cardType"));d+=YatraPayment.appendByKeyValue("cno",YatraQBPaymentUI.getQBCardNumber());var e=$(f).parent().parent().parent().find("#qb_pmt_addressId");var a=$(e).find("input");a.each(function(){d+=YatraPayment.appendByKeyValue(this.name,$(this).val())});return d},getInternationalCardParameters:function(){var b="";if(YatraPaymentUI.isInternationalSupportedOnProduct()){var a=getPaymentJSON();b+=YatraPayment.appendByKeyValue("sid",a.international.sid);b+=YatraPayment.appendByKeyValue("tdate",a.international.travelDate);b+=YatraPayment.appendByKeyValue("origin",a.international.origin);b+=YatraPayment.appendByKeyValue("destination",a.international.destination);b+=YatraPayment.appendByKeyValue("tripType",a.international.tripType)}return b},getPaymentOptionUrl:function(a){var b="https://secure.yatra.com";if(a=="cc"){return b+"/checkout/pay/creditcard.htm"}else{if(a=="dc"){return b+"/checkout/pay/debitcard.htm"}else{if(a=="nb"){return b+"/checkout/pay/ibanking.htm"}else{if(a=="qb"){return b+"/checkout/pay/quickbook.htm"}else{if(a=="rewards"){return b+"/checkout/pay/rewards.htm"}else{if(a=="mw"){return b+"/checkout/pay/mobileWallet.htm"}else{if(a=="atm"){return b+"/checkout/pay/atm.htm"}else{if(a=="emi"){return b+"/checkout/pay/creditcard.htm"}else{if(a=="ec"){return b+"/checkout/pay/creditcard.htm"}else{if(a=="ivr"){return b+"/checkout/pay/ivr.htm"}else{if(a=="offline"){return b+"/checkout/pay/creditcard.htm"}else{if(a=="cashCard"){return b+"/checkout/pay/cashCard.htm"}else{if(a=="itz"){return b+"/checkout/pay/itz.htm"}else{if(a=="payu"){return b+"/checkout/pay/PayU.htm"}else{if(a=="corpCard"){return b+"/checkout/pay/corporateCard.htm"}else{if(a=="cp"){return b+"/checkout/pay/creditPool.htm"}else{if(a=="buddy"){return b+"/checkout/pay/mobileWallet.htm"}else{if(a=="amazonPay"){return b+"/checkout/pay/mobileWallet.htm"}else{if(a=="upi"){return b+"/checkout/pay/upi.htm"}else{if(a=="dcpin"){return b+"/checkout/pay/debitCardWithAtmPin.htm"}else{if(a=="tez"){return b+"/checkout/pay/googlePay.htm"}}}}}}}}}}}}}}}}}}}}}return b+"/checkout/pay/creditcard.htm"},getHashedFields:function(a){if(a==13){return"XXX"}else{if(a==14){return"XXXX"}else{if(a==15){return"XXXXX"}else{if(a==18){return"XXXXXXXX"}else{if(a==19){return"XXXXXXXXX"}else{return"XXXXXX"}}}}}},getHashedParamters:function(f){var e=f.split("|");var d=0;for(d=0;d<e.length;d++){parameter=e[d];var a=parameter.split("=");var c=a[0];var g=a[1];if(c=="cno"){g=g.substring(0,6)+YatraPayment.getHashedFields(g.length)+g.substring(g.length-4,g.length)}else{if(c=="ccsc"){if(g.length==3){g="XXX"}else{g="XXXX"}}else{if(c=="cexpy"){g="XXXX"}else{if(c=="cexpm"){g="XX"}}}}a[1]=g;e[d]=a.join("=")}var b=e.join("|");if(b.substring(b.length-1,b.length)=="="){b=b.substring(0,b.length-1)}return b},setFieldValue:function(c,d,a){var b=$("#"+c+" input[name="+d+"]");b.val(a)},getPaymentOptionParameters:function(e){var b=getPaymentJSON();var c="";var d="";var a=YatraPayment.getPayOp();c+=YatraPayment.appendByKeyValue("merchant",b.merchant);c+=YatraPayment.appendByKeyValue("product",b.product);if(YatraEWalletPaymentUI.isCompleteEwalletPayment()&&a!="gv"){c+=YatraPayment.appendByKeyValue("payop","ew");c+=YatraPayment.appendByKeyValue("previousPayOp",$("#previousPayOp").val())}else{if(a=="qb"){c+=YatraPayment.getAppendedQBParamters()}else{c+=YatraPayment.getAppendedParamters(a)}c+=YatraPayment.getInternationalCardParameters()}if($("#eCashRedeemed").val()!=null&&$("#eCashRedeemed").val()!=""){c+=YatraPayment.getECashRedemptionParamters()}YatraPayment.setFieldValue(e,"paymentOptionParameters",c);return c},getParameterByName:function(d){var c="";var a=YatraPayment.getPaymentDiv();var b=$(a+" input");b.each(function(){if(this.name==d){c=$(this).val()}});return c},getPromoCodePaymentParams:function(){var a=YatraPayment.getPayOp();var b="";var d="XXXXXX";var c="";var f="";if(a=="cc"){b=YatraPayment.getParameterByName("cno");d=b.substring(0,6);c=YatraPayment.getParameterByName("ctype");f="Credit Card"}else{if(a=="dc"){b=YatraPayment.getParameterByName("cno");d=b.substring(0,6);c=YatraPayment.getParameterByName("ctype");f="Debit Card"}else{if(a=="nb"){c=YatraPayment.getParameterByName("bankCode");f="Net Banking"}else{if(a=="dcpin"){c=YatraPayment.getParameterByName("bankCode");f="Debit Card + ATM Pin"}else{if(a=="atm"){c=YatraPayment.getParameterByName("bankCode");f="atm"}else{if(a=="itz"){c="ITZ Card";f="ITZ Card"}else{if(a=="emi"){b=YatraPayment.getParameterByName("cno");d=b.substring(0,6);c=YatraPayment.getParameterByName("emiBank");f="EMI Option"}else{if(a=="qb"){b=YatraQBPaymentUI.getQBCardNumber();d=b.substring(0,6);c=YatraQBPaymentUI.getQBCardType();f="Quick Book"}else{if(a=="mw"){f="MobileWallet";var e=YatraPayment.getParameterByName("bankCode");switch(e){case"MBK":c="MobiKwik";break;case"PTM":c="PayTM";break;case"ATL":c="AirtelMoney";break;case"JIO":c="RelianceJio";break;case"OXI":c="OXIGEN";break;case"PYU":c="PayU";break;case"BDY":c="SBI BUDDY";break;default:c="MobileWallet"}}}}}}}}}}var g="paymentOption="+f+"|ecn="+b+"|bin="+d+"|paymentVendorName="+c;return g},validateTnC:function(a){var b="#"+a;$(b).pmtValidation();isValid=$(b).data("pmtValidator").isPMTValid();return isValid},getECashRedemptionParamters:function(){var b="";if(redeemAuthJSON){var a=YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON.amountInPaisa);b+=YatraPayment.appendByKeyValue("wallet_amount",a);b+=YatraPayment.appendByKeyValue("wallet_id",redeemAuthJSON.walletId)}return b},formatAmount:function(a){if(a!=undefined&&a>0){a=parseFloat(a);a=Math.abs(a);if(a<=999){return a}var c=new RegExp(/(\d)(?=(\d\d\d)+(?!\d))/g);var b=a.toString().replace(c,"$1,");return b}return 0},formatInterestAmount:function(b,a){if(b!=undefined&&b>0){b=parseFloat(b);b=Math.abs(b);if(b<1&&a==0){return 0}if(b<=999){return b}var d=new RegExp(/(\d)(?=(\d\d\d)+(?!\d))/g);var c=b.toString().replace(d,"$1,");return c}return 0},deformatAmount:function(a){var c=new RegExp(/,/g);var b=a.replace(c,"");return b},processIFramePayment:function(d){var c=YatraPaymentUI.eligibleForIframePayment();if(c){var b=$("#"+d);b.attr("target","cpmt-payment-iframe");$("#iframe-div").show();var a=$("#cpmt-payment-iframe").is(":visible");if(a==true){$(".cpmt_Container").addClass("full-width");$(".black-bg").show();$("body").css("overflow-y","hidden")}}return c},closeIframe:function(){$("#iframe-div").hide();$("#cpmt-payment-iframe").attr("src","");$(".cpmt_Container").removeClass("full-width");$(".black-bg").hide();$("body").css("overflow-y","scroll");YatraPaymentUI.trackGatewayWithStage("X");notifyIframeClosed()},ifValueIsDefault:function(b){var a=false;if(b=="Cardholder's Name"){a=true}else{if(b=="Credit Card Number"){a=true}}return a}};var intl_productsArr=new Array("dom2","us","uk","int","int2","dom","STAND_ALON","INT_HOTEL","HOTEL_IN","rescheduling","crpint","crpdom","crpdom_hotel","crpint_hotel","byop","bus","trainngetb2c","homestays","activities","metadom","metaint","busdesktop","buswap","trainngetwap","crpdomhotel","crpinthotel","yatramonuments","asimonuments","corpSAPG","corpInsurance","cinsweb","smeodom","smepdom","smeoint","smepint","frndom","frnint","aedint","aeddom","wegoaeddom","wegousddom","kayakusddom","kayakusdint","wegousdint","wegoaedint","FRN_HOTEL_IN","FRN_INT_HOTEL","INT_HOTEL_PREPAY","kwddom","kwdint","SmedoB2c","SmeioB2c","SmedpB2c","SmeipB2c","corpbusdesktop","googledom","googleint","trainb2c");var int_card_two_days_allowing_products=new Array("INT_HOTEL","HOTEL_IN","homestays","FRN_HOTEL_IN","FRN_INT_HOTEL","INT_HOTEL_PREPAY","SmedoB2c","SmeioB2c","SmedpB2c","SmeipB2c");var int_card_travel_date_ignore_products=new Array("crpdom","crpint","crpint_hotel","crpdom_hotel","crp","crpdomhotel","crpinthotel","corpSAPG","corpInsurance","cinsweb","corpbusdesktop");var intlPayOpArr=new Array("cc","dc");var emiInterestRate=12;var partialPay_productsArr=new Array("HOLIDAY_IN","dom2","int2","HOLIDAYS_SAPG","HOLIDAYS_OB","HOLIDAYS_SAPG_OB","HOLIDAYS_MP_ONLINE","metadom","metaint","FR_HOLIDAYS_SAPG","FR_HOLIDAY_IN","smeodom","smepdom","smeoint","smepint","frndom ","frnint ","aedint ","aeddom ","wegoaeddom","wegousddom","kayakusddom","kayakusdint","wegousdint","wegoaedint");var partial_payOpArr=new Array("cc","dc","nb","cashCard","ec","mw","rewards","atm","itz","emi","ew","upi","amazonPay","gv","ebixcash");var holdAndPay_productsArr=new Array("HOLIDAY_IN","HOLIDAYS_OB","HOLIDAYS_SAPG_OB","dom2","HOLIDAYS_SAPG","HOLIDAYS_MP_ONLINE","metadom","metaint","FR_HOLIDAYS_SAPG","FR_HOLIDAY_IN","smeodom","smepdom","smeoint","smepint","frndom ","frnint ","aedint ","aeddom ","wegoaeddom","wegousddom","kayakusddom","kayakusdint","wegousdint","wegoaedint");var holdAndPay_payOpArr=new Array("cc","dc","nb","cashCard","ec","mw","rewards","atm","itz","emi","ew","upi","amazonPay","gv","ebixcash");var rupayBinRange=new Array("508500-508999","606985-607384","607385-607484","607485-607984","608001-608100","608101-608200","608201-608300","608301-608350","608351-608500","652150-652849","652850-653049","653050-653149");var productMap=new Object();var adobeProductMap=new Object();var productMapGAPageView=new Object();var rwConversion=0;var continueClass;var stageCounter=0;var isCitiEmiPopupTncValidated=false;var dcPinBankVsPgData=new Object();var productsOnInternationalGateway=internationalProductsList.substring(1,internationalProductsList.length-1).split(", ");var sessionTimerInterval;var digitalDataAdobe=new Object();var page=new Object();var binNumber="000000";var paymentDivHeight=parseInt($(".cpmt_Paytabbox").css("min-height"));$("#emiBank_select").val("");$("#TncAgree").prop("checked",false);$(function(){$("#payerVA").autocomplete({source:function(e,c){var d=e.term.trim();if(!d.includes("@")){c([]);return}var b=d.substring(d.lastIndexOf("@"));var a=upiBankCodesList.filter(function(f){return f.startsWith(b)});c(a)},focus:function(c,d){c.preventDefault();var b=$(this).val().split("@")[0];var a=d.item.value;$(this).val(b+a)},select:function(c,d){c.preventDefault();var b=$(this).val().split("@")[0];var a=d.item.value;$(this).val(b+a);return false},open:function(b,c){if(upiBankCodesList.length===0){$(this).autocomplete("disable")}var a=$(this).autocomplete("widget");a.css("max-height","200px");a.css("overflow-y","auto")}})});var maxBookingValuePossible=999999999;var YatraPaymentUI={d5errorMessage:"The date of travel should be at least 5 days from the date of booking in case of international cards. Please use some other mode of payment.",d3errorMessage:"The date of travel should be at least 3 days from the date of booking in case of international cards. Please use some other mode of payment.",d2errorMessage:"The date of travel should be at least 2 days from the date of booking in case of international cards. Please use some other mode of payment.",intlWarningMessage:"International cards are not supported for this transaction. Please use a card issued in India, or a different mode of payment e.g. Net banking",intlerrorMessage:"This transaction cannot be completed using an international credit card. Please use a card issued in India, or a different mode of payment e.g. Net banking",amexWarningMessage:"We accept AMEX cards issued in India. If you have a AMEX card issued outside India, please use a different mode of payment e.g. Net Banking.",emiIntlErrorMessage:"International credit cards are not supported in case of EMI payment option",rewardsIntlErrorMessage:"International credit cards are not supported in case of Reward points payment option",paymentProcessType:"Secure",cvvRequired:"true",isNoCostEmiFlag:false,recordEventInSentry:function(d,a,c,e,f){var b={};if(e!=undefined&&f!=undefined){b[e]=f}Raven.captureMessage(d,{level:a,tags:{category:c},extra:b})},recordEventInSentryWithObj:function(d,a,c,b){Raven.captureMessage(d,{level:a,tags:{category:c},extra:b})},formEmptyCCorDC:function(a){if($("#"+a+"_cno_id").val()!=""||$("#"+a+"_cardholder_name_id").val()!=""||$("#"+a+"_expMonth_id").val()!=""||$("#"+a+"_cvv_id").val()!=""||$("#"+a+"_expy_id").val()!=""){return true}else{return false}},trackGatewayWithoutStage:function(){stageCounter++;YatraPaymentUI.trackGatewayWithStage(stageCounter)},trackGatewayWithStage:function(b){try{var a=getPaymentJSON();var c=a.tracking_id;if(c!=null&&c!=""&&c!="undefined"){$.ajax({url:"/checkout/gateway/tracking/save-url.htm?ttid="+c+"&stage="+b,cache:false,success:function(e){},error:function(g,e,f){}})}}catch(d){}},ewalletRedemptionUpdateOnGSTIncrease:function(d,b,f){var e=YatraEWalletPaymentUI.nexpEcash;if(e>0){var a=d-b+f;var c=YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON.amountInPaisa);if(a>d&&c<a){YatraEWalletPaymentUI.reverseAuth();YatraPaymentUI.recordEventInSentry("Ecash Reverse Auth due to updated GST","info","Ecash Redemption GST");$("#redeem-ecash-button").trigger("click","auto")}}},setExpiryYearData:function(){var f=new Date().getFullYear();var j=$("#cc_expy_id");var h=$("#dc_expy_id");var e=$("#rw_expy_id");var c=$("#emi_expy_id");var b=$("#dcpin_expy_id");for(var a=1;a<=40;a++){var g=f;var d=f;if(j!=null&&typeof(j)!="undefined"){j.append("<option value='"+g+"'>"+d+"</option>")}if(h!=null&&typeof(h)!="undefined"){h.append("<option value='"+g+"'>"+d+"</option>")}if(e!=null&&typeof(e)!="undefined"){e.append("<option value='"+g+"'>"+d+"</option>")}if(c!=null&&typeof(c)!="undefined"){c.append("<option value='"+g+"'>"+d+"</option>")}if(b!=null&&typeof(b)!="undefined"){b.append("<option value='"+g+"'>"+d+"</option>")}f=f+1}},addDcPinBankVsPgData:function(){$.each(dcPinBankPgDataList,function(a,b){dcPinBankVsPgData[b.bank_code]=b.cardfields_show})},generateDcPinLogos:function(){$("#dcpincardlogos").empty();$.each(dcPinCardLogoVsCode,function(a,b){$("#dcpincardlogos").append("<i class='PaymentSprite "+a+"' title='"+b+"' ></i>")})},addProductsToGAMap:function(){productMap.HOLIDAY_IN="Common Payment Page - HOLIDAYS";productMap.HOLIDAYS_OB="Common Payment Page - HOLIDAYS";productMap.dom2="Common Payment Page - DOM FLIGHTS";productMap.int2="Common Payment Page - OB FLIGHTS";productMap.HOTEL_IN="Common Payment Page - HOTELS";productMap.trainngetb2c="Common Payment Page - TRAINS";productMap.RAIL="Common Payment Page - TRAINS";productMap.bus="Common Payment Page - BUS";productMap.metadom="Common Payment Page - DOM FLIGHTS";productMap.metaint="Common Payment Page - OB FLIGHTS";productMap.homestays="Common Payment Page - HOMESTAYS";productMap.mdomwap="WAP Common Payment Page - DOM FLIGHTS";productMap.mintwap="WAP Common Payment Page - OB FLIGHTS";productMap.mdomhotelwap="WAP Common Payment Page - HOTELS";productMap.trainngetwap="WAP Common Payment Page - TRAINS";productMap.HOLIDAY_WAP="WAP Common Payment Page - HOLIDAYS";productMapGAPageView.HOLIDAY_IN="/vpv/coreTrans/Holidays/payment";productMapGAPageView.HOLIDAYS_OB="/vpv/coreTrans/Holidays/payment";productMapGAPageView.dom2="/vpv/coreTrans/DOMFlights/payment";productMapGAPageView.int2="/vpv/coreTrans/OBFlights/payment";productMapGAPageView.HOTEL_IN="/vpv/coreTrans/Hotels/payment";productMapGAPageView.trainngetb2c="/vpv/coreTrans/Trains/payment";productMapGAPageView.RAIL="/vpv/coreTrans/Trains/payment";productMapGAPageView.bus="/vpv/coreTrans/Bus/payment";productMapGAPageView.metadom="/vpv/coreTrans/DOMFlights/payment";productMapGAPageView.metaint="/vpv/coreTrans/OBFlights/payment";productMapGAPageView.mdomwap="/vpvw/coreTrans/DOMFlights/payment";productMapGAPageView.mintwap="/vpvw/coreTrans/OBFlights/payment";productMapGAPageView.mdomhotelwap="/vpvw/coreTrans/DOMHotels/payment";productMapGAPageView.trainngetwap="/vpvw/coreTrans/Trains/payment";productMapGAPageView.HOLIDAY_WAP="/vpvw/coreTrans/Holidays/payment";productMapGAPageView.homestays="/vpv/coreTrans/HomeStays/payment"},pushGAInfoPageView:function(){try{var a=getPaymentJSON();if(a.gavpv){if(typeof yt_ga!="undefined"){yt_ga.trackPageView(a.gavpv)}}else{if(productMapGAPageView[a.product]){if(typeof yt_ga!="undefined"){yt_ga.trackPageView(productMapGAPageView[a.product])}}}}catch(b){}},pushGAInfoGeneric:function(a,d){try{var b=getPaymentJSON();var g=b.product;var c=productMap[g];_gaq.push(["_trackEvent",c,a,d])}catch(f){}},adobeTrackPaymentQBData:function(){var h=detailsJson.product;if(adobeProductMap[h]!=""&&typeof adobeProductMap[h]!="undefined"){try{var g="";var d="yt";var f="";var c=adobeProductMap[h];var b=c.split("|");f=b[0];g=b[2];var a=d+":"+g+":"+f+":checkout:payment";if(typeof digitalDataAdobe.user=="undefined"){digitalDataAdobe.user={}}if(typeof digitalDataAdobe.userProfile=="undefined"){digitalDataAdobe.userProfile={}}digitalDataAdobe.user.emailID=detailsJson.userDetails.email;digitalDataAdobe.user.mobileNumber=detailsJson.userDetails.mobileNoISD+detailsJson.userDetails.mob;digitalDataAdobe.user.loginStatus="logged-in";digitalDataAdobe.userProfile.loginLocation=a;digitalDataAdobe.userProfile.loginType="normal";digitalDataAdobe.userProfile.userType="customer";if(typeof yt_adobe!="undefined"){yt_adobe.track("successfulLogin",digitalDataAdobe)}}catch(j){}}},adobeTrackPromoFaliure:function(){try{digitalDataAdobe.page.pageInfo.popName="promocode mismatch";if(typeof yt_adobe!="undefined"){yt_adobe.track("popup-load",digitalDataAdobe)}}catch(a){}},adobeTrackAfterPromoFaliure:function(a){try{digitalDataAdobe.customLinkName="promocode mismatch: "+a;if(typeof yt_adobe!="undefined"){yt_adobe.track("custom-link-click",digitalDataAdobe)}}catch(b){}},adobeTrackPaymentLoadData:function(p,a,d){try{var f="no";digitalDataAdobe.cardstatus="unchecked";if(p=="qb"||p=="QB"){f="yes";digitalDataAdobe.cardstatus="checked";a=YatraQBPaymentUI.getQBCardType()}if(typeof digitalDataAdobe.transaction=="undefined"){digitalDataAdobe.transaction={}}digitalDataAdobe.transaction.paymentMethod=d+"|"+a+"|"+f;var m=detailsJson.sessionTimeoutData;if(m&&m.pricingTime!=undefined&&m.pricingTime!=""&&m.currentTime!=undefined&&m.currentTime!=""&&m.timeout>0){var b=new Date(m.currentTime);var k=new Date(m.pricingTime);var j=new Date();var g=j-k;var h=Math.floor(g/1000);var o=j-b;var q=Math.floor(o/1000);var l=b-k;var c=Math.floor(l/1000);digitalDataAdobe.timeOnPayment=q;digitalDataAdobe.timePricingToPayment=h}if(typeof yt_adobe!="undefined"){yt_adobe.track("payNow",digitalDataAdobe)}}catch(n){}},pushGAInfo:function(a){YatraPaymentUI.pushGAInfoGeneric("Payment Method",a)},pushGTAPayswiftTrackingData:function(c){var b=this.pushLivePayswiftTrakingdata(c);if(b&&dataLayer){dataLayer.push(b)}},pushGTAPayswiftTrakingHotelData:function(c){var b=this.pushLivePayswiftTrakingHoteldata(c);if(b&&dataLayer){dataLayer.push(b)}},getCoupon:function(a){if(a.code===""){return"N/A"}else{return a.code}},getCouponValue:function(a){if(a.amount===0){return 0}else{return a.amount}},pushLivePayswiftTrakingdata:function(a){var b={},b={event:"add_payment_info",trip_type:detailsJson&&detailsJson.tripType?detailsJson.tripType:"N/A",ecommerce:{currency:detailsJson&&detailsJson.currencyName?detailsJson.currencyName:"N/A",value:detailsJson&&detailsJson.promo&&detailsJson.promo.amount?detailsJson.promo.amount:"N/A",coupon:detailsJson&&detailsJson.promo&&detailsJson.promo.code?detailsJson.promo.code:"N/A",payment_type:a,items:[{item_name:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].name?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].name:"N/A",item_id:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].id?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].id:"N/A",price:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].price?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].price:"N/A",item_brand:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].brand?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].brand:"N/A",item_category:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].category?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].category:"N/A",item_variant:detailsJson&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData&&detailsJson.uiParams.gaTrackingData.ecommerce&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products&&detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].variant?detailsJson.uiParams.gaTrackingData.ecommerce.checkout.products[0].variant:"N/A",item_list_name:"Payment",index:1,item_category2:detailsJson&&detailsJson.tripType?detailsJson.tripType:"N/A"}]}};return b},pushLivePayswiftTrakingHoteldata:function(a){var b={},b={event:"add_payment_info",ecommerce:{currency:detailsJson&&detailsJson.currencyName?detailsJson.currencyName:"N/A",value:detailsJson&&detailsJson.promo&&detailsJson.promo.amount?detailsJson.promo.amount:"N/A",coupon:detailsJson&&detailsJson.promo&&detailsJson.promo.code?detailsJson.promo.code:"N/A",payment_type:a,items:[{item_name:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].name?detailsJson.gaTrackingData.ecommerce.checkout.products[0].name:"N/A",item_id:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].id?detailsJson.gaTrackingData.ecommerce.checkout.products[0].id:"N/A",price:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].price?detailsJson.gaTrackingData.ecommerce.checkout.products[0].price:"N/A",item_brand:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].brand?detailsJson.gaTrackingData.ecommerce.checkout.products[0].brand:"N/A",item_category:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].category?detailsJson.gaTrackingData.ecommerce.checkout.products[0].category:"N/A",item_variant:detailsJson&&detailsJson.gaTrackingData&&detailsJson.gaTrackingData.ecommerce&&detailsJson.gaTrackingData.ecommerce.checkout&&detailsJson.gaTrackingData.ecommerce.checkout.products&&detailsJson.gaTrackingData.ecommerce.checkout.products[0].variant?detailsJson.gaTrackingData.ecommerce.checkout.products[0].variant:"N/A",item_list_name:"Payment",index:1,item_category2:detailsJson&&detailsJson.otherDetails&&detailsJson.otherDetails.hotelGrade?detailsJson.otherDetails.hotelGrade:"N/A"}]}};return b},pushGATrackingData:function(){var a=detailsJson.gaTrackingData;if(!a&&detailsJson.uiParams&&detailsJson.uiParams.gaTrackingData){a=detailsJson.uiParams.gaTrackingData;if(a.ecommerce&&a.ecommerce.checkout&&a.ecommerce.checkout.products[0]){a.ecommerce.checkout.products[0].price=ShoppingCart.totalPayableAmount}}if(a&&dataLayer){dataLayer.push(a)}},pushGAInfoForPaymentModes:function(a){if(a=="payFull"){a="Paynow Now"}else{if(a=="payPartial"){a="Partial Payment"}else{if(a=="holdAndPay"){a="Hold Booking"}}}YatraPaymentUI.pushGAInfoGeneric("Scope of Payment",a)},pushGAInfoEWallet:function(a){YatraPaymentUI.pushGAInfoGeneric("eCash",a)},pushGAInfoForQuickBook:function(a){YatraPaymentUI.pushGAInfoGeneric("Quickbook",a)},enableFirstPaymentOption:function(){if(detailsJson.promo&&detailsJson.promo.paymentOption){var c=$("#"+detailsJson.promo.paymentOption);var a=detailsJson.promo.paymentOption;var b="#tab_"+a;$("#cpmt_tabContainer").find("li").removeClass("active").addClass("dactive");$(c).parent("li").addClass("active").removeClass("dactive");$(b).attr("style","display:block;");$("#other_payop").val(detailsJson.promo.paymentOption);if(redeemNow){c.click();$("#other_payop").trigger("change")}YatraPaymentUI.clearPaymentDetails(b);if(detailsJson.promo.paymentOption=="mw"&&detailsJson.promo.subPaymentOption){$("#"+detailsJson.promo.subPaymentOption).click()}if(detailsJson.promo.paymentOption=="nb"&&detailsJson.promo.subPaymentOption){if($("#"+detailsJson.promo.subPaymentOption).length){$("#"+detailsJson.promo.subPaymentOption).click()}else{$('input:radio[name="prBank"]').prop("checked",false);$("#nprBank").val(detailsJson.promo.subPaymentOption);$("#nprBank").trigger("change")}$("#netBankDropDowm").val(detailsJson.promo.subPaymentOption);$("#netBankDropDowm").trigger("change")}}else{var c=$("#cpmt_tabmenu > li:first > a");var a=$(c).attr("paymentOption");var b="#tab_"+a;$("#other_payop").val(a);$("#cpmt_tabContainer").find("li").removeClass("active").addClass("dactive");$(c).parent("li").addClass("active").removeClass("dactive");$(b).attr("style","display:block;");if(redeemNow){c.click()}YatraPaymentUI.clearPaymentDetails(b)}redeemNow=true},clearValidationError:function(){$("body").find("div.pmt_errorlist").remove()},resetDropDown:function(a){if($(a).length>0){$(a).val("")}},getMultiPayOpt:function(){var e;var a=YatraPayment.getPayOp();var g=YatraPaymentUI.getPaymentOption();if(a!=undefined&&a.toUpperCase()=="QB"){var c="";if(g=="cc"){c=$("input:radio[processCardId=cc]:checked")}else{c=$("input:radio[processCardId=dc]:checked")}var d=$(c).val();var f="#multiflow_type_div_"+d;e=$(f+' input:radio[name="processTyperdo"]:checked').val()}else{if(g=="cc"||g=="dc"){var h="#"+g+"_";var j=h+"process-pay-type";var b="#"+a+"_process_pay_type_div";e=$(b+' input:radio[name="processTyperdo"]:checked').val()}}if(e!=undefined){return e}return"Secure"},disableMultiFlowUiForCreditCard:function(a){$(".qb_multiFlowDiv").hide()},disableMultiFlowUiForDebitCard:function(a){$(".qb_multiFlowDiv").hide()},initializeBanksPaymentUI:function(){$('#tab_nb input:radio[name="prBank"]:nth(0)').trigger("click");$('#tab_nb input:radio[name="prBank"]:nth(0)').attr("checked","checked");$('#tab_nb > input[name="bankCode"]').val($('input[name="prBank"]:checked').val());$("#iframeEnabledFor-nb-bank").val($('input[name="prBank"]:checked').attr("iframeEnabled"));$('#tab_atm input:radio[name="atmBank"]:nth(0)').attr("checked","checked");$('#tab_atm > input[name="bankCode"]').val($('input[name="atmBank"]:checked').val());$('#tab_mw input:radio[name="walletService"]:nth(0)').attr("checked","checked");$('#tab_mw > input[name="bankCode"]').val($('input[name="walletService"]:checked').val());$('#tab_payltr input:radio[name="payLaterService"]:nth(0)').attr("checked","checked");$('#tab_payltr > input[name="bankCode"]').val($('input[name="payLaterService"]:checked').val())},resetBillingDiv:function(a){var b="#"+a+"_";$(b+"ba1").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"ba1"));$(b+"bcity").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"bcity"));$(b+"bstate").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"bstate"));$(b+"bpin").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"bpin"));$(b+"bcountry_id").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"bcountry_id"));YatraPaymentUI.resetDropDown(b+"bcountry");$(b+"baisd").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"baisd"));$(b+"bamob").val("");IE_Placeholder.callBackPlaceDefaultText($(b+"bamob"))},resetCreditCardCvv:function(){var a=$("#cc_CvvUrl_id").attr("class");$("#cc_CvvUrl_id").removeClass(a);$("#cc_CvvUrl_id").addClass($("#cc_CvvUrl_id").attr("defaultVal"));$(".cpmt_CVVtxt").text($(".cpmt_CVVtxt").attr("defaultVal"));$("#cc_cvv_id").attr("maxlength",3);$("#cc_cvv_id").attr("data-validation","required|regType[number]|lenCheck[3]");$("#cc_cvv_id").prop("disabled",false);$("#cc_cvv_id").css("background-color","#FFFFFF")},resetEMICardCvv:function(){var a=$("#emi_CvvUrl_id").attr("class");$("#emi_CvvUrl_id").removeClass(a);$("#emi_CvvUrl_id").addClass($("#emi_CvvUrl_id").attr("defaultVal"));$("#emi_cvvImageText_id").text($("#emi_cvvImageText_id").attr("defaultVal"));$("#emi_cvv_id").attr("maxlength",3);$("#emi_cvv_id").attr("data-validation","required|regType[number]|lenCheck[3]");$("#emi_cvv_id").prop("disabled",false);$("#emi_cvv_id").css("background-color","#FFFFFF")},resetCreditCard:function(){YatraPaymentUI.resetCreditCardCvv();$("#cc_AddressShowHide").hide();$("#cc_pmt_addressId").hide();$("#cc_process-pay-type").hide();YatraPaymentUI.paymentProcessType="Secure";YatraPaymentUI.resetDropDown("#cc_expm_id");YatraPaymentUI.resetDropDown("#cc_expy_id");$("#cc_expm_id").prop("selectedIndex",0);$("#cc_expMonth_id").val("");$("#cc_expYear_id").val("");if(showSaveOption){$("#cc_saveQBCard").attr("checked",true);$("#cc_saveQuickBookCard_id").val("true")}$("#cc_cno_id").val("");$("#cc_cardholder_name_id").val("");YatraPaymentUI.resetDropDown("#cc_bcountry");$("#cc_bcountry_id").val("");$("#cc_bcountry_name").val("");$("#cc_divErrMsgBlock").css("display","none")},resetDebitCard:function(){$("#dc_pmt_addressId").hide();$("#dc_process-pay-type").hide();YatraPaymentUI.paymentProcessType="Secure";YatraPaymentUI.resetDropDown("#dc_expm_id");YatraPaymentUI.resetDropDown("#dc_expy_id");$("#dc_expMonth_id").val("");$("#dc_expYear_id").val("");$("dc_cno_id").val("");$("#dc_cardholder_name_id").val("");if(showSaveOption){$("#dc_saveQBCard").attr("checked",true);$("#dc_saveQuickBookCard_id").val("true")}YatraPaymentUI.resetDropDown("#dc_bcountry");$("#dc_bcountry_id").val();$("#dc_bcountry_name").val();YatraPaymentUI.setMaestroUI("VISA");$("#dc_divErrMsgBlock").css("display","none")},resetPaymentOptionDivHieght:function(){var b=$("ul#cpmt_tabmenu li").length;if($("li#cpmt_otherPayOp li").length){b=b-1}var a=detailsJson.convFeePercent?68:50;if(b>=14){var c=(b-14)*a;var d;if(paymentDivHeight){d=paymentDivHeight}else{paymentDivHeight=parseInt($(".cpmt_Paytabbox").css("min-height"));d=paymentDivHeight}$(".cpmt_Paytabbox").css("min-height",d+c+25+"px")}},resetEMI:function(){YatraPaymentUI.resetEMITableDetails();YatraPaymentUI.resetEMICardCvv();if(showEMIInfo){$("#emi_msg").show()}else{$("#emi_msg").hide()}YatraPaymentUI.resetDropDown("#emi_expm_id");YatraPaymentUI.resetDropDown("#emi_expy_id");$("#emi_expMonth_id").val("");$("#emi_expYear_id").val("");var a=$("#emiBank_select option:selected").val();$("#emi_mobile_number_id_"+a).val("");$("#emi_divErrMsgBlock").hide();$("#emi_divWarningMsgBlock").hide();YatraPaymentUI.enablePayNow(YatraPaymentUI.getPaymentOption());$("#emi_cno_id").val("");IE_Placeholder.callBackPlaceDefaultText($("#emi_cno_id"));$("#emi_cvv_id").val("");IE_Placeholder.callBackPlaceDefaultText($("#emi_cno_id"))},resetEMITableDetails:function(){var b=$("#emiBank_select option:selected").val();if(b!=""){var a=$('input:radio[name="'+b+'"]:nth(0)');a.trigger("click")}},resetRewardPoint:function(){YatraPaymentUI.resetDropDown("#rw_expm_id");YatraPaymentUI.resetDropDown("#rw_expy_id");$("#rw_expMonth_id").val("");$("#rw_expYear_id").val("")},resetQuickBookCards:function(e){var c=e+"QB";var b=c+' input:radio[name="cardid"]:nth(0)';if(c=="#tab_ccQB"){if($("#cc_qbEnabled").val()=="true"){$(b).prop("checked",true);$(b).parents().removeClass("selChecked");YatraPaymentUI.enableQBCVVForCheckedCreditCard($(b));if($(b).attr("cardNumberOriginal")!=null&&$(b).attr("cardNumberOriginal")!=undefined){var d=$(b).attr("cardNumberOriginal").replace(/-/g,"");var a=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired($(b),"cc",a);YatraPaymentUI.setMultiPayUiForQBIfRequired($(b),"cc",a)}YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard($(b));YatraPaymentUI.disableNewCreditCard()}}else{if(c=="#tab_dcQB"){if($("#dc_qbEnabled").val()=="true"){$(b).prop("checked",true);$(b).parents().removeClass("selChecked");YatraPaymentUI.enableQBCVVForCheckedDebitCard($(b));if($(b).attr("cardNumberOriginal")!=null&&$(b).attr("cardNumberOriginal")!=undefined){var d=$(b).attr("cardNumberOriginal").replace(/-/g,"");var a=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired($(b),"dc",a);YatraPaymentUI.setMultiPayUiForQBIfRequired($(b),"dc",a)}YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard($(b));YatraPaymentUI.disableNewDebitCard()}}}YatraQBPaymentUI.resetQB(c);YatraQBPaymentUI.innerSwitch(c)},clearPaymentDetails:function(b){binNumber="000000";$(b+" input:text").each(function(){var c=$(this).attr("id");if(c!="qb_user_email_cc"&&c!="qb_user_email_dc"&&c!="corp_user_email"){$(this).val("");IE_Placeholder.callBackPlaceDefaultText($(this))}});$(b+" input:password").each(function(){$(this).val("");try{if($.browser.msie&&parseInt($.browser.version)>9){IE_Placeholder.callBackPlaceDefaultText($(this))}}catch(c){}});$(b+" i.cpmt_fade").removeClass("cpmt_fade");YatraPaymentUI.resetCreditCard();YatraPaymentUI.resetDebitCard();YatraPaymentUI.initializeBanksPaymentUI();YatraPaymentUI.resetDropDown("#nprBank");YatraPaymentUI.resetEMI();YatraPaymentUI.resetRewardPoint();YatraPaymentUI.resetQuickBookCards(b);YatraCorpCardUI.initialise();YatraPaymentUI.resetDebitAtmPin();if(detailsJson.convFeePercent){var a=YatraPayment.getPayOp();for(x in detailsJson.convFeePercent){if(x!="default"){if(detailsJson.convFeePercent[x]==0){if(x=="upi"){$("#"+x+" .convFeesPaymetOption").addClass("zeroConvFeePercent").html("Zero Conv. Fee")}}else{$("#"+x+" .convFeesPaymetOption").html("Conv. Fee - "+detailsJson.convFeePercent[x]+"% ")}$("#"+x+" .convFeesPaymetOption").removeClass("conFeesPO")}}$(".conFeesPO").html("Conv. Fees - "+detailsJson.convFeePercent["default"]+"% ");$(".you-pay-txt .ico_info_paySwift").css("display","inline-block");$(".you-pay-txt").addClass("hoverForConvFeesHolidays")}if(showQRFlag){$(".QRDiv").show();$(".UPIor").show();$(".upiRow").hide()}if(showPromoImage){$(".promotionDiv").css("background-image","url("+showPromoImageUrl+")");$(".promotionDiv").show()}YatraPaymentUI.resetPaymentOptionDivHieght();if(detailsJson.product=="INT_HOTEL_BKG"){$("#cc_cardholder_name_id").attr("data-validation","required|regType[alpha]|minLenCheck[3]");$("#cc_cardholder_name_id").attr("data-msginfo","* required|* alphabets only | Min 3 characters required")}},resetDebitAtmPin:function(){$("#dcpincardul").show();$("#dcpinpaylaterlabel").hide();YatraPaymentUI.resetDropDown("#dcpinBank");YatraPaymentUI.clearDcPinCardFields()},clearDcPinCardFields:function(){YatraPaymentUI.resetDropDown("#dcpin_expm_id");YatraPaymentUI.resetDropDown("#dcpin_expy_id");$("#dcpin_expMonth_id").val("");$("#dcpin_expYear_id").val("");$("#dcpin_cno_id").val("");$("#dcpin_cardholder_name_id").val("");$("#dcpin_cvv_id").val("")},startSessionTimer:function(){if(enableSessionTimer=="true"&&detailsJson.sessionTimeoutData!=undefined){var h=detailsJson.sessionTimeoutData;if(h.pricingTime!=undefined&&h.pricingTime!=""&&h.currentTime!=undefined&&h.currentTime!=""&&h.timeout>0){var b=new Date(h.currentTime);var g=new Date(h.pricingTime);var a=h.timeout;var e=a*60000;var j=b-g;var c=h.timeoutMessage;if(j>=e){YatraPaymentUI.showSessionTimerPopup(c)}else{var d=1000;var f=e-j;sessionTimerInterval=setInterval(function(){var k=Math.floor(f/60000);var l=((f%60000)/1000).toFixed(0);document.getElementById("bookingCounterMins").innerHTML=k;document.getElementById("bookingCounterSeconds").innerHTML=l;if(k==0&&l==0){$("#bookingCounter").hide();YatraPaymentUI.showSessionTimerPopup(c);YatraPaymentUI.recordEventInSentry("Session Timed out","info","session-timer-expired","timeLapsedTillPaymentPage",j)}else{$("body").addClass("timer-on");$("#bookingCounter").css({display:"inline-block"});$(".copyright").css("margin-bottom","18px")}f=f-d},d)}}else{YatraPaymentUI.recordEventInSentry("PricingTime or CurrentTime is null","info","session-timer-not-shown")}}},showSessionTimerPopup:function(a){if(sessionTimerInterval!=undefined){clearInterval(sessionTimerInterval)}if(!(detailsJson&&detailsJson.sessionTimeoutData&&detailsJson.sessionTimeoutData.searchUrl)){$("#searchResult").parent().hide();$("#latestPricing").attr("value","Try Again")}$("body").removeClass("timer-on");$("#session_timer_pop_up").css({display:"block"});$("body").css({overflow:"hidden"});$(document).bind("scroll",function(){window.scrollTo(0,0)})},hideSessionTimerPopup:function(){if(sessionTimerInterval!=undefined){clearInterval(sessionTimerInterval)}$("#session_timer_pop_up").hide();$(document).unbind("scroll");$("body").css({overflow:"visible"})},displayEmiTable:function(){$("citi_info_message").hide();$("#bajajWarningMsgDiv").hide();$("#emiBank_select").on("change keyup",function(){var b=$("#emiBank_select option:selected").val();$("#emi_emiBank_id").val(b);if(b!=""){finalName=b+"-emi";$(".get-logo").find("."+finalName).removeClass("hide").siblings().addClass("hide");$(".cpmt_emiOptn").show();$("#emi-details-table").find("tr").addClass("hide");$(".tabel-header-footer").show();$("#emi-details-table").find("."+b+"-emi-details").removeClass("hide");if($(".emi_mobile_"+b).length){$(".emi_mobile_"+b).removeClass("hide").siblings().addClass("hide");$(".emi_card_label").html("Debit Card Number")}else{$(".emi_moble_row div").addClass("hide");$(".emi_card_label").html("Credit Card Number")}var a=$('input:radio[name="'+b+'"]:nth(0)');a.attr("checked","checked");YatraPaymentUI.setEMITableFooterDetails(a);document.getElementById("citi_info_message").innerHTML="";document.getElementById("bajajWarningMsg").innerHTML="";$("#bajajWarningMsgDiv").hide();if(b=="citi"){document.getElementById("citi_info_message").innerHTML="Please visit <a target='_blank' style='color:#007ec8 !important' href='http://citibank.com/India'>Citibank.com/India </a> for more information.";document.getElementById("citi_info_message").style.display="inline"}}else{$(".get-logo label").addClass("hide");$(".cpmt_emiOptn").hide()}})},logPageLoadInSentry:function(){YatraPaymentUI.logUserLoginDetailsInSentry("PageLoad")},logUserLoginDetailsInSentry:function(a){var b=YatraQBPaymentUI.getSSOToken();if(b!=undefined&&b!=null){YatraPaymentUI.recordEventInSentry("User logged in","info",a)}else{YatraPaymentUI.recordEventInSentry("User not logged in","info",a)}},showAddressDivForProductRoutedOnInternationalGateway:function(b){if(b==true){var c="#cc_pmt_addressId";var a="#dc_pmt_addressId";$(c).show();$(a).show()}},contentSwitcher:function(a){var a={contentClass:".cpmt_Paytabbox > .content",navigationId:"#cpmt_tabContainer",wapDropDown:"#other_payop"};$(a.navigationId).find("a").click(function(f){if(ShoppingCart.getTotalCartAmount()==0&&YatraPayment.getPayOp()=="gv"&&!Number(ShoppingCart.tcsAmount)){return false}f.preventDefault();setTimeout(function(){$(".card-logos").removeClass("VISA");$(".card-logos").removeClass("MASTER");$(".card-logos").removeClass("DINERS");$(".card-logos").removeClass("AMEX");$(".card-logos").removeClass("RUPAY");$(".card-logos").removeClass("MAEST")},10);var d=$(this).attr("paymentOption");$("#passThroughMessage_id").hide();if(typeof d=="undefined"){d=$("#cpmt_otherPayOp ul li:first a").attr("paymentoption")}YatraPaymentUI.pushGAInfo($(this).text());var b="#tab_"+d;$(a.navigationId).find("li").removeClass("active").addClass("dactive");$(this).parent("li").addClass("active").removeClass("dactive");$(a.contentClass).hide().removeClass("show");$("#tab_"+d).show().addClass("show");$("#other_payop").val(d);YatraPaymentUI.callOnCardEntry("RESET","","");YatraPaymentUI.enablePayNow(d);IE_Placeholder.init();YatraPaymentUI.clearPaymentDetails(b);var c=YatraPaymentUI.isProductRoutedOnInternationalGateway();YatraPaymentUI.showAddressDivForProductRoutedOnInternationalGateway(c);YatraPaymentUI.clearValidationError();PaymentMode.checkPaymentModes();if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){YatraPaymentUI.callForRecalculatingTcs();if(GV.totalGVAmount()>0){ShoppingCart.totalPayableAmount=GV.balanceAmountAfterGV;$("#fareBreakup-Payable").html(GV.balanceAmountAfterGV+GV.totalGVAmount()-ShoppingCart.tcsAmount);$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(GV.balanceAmountAfterGV));$("#totalAmountSpann").html(YatraHelper.formatPrice(GV.balanceAmountAfterGV));YatraEWalletPaymentUI.setEWalletUI()}}YatraPaymentUI.notifyPayopToLOB();LOBNotification.paymentOptionChange();YatraPaymentUI.changePayNowButtonLabel(detailsJson.product);YatraPaymentUI.isNoCostEmiFlag=false;if(d!="rewards"){$("#reward-point-tooltip").hide()}else{$("#reward-point-tooltip").show()}if(d=="gv"&&!GV.gv){GV.initialise(5)}if(d=="gv"){GV.addedGVFirst9="";GV.addedGVFirst6="";GV.clearErrors();$("#gvPinBlock").hide();$("#gv-promo-error").hide();$("#addGVDiv").show();if(ShoppingCart.totalPayableAmount==0){$("#"+getContinueButtonId()).show()}else{$("#"+getContinueButtonId()).hide()}if(GV.gv.length){$("#payNow").css("margin-top","30px");$(".gv-bal-amount").show()}else{$("#payNow").css("margin-top","0px");$(".gv-bal-amount").hide()}}else{$("#"+getContinueButtonId()).show()}if(d=="paypal"){if($("input[name=paypal]:checked","#paypalContainer").attr("id")!="INR"){$("#convertedAmountPaypal, #mobile-conv").css("visibility","visible");$("#showConverstion").css("visibility","visible")}if(!$("input[name=paypal]","#paypalContainer").is(":checked")){$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}}else{$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}if(d=="cc"){if($("#tab_ccQB .qbLogin").length){$("label[for=cc_newCard_id]").show()}if($("#cc_newCard_id").prop("checked")){$("#cc_newCard_id").trigger("click")}else{$("#cc_quickOrCard").trigger("click")}}if(d=="dc"){if($("#tab_dcQB .qbLogin").length){$("label[for=dc_newCard_id]").show()}if($("#dc_newCard_id").prop("checked")){$("#dc_newCard_id").trigger("click")}else{$("#dc_quickOrCard").trigger("click")}}if(d=="emi"){if($("#emiBank_select").val()=="bajaj"){$("#emiExpMonth").hide();$("#emiExpYear").hide();$("#emiCvv").hide()}else{$("#emiExpMonth").show();$("#emiExpYear").show();$("#emiCvv").show()}if(disableEMICondition[$("#emiBank_select").val()]&&!(disableEMICondition[$("#emiBank_select").val()][3].min<=ShoppingCart.getTotalCartAmount()&&disableEMICondition[$("#emiBank_select").val()][12].max>ShoppingCart.getTotalCartAmount())){YatraPaymentUI.disableEMI($("#emiBank_select").val(),disableEMICondition[$("#emiBank_select").val()][12].max<=ShoppingCart.getTotalCartAmount()?true:false)}else{YatraPaymentUI.enableEMI($("#emiBank_select").val());let cAmt=ShoppingCart.getTotalCartAmount();let selEmiOpt=$("#emiBank_select").val();if(cAmt&&selEmiOpt){YatraPaymentUI.disableEmiDetails(cAmt,selEmiOpt)}}}if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){YatraPaymentUI.callForRecalculatingTcs()}});$(a.wapDropDown).on("change",function(f){f.preventDefault();var d=$(this).val();if(typeof d=="undefined"){d=$("#cpmt_otherPayOp ul li:first a").attr("paymentoption")}if(d=="gv"&&!GV.gv){console.log("Init for mob");GV.initialise(5)}YatraPaymentUI.pushGAInfo($(this).text());var b="#tab_"+d;$(a.navigationId).find("li").removeClass("active").addClass("dactive");var c=$(a.navigationId).find("#"+d);$(c).parent("li").addClass("active").removeClass("dactive");$(a.contentClass).hide().removeClass("show");$("#tab_"+d).show().addClass("show");YatraPaymentUI.callOnCardEntry("RESET","","");YatraPaymentUI.enablePayNow(d);IE_Placeholder.init();YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();YatraPaymentUI.notifyPayopToLOB();PaymentMode.checkPaymentModes();LOBNotification.paymentOptionChange();if(d!="rewards"){$("#reward-point-tooltip").hide()}else{$("#reward-point-tooltip").show()}if(d=="paypal"){if($("input[name=paypal]:checked","#paypalContainer").attr("id")!="INR"){$("#convertedAmountPaypal, #mobile-conv").css("visibility","visible");$("#showConverstion").css("visibility","visible")}if(!$("input[name=paypal]","#paypalContainer").is(":checked")){$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}}else{$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}})},getPaymentOption:function(){var a=$("#cpmt_tabmenu > li.active > a").attr("paymentOption");if(a==undefined){a=$("#cpmt_tabmenu > li> ul> li.active > a").attr("paymentOption")}return a},notifyPayopToLOB:function(){var a=YatraPayment.getPayOp();if(a!=undefined){processPayOp(a)}},checkNaN:function(b){var a=$(b).val();$(b).val($(b).val().replace(/\D/g,""))},disableSpace:function(a){$(a).val($(a).val().replace(/\s/g,""))},getCardType:function(a){var b=(a+"").replace(/\s/g,"");if((/^(4)/).test(b)&&(b.length==13||b.length==16)){return"VISA"}else{if((/^(51|52|53|54|55|222)/).test(b)&&b.length==16){return"MASTER"}else{if((/^(34|37)/).test(b)&&b.length==15){return"AMEX"}else{if((/^(508[5-9][0-9]{12})|(6069[8-9][0-9]{11})|(607[0-8][0-9]{12})|(6079[0-8][0-9]{11})|(608[0-5][0-9]{12})|(6521[5-9][0-9]{11})|(652[2-9][0-9]{12})|(6530[0-9]{12})|(6531[0-4][0-9]{11})|(10101[0-9]{10})|(10000[1-8][0-9]{10})|(100011[0-9]{10})|(111111[0-9]{10})|(123456[0-9]{10})|(212112[0-9]{10})|(222222[0-9]{10})|(222444[0-9]{10})|(232325[0-9]{10})|(236253[0-9]{10})|(244335[0-9]{10})|(271189[0-9]{10})|(322222[0-9]{10})|(3528[0-9][0-9][0-9]{10})|(353[0-2][0-9][0-9][0-9]{10})|(35330[0-2][0-9]{10})|(353304[0-9]{10})|(353399[0-9]{10})|(354[0-3][0-9][0-9][0-9]{10})|(354999[0-9]{10})|(355[0-3][0-9][0-9][0-9]{10})|(356003[0-9]{10})|(356006[0-9]{10})|(35601[1-2][0-9]{10})|(35602[0-5][0-9]{10})|(356027[0-9]{10})|(35603[1-3][0-9]{10})|(356036[0-9]{10})|(356039[0-9]{10})|(35605[1-3][0-9]{10})|(35605[5-6][0-9]{10})|(35605[8-9][0-9]{10})|(35606[1-4][0-9]{10})|(35606[7-8][0-9]{10})|(35607[0-1][0-9]{10})|(356074[0-9]{10})|(356076[0-9]{10})|(35607[8-9][0-9]{10})|(356080[0-9]{10})|(35608[3-5][0-9]{10})|(35608[7-9][0-9]{10})|(35609[0-1][0-9]{10})|(35609[6-7][0-9]{10})|(356099[0-9]{10})|(35620[1-2][0-9]{10})|(35620[8-9][0-9]{10})|(35621[0-1][0-9]{10})|(35623[2-4][0-9]{10})|(356239[0-9]{10})|(35624[0-3][0-9]{10})|(356270[0-9]{10})|(356272[0-9]{10})|(35627[7-9][0-9]{10})|(35628[3-6][0-9]{10})|(356288[0-9]{10})|(35629[0-4][0-9]{10})|(35629[7-9][0-9]{10})|(356303[0-9]{10})|(356306[0-9]{10})|(35631[1-2][0-9]{10})|(35631[6-7][0-9]{10})|(35632[0-5][0-9]{10})|(356327[0-9]{10})|(35633[1-3][0-9]{10})|(356336[0-9]{10})|(356339[0-9]{10})|(356342[0-9]{10})|(35635[0-3][0-9]{10})|(35635[5-6][0-9]{10})|(356359[0-9]{10})|(356361[0-9]{10})|(356363[0-9]{10})|(356365[0-9]{10})|(35636[7-8][0-9]{10})|(35637[0-1][0-9]{10})|(356374[0-9]{10})|(356376[0-9]{10})|(35637[8-9][0-9]{10})|(356380[0-9]{10})|(35638[3-5][0-9]{10})|(35638[8-9][0-9]{10})|(35639[0-5][0-9]{10})|(35639[7-8][0-9]{10})|(35640[2-4][0-9]{10})|(35640[6-7][0-9]{10})|(35641[3-9][0-9]{10})|(356433[0-9]{10})|(356435[0-9]{10})|(356450[0-9]{10})|(356452[0-9]{10})|(35645[4-8][0-9]{10})|(35646[1-8][0-9]{10})|(356474[0-9]{10})|(35647[8-9][0-9]{10})|(35648[0-1][0-9]{10})|(35648[4-5][0-9]{10})|(35649[6-8][0-9]{10})|(35650[3-4][0-9]{10})|(35650[6-9][0-9]{10})|(35651[0-3][0-9]{10})|(35651[6-7][0-9]{10})|(35652[0-1][0-9]{10})|(35652[3-5][0-9]{10})|(356527[0-9]{10})|(35653[1-3][0-9]{10})|(35653[5-6][0-9]{10})|(356539[0-9]{10})|(356540[0-9]{10})|(35654[3-5][0-9]{10})|(35655[1-3][0-9]{10})|(35655[6-9][0-9]{10})|(35656[0-4][0-9]{10})|(35656[7-8][0-9]{10})|(35657[0-1][0-9]{10})|(356580[0-9]{10})|(35658[3-4][0-9]{10})|(35658[8-9][0-9]{10})|(35659[7-9][0-9]{10})|(35660[0-2][0-9]{10})|(35661[0-1][0-9]{10})|(356614[0-9]{10})|(356618[0-9]{10})|(356630[0-9]{10})|(35665[1-2][0-9]{10})|(35665[6-7][0-9]{10})|(356661[0-9]{10})|(356663[0-9]{10})|(356670[0-9]{10})|(35668[0-1][0-9]{10})|(35668[4-5][0-9]{10})|(35668[8-9][0-9]{10})|(35669[0-2][0-9]{10})|(35670[0-4][0-9]{10})|(35670[6-9][0-9]{10})|(35671[2-8][0-9]{10})|(35672[1-2][0-9]{10})|(35672[4-5][0-9]{10})|(356728[0-9]{10})|(35673[0-1][0-9]{10})|(35673[3-8][0-9]{10})|(356743[0-9]{10})|(35675[1-4][0-9]{10})|(356757[0-9]{10})|(356759[0-9]{10})|(35676[3-4][0-9]{10})|(35677[0-1][0-9]{10})|(356777[0-9]{10})|(356780[0-9]{10})|(35678[5-8][0-9]{10})|(35679[0-5][0-9]{10})|(35680[0-3][0-9]{10})|(35681[2-3][0-9]{10})|(356817[0-9]{10})|(356819[0-9]{10})|(356820[0-9]{10})|(356822[0-9]{10})|(35682[5-9][0-9]{10})|(356830[0-9]{10})|(35683[2-5][0-9]{10})|(35683[7-9][0-9]{10})|(35684[0-1][0-9]{10})|(35684[4-7][0-9]{10})|(35685[0-1][0-9]{10})|(35685[6-9][0-9]{10})|(356862[0-9]{10})|(35686[7-9][0-9]{10})|(356870[0-9]{10})|(356872[0-9]{10})|(356876[0-9]{10})|(35687[8-9][0-9]{10})|(35688[0-3][0-9]{10})|(356886[0-9]{10})|(356889[0-9]{10})|(356890[0-9]{10})|(35689[5-7][0-9]{10})|(356899[0-9]{10})|(35690[0-2][0-9]{10})|(35690[4-8][0-9]{10})|(35691[0-2][0-9]{10})|(35691[4-6][0-9]{10})|(356920[0-9]{10})|(35696[3-4][0-9]{10})|(356966[0-9]{10})|(356969[0-9]{10})|(35697[0-1][0-9]{10})|(35697[8-9][0-9]{10})|(356989[0-9]{10})|(356999[0-9]{10})|(357105[0-9]{10})|(35710[8-9][0-9]{10})|(357110[0-9]{10})|(357239[0-9]{10})|(357266[0-9]{10})|(357300[0-9]{10})|(357325[0-9]{10})|(35736[1-9][0-9]{10})|(35737[0-9][0-9]{10})|(357391[0-9]{10})|(35740[0-3][0-9]{10})|(35742[0-9][0-9]{10})|(35743[0-7][0-9]{10})|(357499[0-9]{10})|(35770[0-6][0-9]{10})|(35770[8-9][0-9]{10})|(357710[0-9]{10})|(357712[0-9]{10})|(35771[4-8][0-9]{10})|(35772[0-1][0-9]{10})|(35777[6-9][0-9]{10})|(357799[0-9]{10})|(358[0-1][0-9][0-9][0-9]{10})|(3582[0-1][0-9][0-9]{10})|(358228[0-9]{10})|(3582[3-9][0-9][0-9]{10})|(3583[0-9][0-9][0-9]{10})|(35840[0-1][0-9]{10})|(358403[0-9]{10})|(35841[0-9][0-9]{10})|(3584[3-5][0-9][0-9]{10})|(3584[7-9][0-9][0-9]{10})|(3585[0-9][0-9][0-9]{10})|(358600[0-9]{10})|(358619[0-9]{10})|(35862[0-4][0-9]{10})|(35863[0-9][0-9]{10})|(358640[0-9]{10})|(35868[1-9][0-9]{10})|(35870[1-6][0-9]{10})|(358708[0-9]{10})|(35871[0-9][0-9]{10})|(358731[0-9]{10})|(358738[0-9]{10})|(35874[0-7][0-9]{10})|(35875[0-9][0-9]{10})|(35876[0-1][0-9]{10})|(35878[0-4][0-9]{10})|(358787[0-9]{10})|(35879[0-1][0-9]{10})|(35879[3-4][0-9]{10})|(358796[0-9]{10})|(358818[0-9]{10})|(35882[1-4][0-9]{10})|(358831[0-9]{10})|(358838[0-9]{10})|(35884[2-3][0-9]{10})|(358845[0-9]{10})|(358847[0-9]{10})|(358849[0-9]{10})|(358851[0-9]{10})|(358860[0-9]{10})|(35886[2-4][0-9]{10})|(35886[7-9][0-9]{10})|(358870[0-9]{10})|(35887[2-5][0-9]{10})|(35887[7-9][0-9]{10})|(35888[0-5][0-9]{10})|(358888[0-9]{10})|(358890[0-9]{10})|(36000[1-9][0-9]{10})|(36001[0-9][0-9]{10})|(36002[1-9][0-9]{10})|(3600[3-9][0-9][0-9]{10})|(3601[0-7][0-9][0-9]{10})|(36018[0-1][0-9]{10})|(36018[6-7][0-9]{10})|(36019[3-9][0-9]{10})|(360[2-4][0-9][0-9][0-9]{10})|(3605[0-4][0-9][0-9]{10})|(36055[0-2][0-9]{10})|(36070[8-9][0-9]{10})|(3607[1-5][0-9][0-9]{10})|(36076[0-4][0-9]{10})|(360769[0-9]{10})|(3607[7-9][0-9][0-9]{10})|(3608[0-9][0-9][0-9]{10})|(3609[0-1][0-9][0-9]{10})|(36092[0-2][0-9]{10})|(36093[5-9][0-9]{10})|(3609[4-5][0-9][0-9]{10})|(36096[0-6][0-9]{10})|(3609[7-9][0-9][0-9]{10})|(36100[0-9][0-9]{10})|(36101[0-2][0-9]{10})|(361063[0-9]{10})|(36111[5-6][0-9]{10})|(361119[0-9]{10})|(361120[0-9]{10})|(36121[8-9][0-9]{10})|(36122[0-9][0-9]{10})|(36123[0-3][0-9]{10})|(36123[5-9][0-9]{10})|(3612[4-5][0-9][0-9]{10})|(36126[1-9][0-9]{10})|(36127[0-3][0-9]{10})|(36129[5-8][0-9]{10})|(3613[0-3][0-9][0-9]{10})|(36134[0-6][0-9]{10})|(361349[0-9]{10})|(3613[5-9][0-9][0-9]{10})|(3614[0-7][0-9][0-9]{10})|(361480[0-9]{10})|(36148[2-9][0-9]{10})|(36149[0-9][0-9]{10})|(36150[0-9][0-9]{10})|(36151[0-3][0-9]{10})|(361558[0-9]{10})|(3616[5-7][0-9][0-9]{10})|(361680[0-9]{10})|(36168[2-9][0-9]{10})|(36169[0-8][0-9]{10})|(36170[8-9][0-9]{10})|(3617[1-4][0-9][0-9]{10})|(36175[0-6][0-9]{10})|(36176[0-7][0-9]{10})|(3617[7-9][0-9][0-9]{10})|(36180[1-9][0-9]{10})|(3618[1-3][0-9][0-9]{10})|(361840[0-9]{10})|(36184[2-9][0-9]{10})|(3618[5-8][0-9][0-9]{10})|(361890[0-9]{10})|(36199[1-9][0-9]{10})|(3620[0-3][0-9][0-9]{10})|(36204[0-4][0-9]{10})|(36204[6-9][0-9]{10})|(36205[0-3][0-9]{10})|(36205[6-9][0-9]{10})|(36206[0-3][0-9]{10})|(36206[5-9][0-9]{10})|(3620[7-9][0-9][0-9]{10})|(3621[0-3][0-9][0-9]{10})|(36214[0-2][0-9]{10})|(36219[1-6][0-9]{10})|(3622[0-9][0-9][0-9]{10})|(3623[0-7][0-9][0-9]{10})|(36238[0-5][0-9]{10})|(36239[2-9][0-9]{10})|(3624[0-2][0-9][0-9]{10})|(36243[0-3][0-9]{10})|(3625[0-5][0-9][0-9]{10})|(362560[0-9]{10})|(36256[3-4][0-9]{10})|(36260[0-1][0-9]{10})|(36260[6-7][0-9]{10})|(36261[1-9][0-9]{10})|(36262[0-9][0-9]{10})|(36263[0-6][0-9]{10})|(362800[0-9]{10})|(363085[0-9]{10})|(363299[0-9]{10})|(3633[0-3][0-9][0-9]{10})|(36334[0-2][0-9]{10})|(36334[5-9][0-9]{10})|(36335[0-2][0-9]{10})|(363402[0-9]{10})|(36341[1-6][0-9]{10})|(363418[0-9]{10})|(363421[0-9]{10})|(363423[0-9]{10})|(36342[5-7][0-9]{10})|(363429[0-9]{10})|(363430[0-9]{10})|(36343[2-7][0-9]{10})|(363439[0-9]{10})|(363440[0-9]{10})|(36344[4-5][0-9]{10})|(363448[0-9]{10})|(36345[1-5][0-9]{10})|(36346[7-8][0-9]{10})|(363470[0-9]{10})|(363474[0-9]{10})|(36347[6-8][0-9]{10})|(36348[0-1][0-9]{10})|(36348[4-5][0-9]{10})|(36349[0-4][0-9]{10})|(363518[0-9]{10})|(363520[0-9]{10})|(363527[0-9]{10})|(36353[7-9][0-9]{10})|(36354[0-6][0-9]{10})|(363549[0-9]{10})|(363550[0-9]{10})|(363571[0-9]{10})|(36372[2-7][0-9]{10})|(363999[0-9]{10})|(3640[0-8][0-9][0-9]{10})|(36409[0-1][0-9]{10})|(36409[3-9][0-9]{10})|(364[1-3][0-9][0-9][0-9]{10})|(3644[0-2][0-9][0-9]{10})|(36443[0-6][0-9]{10})|(36444[1-9][0-9]{10})|(3644[5-7][0-9][0-9]{10})|(364480[0-9]{10})|(36448[2-9][0-9]{10})|(36449[0-9][0-9]{10})|(3645[0-9][0-9][0-9]{10})|(36460[0-9][0-9]{10})|(364610[0-9]{10})|(36461[2-9][0-9]{10})|(3646[2-9][0-9][0-9]{10})|(3647[0-9][0-9][0-9]{10})|(3648[0-2][0-9][0-9]{10})|(364830[0-9]{10})|(36483[3-9][0-9]{10})|(3648[4-6][0-9][0-9]{10})|(36487[0-8][0-9]{10})|(36488[0-8][0-9]{10})|(36490[0-5][0-9]{10})|(36491[0-3][0-9]{10})|(36494[0-2][0-9]{10})|(3650[0-1][0-9][0-9]{10})|(36502[0-3][0-9]{10})|(36502[5-9][0-9]{10})|(3650[3-4][0-9][0-9]{10})|(36510[6-9][0-9]{10})|(3651[1-9][0-9][0-9]{10})|(36520[0-7][0-9]{10})|(365209[0-9]{10})|(36521[0-1][0-9]{10})|(36521[4-5][0-9]{10})|(36521[7-9][0-9]{10})|(3652[2-4][0-9][0-9]{10})|(36525[0-6][0-9]{10})|(36529[8-9][0-9]{10})|(3653[0-8][0-9][0-9]{10})|(36539[0-4][0-9]{10})|(3654[0-6][0-9][0-9]{10})|(36547[0-5][0-9]{10})|(36547[7-9][0-9]{10})|(36548[0-8][0-9]{10})|(36549[4-9][0-9]{10})|(3655[0-3][0-9][0-9]{10})|(36554[0-7][0-9]{10})|(3655[6-7][0-9][0-9]{10})|(36558[0-6][0-9]{10})|(36558[8-9][0-9]{10})|(36559[0-9][0-9]{10})|(36560[0-3][0-9]{10})|(36560[5-9][0-9]{10})|(3656[1-3][0-9][0-9]{10})|(36564[0-3][0-9]{10})|(36564[5-9][0-9]{10})|(3656[5-6][0-9][0-9]{10})|(36567[0-3][0-9]{10})|(36570[0-2][0-9]{10})|(36577[0-3][0-9]{10})|(366[0-9][0-9][0-9][0-9]{10})|(36700[0-2][0-9]{10})|(36701[1-9][0-9]{10})|(3670[2-5][0-9][0-9]{10})|(36706[0-7][0-9]{10})|(367069[0-9]{10})|(36707[1-9][0-9]{10})|(36708[0-9][0-9]{10})|(36709[0-2][0-9]{10})|(36710[5-9][0-9]{10})|(36711[8-9][0-9]{10})|(36712[0-3][0-9]{10})|(36712[6-7][0-9]{10})|(368357[0-9]{10})|(368601[0-9]{10})|(369[0-1][0-9][0-9][0-9]{10})|(36920[0-6][0-9]{10})|(36921[0-5][0-9]{10})|(369[4-5][0-9][0-9][0-9]{10})|(36960[0-5][0-9]{10})|(36960[7-9][0-9]{10})|(36961[0-9][0-9]{10})|(369620[0-9]{10})|(369989[0-9]{10})|(508227[0-9]{10})|(50850[5-6][0-9]{10})|(508509[0-9]{10})|(508510[0-9]{10})|(50851[5-6][0-9]{10})|(508519[0-9]{10})|(50852[1-8][0-9]{10})|(508530[0-9]{10})|(508539[0-9]{10})|(50854[3-4][0-9]{10})|(508549[0-9]{10})|(508551[0-9]{10})|(508553[0-9]{10})|(508555[0-9]{10})|(50855[7-9][0-9]{10})|(508563[0-9]{10})|(50856[6-7][0-9]{10})|(508570[0-9]{10})|(50857[3-4][0-9]{10})|(508579[0-9]{10})|(508582[0-9]{10})|(50858[8-9][0-9]{10})|(50859[0-1][0-9]{10})|(508593[0-9]{10})|(508596[0-9]{10})|(50860[0-1][0-9]{10})|(508603[0-9]{10})|(508607[0-9]{10})|(50861[0-1][0-9]{10})|(508614[0-9]{10})|(508616[0-9]{10})|(508619[0-9]{10})|(508622[0-9]{10})|(508625[0-9]{10})|(508627[0-9]{10})|(508629[0-9]{10})|(508632[0-9]{10})|(50863[4-6][0-9]{10})|(508639[0-9]{10})|(50864[0-3][0-9]{10})|(50864[5-9][0-9]{10})|(50865[0-9][0-9]{10})|(50866[0-1][0-9]{10})|(50866[3-5][0-9]{10})|(508667[0-9]{10})|(508669[0-9]{10})|(50867[0-9][0-9]{10})|(50868[0-7][0-9]{10})|(508689[0-9]{10})|(50869[0-1][0-9]{10})|(50869[3-9][0-9]{10})|(50870[0-1][0-9]{10})|(50870[3-4][0-9]{10})|(50870[6-9][0-9]{10})|(50871[0-3][0-9]{10})|(50871[5-9][0-9]{10})|(5087[2-5][0-9][0-9]{10})|(50876[0-1][0-9]{10})|(50876[3-8][0-9]{10})|(50877[1-9][0-9]{10})|(50878[0-4][0-9]{10})|(508786[0-9]{10})|(50878[8-9][0-9]{10})|(50879[0-5][0-9]{10})|(50879[7-8][0-9]{10})|(50880[0-1][0-9]{10})|(50880[3-9][0-9]{10})|(50881[0-9][0-9]{10})|(50882[0-5][0-9]{10})|(50882[7-9][0-9]{10})|(50883[0-6][0-9]{10})|(508838[0-9]{10})|(50884[0-3][0-9]{10})|(50884[6-9][0-9]{10})|(508850[0-9]{10})|(50885[2-3][0-9]{10})|(50885[5-7][0-9]{10})|(50886[0-1][0-9]{10})|(50886[4-9][0-9]{10})|(50887[0-6][0-9]{10})|(508880[0-9]{10})|(508882[0-9]{10})|(50888[4-5][0-9]{10})|(50888[7-9][0-9]{10})|(50889[0-1][0-9]{10})|(508894[0-9]{10})|(50889[7-9][0-9]{10})|(50890[1-8][0-9]{10})|(50891[2-4][0-9]{10})|(50891[6-8][0-9]{10})|(5089[2-3][0-9][0-9]{10})|(50894[0-2][0-9]{10})|(50894[4-9][0-9]{10})|(50895[1-9][0-9]{10})|(50896[1-9][0-9]{10})|(508971[0-9]{10})|(50897[3-8][0-9]{10})|(50898[0-1][0-9]{10})|(50898[3-4][0-9]{10})|(50898[7-9][0-9]{10})|(50899[0-9][0-9]{10})|(546584[0-9]{10})|(586956[0-9]{10})|(60110[0-9][0-9]{10})|(6011[2-4][0-9][0-9]{10})|(601174[0-9]{10})|(60117[7-9][0-9]{10})|(60118[6-9][0-9]{10})|(60119[0-9][0-9]{10})|(601382[0-9]{10})|(601428[0-9]{10})|(602907[0-9]{10})|(602969[0-9]{10})|(603265[0-9]{10})|(603367[0-9]{10})|(603601[0-9]{10})|(603694[0-9]{10})|(603708[0-9]{10})|(606985[0-9]{10})|(60698[7-9][0-9]{10})|(60699[0-6][0-9]{10})|(60699[8-9][0-9]{10})|(60700[0-7][0-9]{10})|(607009[0-9]{10})|(60701[0-4][0-9]{10})|(607016[0-9]{10})|(60701[8-9][0-9]{10})|(6070[2-7][0-9][0-9]{10})|(607080[0-9]{10})|(60708[4-5][0-9]{10})|(60708[7-9][0-9]{10})|(60709[0-1][0-9]{10})|(60709[3-4][0-9]{10})|(607096[0-9]{10})|(60709[8-9][0-9]{10})|(60710[0-3][0-9]{10})|(60710[5-9][0-9]{10})|(60711[1-5][0-9]{10})|(607117[0-9]{10})|(607119[0-9]{10})|(6071[2-3][0-9][0-9]{10})|(60714[0-1][0-9]{10})|(60714[3-9][0-9]{10})|(60715[0-1][0-9]{10})|(60715[4-9][0-9]{10})|(60716[0-5][0-9]{10})|(607168[0-9]{10})|(6071[7-9][0-9][0-9]{10})|(6072[0-1][0-9][0-9]{10})|(60722[0-1][0-9]{10})|(60722[3-7][0-9]{10})|(607229[0-9]{10})|(60723[0-5][0-9]{10})|(60723[7-8][0-9]{10})|(60724[0-3][0-9]{10})|(60724[6-9][0-9]{10})|(60725[0-1][0-9]{10})|(60725[3-9][0-9]{10})|(60726[0-6][0-9]{10})|(60726[8-9][0-9]{10})|(60727[0-9][0-9]{10})|(60728[0-7][0-9]{10})|(607289[0-9]{10})|(60729[0-6][0-9]{10})|(60729[8-9][0-9]{10})|(60730[0-5][0-9]{10})|(60730[7-9][0-9]{10})|(60731[0-9][0-9]{10})|(60732[0-4][0-9]{10})|(60732[6-9][0-9]{10})|(60733[1-2][0-9]{10})|(60733[4-6][0-9]{10})|(607338[0-9]{10})|(607340[0-9]{10})|(60734[3-9][0-9]{10})|(607350[0-9]{10})|(607352[0-9]{10})|(607354[0-9]{10})|(607356[0-9]{10})|(60735[8-9][0-9]{10})|(60736[1-9][0-9]{10})|(60737[0-9][0-9]{10})|(607380[0-9]{10})|(607382[0-9]{10})|(60738[5-6][0-9]{10})|(60738[8-9][0-9]{10})|(60739[2-3][0-9]{10})|(60739[6-7][0-9]{10})|(60740[1-9][0-9]{10})|(60741[0-3][0-9]{10})|(60741[5-9][0-9]{10})|(60742[1-3][0-9]{10})|(60742[5-9][0-9]{10})|(60743[0-9][0-9]{10})|(607440[0-9]{10})|(60744[2-3][0-9]{10})|(60744[5-9][0-9]{10})|(60745[0-9][0-9]{10})|(60746[1-9][0-9]{10})|(60747[0-4][0-9]{10})|(60747[6-9][0-9]{10})|(607480[0-9]{10})|(607484[0-9]{10})|(60748[7-9][0-9]{10})|(60749[0-9][0-9]{10})|(60750[0-9][0-9]{10})|(60751[0-6][0-9]{10})|(60751[8-9][0-9]{10})|(6075[2-3][0-9][0-9]{10})|(60754[0-4][0-9]{10})|(607546[0-9]{10})|(60754[8-9][0-9]{10})|(6075[5-6][0-9][0-9]{10})|(607570[0-9]{10})|(607573[0-9]{10})|(60757[5-6][0-9]{10})|(60758[0-1][0-9]{10})|(60758[4-5][0-9]{10})|(60758[7-9][0-9]{10})|(607590[0-9]{10})|(60759[2-5][0-9]{10})|(607597[0-9]{10})|(60760[0-2][0-9]{10})|(607604[0-9]{10})|(60760[6-8][0-9]{10})|(60761[0-3][0-9]{10})|(607615[0-9]{10})|(607618[0-9]{10})|(607620[0-9]{10})|(60762[2-4][0-9]{10})|(60762[6-9][0-9]{10})|(60763[1-2][0-9]{10})|(607634[0-9]{10})|(60763[6-9][0-9]{10})|(60764[0-3][0-9]{10})|(607645[0-9]{10})|(60764[7-9][0-9]{10})|(607650[0-9]{10})|(607652[0-9]{10})|(607654[0-9]{10})|(607656[0-9]{10})|(60765[8-9][0-9]{10})|(60766[0-4][0-9]{10})|(60766[6-9][0-9]{10})|(60767[0-3][0-9]{10})|(60767[6-9][0-9]{10})|(60768[0-2][0-9]{10})|(60768[4-5][0-9]{10})|(60768[8-9][0-9]{10})|(60769[0-1][0-9]{10})|(60769[3-4][0-9]{10})|(607696[0-9]{10})|(607699[0-9]{10})|(607702[0-9]{10})|(607704[0-9]{10})|(60770[6-9][0-9]{10})|(6077[1-2][0-9][0-9]{10})|(60773[0-1][0-9]{10})|(60773[3-6][0-9]{10})|(60773[8-9][0-9]{10})|(60774[0-3][0-9]{10})|(60774[5-9][0-9]{10})|(60775[0-8][0-9]{10})|(60776[1-5][0-9]{10})|(607767[0-9]{10})|(60777[0-3][0-9]{10})|(60777[5-9][0-9]{10})|(60778[0-4][0-9]{10})|(60778[6-8][0-9]{10})|(60779[1-2][0-9]{10})|(60779[4-9][0-9]{10})|(60780[0-9][0-9]{10})|(60781[0-2][0-9]{10})|(607814[0-9]{10})|(60781[6-9][0-9]{10})|(60782[0-1][0-9]{10})|(60782[3-9][0-9]{10})|(6078[3-4][0-9][0-9]{10})|(60785[0-1][0-9]{10})|(60785[3-9][0-9]{10})|(607860[0-9]{10})|(60786[2-6][0-9]{10})|(60786[8-9][0-9]{10})|(60787[0-9][0-9]{10})|(60788[0-3][0-9]{10})|(60788[5-7][0-9]{10})|(607889[0-9]{10})|(60789[0-2][0-9]{10})|(607894[0-9]{10})|(607896[0-9]{10})|(60789[8-9][0-9]{10})|(60790[0-7][0-9]{10})|(607909[0-9]{10})|(60791[0-1][0-9]{10})|(607918[0-9]{10})|(60792[0-1][0-9]{10})|(60792[3-9][0-9]{10})|(607930[0-9]{10})|(60793[2-7][0-9]{10})|(607939[0-9]{10})|(60794[0-3][0-9]{10})|(60794[5-6][0-9]{10})|(60794[8-9][0-9]{10})|(60795[0-5][0-9]{10})|(60795[7-9][0-9]{10})|(6079[6-7][0-9][0-9]{10})|(60798[0-2][0-9]{10})|(60800[1-2][0-9]{10})|(60800[5-9][0-9]{10})|(60801[0-4][0-9]{10})|(60801[6-9][0-9]{10})|(60802[0-9][0-9]{10})|(60803[0-4][0-9]{10})|(60803[6-8][0-9]{10})|(60804[1-4][0-9]{10})|(60804[7-8][0-9]{10})|(608051[0-9]{10})|(60805[3-9][0-9]{10})|(60806[0-6][0-9]{10})|(60806[8-9][0-9]{10})|(60807[0-1][0-9]{10})|(60807[3-7][0-9]{10})|(608079[0-9]{10})|(6080[8-9][0-9][0-9]{10})|(60810[0-2][0-9]{10})|(60810[5-9][0-9]{10})|(60811[0-1][0-9]{10})|(608113[0-9]{10})|(60811[5-6][0-9]{10})|(60811[8-9][0-9]{10})|(6081[2-3][0-9][0-9]{10})|(60814[1-7][0-9]{10})|(608149[0-9]{10})|(60815[1-9][0-9]{10})|(60816[0-3][0-9]{10})|(60816[5-6][0-9]{10})|(60816[8-9][0-9]{10})|(60817[0-4][0-9]{10})|(60817[6-9][0-9]{10})|(60818[0-9][0-9]{10})|(60819[1-8][0-9]{10})|(608201[0-9]{10})|(60822[6-9][0-9]{10})|(60823[0-9][0-9]{10})|(60824[0-3][0-9]{10})|(608245[0-9]{10})|(60824[7-9][0-9]{10})|(608250[0-9]{10})|(60825[6-8][0-9]{10})|(60826[0-3][0-9]{10})|(60826[6-7][0-9]{10})|(608269[0-9]{10})|(60827[1-2][0-9]{10})|(608274[0-9]{10})|(608279[0-9]{10})|(60828[3-7][0-9]{10})|(608289[0-9]{10})|(60829[1-4][0-9]{10})|(60829[6-7][0-9]{10})|(608299[0-9]{10})|(608305[0-9]{10})|(608311[0-9]{10})|(60831[5-6][0-9]{10})|(608320[0-9]{10})|(608323[0-9]{10})|(60835[2-3][0-9]{10})|(608356[0-9]{10})|(60837[5-6][0-9]{10})|(608379[0-9]{10})|(6083[8-9][0-9][0-9]{10})|(60840[0-7][0-9]{10})|(608409[0-9]{10})|(60841[0-4][0-9]{10})|(60841[6-9][0-9]{10})|(60842[0-2][0-9]{10})|(60842[4-9][0-9]{10})|(608430[0-9]{10})|(60843[2-4][0-9]{10})|(60843[7-9][0-9]{10})|(60844[1-3][0-9]{10})|(60844[5-6][0-9]{10})|(60844[8-9][0-9]{10})|(608450[0-9]{10})|(60845[6-7][0-9]{10})|(60846[1-3][0-9]{10})|(608469[0-9]{10})|(608475[0-9]{10})|(60847[7-8][0-9]{10})|(620009[0-9]{10})|(62001[0-1][0-9]{10})|(620013[0-9]{10})|(620019[0-9]{10})|(620021[0-9]{10})|(620024[0-9]{10})|(620031[0-9]{10})|(620035[0-9]{10})|(620037[0-9]{10})|(620039[0-9]{10})|(620046[0-9]{10})|(620048[0-9]{10})|(620054[0-9]{10})|(620056[0-9]{10})|(62006[3-4][0-9]{10})|(620072[0-9]{10})|(620079[0-9]{10})|(620086[0-9]{10})|(620088[0-9]{10})|(620091[0-9]{10})|(620094[0-9]{10})|(620103[0-9]{10})|(62010[5-6][0-9]{10})|(620108[0-9]{10})|(620114[0-9]{10})|(620118[0-9]{10})|(620120[0-9]{10})|(62012[3-6][0-9]{10})|(620129[0-9]{10})|(62013[1-2][0-9]{10})|(620136[0-9]{10})|(62014[2-3][0-9]{10})|(620146[0-9]{10})|(62014[8-9][0-9]{10})|(62018[3-7][0-9]{10})|(62020[2-9][0-9]{10})|(62021[0-1][0-9]{10})|(620218[0-9]{10})|(620220[0-9]{10})|(620513[0-9]{10})|(62051[5-8][0-9]{10})|(620522[0-9]{10})|(62052[7-9][0-9]{10})|(62053[0-3][0-9]{10})|(620535[0-9]{10})|(62053[7-8][0-9]{10})|(62055[0-2][0-9]{10})|(620559[0-9]{10})|(620561[0-9]{10})|(620812[0-9]{10})|(62100[3-6][0-9]{10})|(621008[0-9]{10})|(62101[0-5][0-9]{10})|(62101[7-9][0-9]{10})|(62102[0-1][0-9]{10})|(62102[3-6][0-9]{10})|(62102[8-9][0-9]{10})|(62103[0-3][0-9]{10})|(62103[5-9][0-9]{10})|(62104[1-5][0-9]{10})|(621049[0-9]{10})|(621050[0-9]{10})|(62105[2-3][0-9]{10})|(62105[5-9][0-9]{10})|(62106[0-3][0-9]{10})|(62106[5-9][0-9]{10})|(62107[0-8][0-9]{10})|(62108[0-4][0-9]{10})|(621086[0-9]{10})|(62108[8-9][0-9]{10})|(62109[0-2][0-9]{10})|(62109[5-9][0-9]{10})|(62120[0-1][0-9]{10})|(62121[2-3][0-9]{10})|(62121[5-9][0-9]{10})|(62122[0-8][0-9]{10})|(62123[0-5][0-9]{10})|(62123[7-9][0-9]{10})|(62124[0-9][0-9]{10})|(62125[0-2][0-9]{10})|(62125[4-9][0-9]{10})|(621260[0-9]{10})|(62126[3-9][0-9]{10})|(62127[0-9][0-9]{10})|(62128[0-8][0-9]{10})|(62129[0-9][0-9]{10})|(621300[0-9]{10})|(621308[0-9]{10})|(621310[0-9]{10})|(621316[0-9]{10})|(62132[4-8][0-9]{10})|(6213[3-4][0-9][0-9]{10})|(62135[0-6][0-9]{10})|(621359[0-9]{10})|(62136[0-9][0-9]{10})|(62137[1-3][0-9]{10})|(62137[5-9][0-9]{10})|(6213[8-9][0-9][0-9]{10})|(621401[0-9]{10})|(621403[0-9]{10})|(62141[1-9][0-9]{10})|(621420[0-9]{10})|(62142[2-3][0-9]{10})|(621428[0-9]{10})|(62143[3-4][0-9]{10})|(62143[6-9][0-9]{10})|(62144[0-3][0-9]{10})|(62144[5-9][0-9]{10})|(62145[2-3][0-9]{10})|(62145[5-8][0-9]{10})|(62146[0-9][0-9]{10})|(62147[5-6][0-9]{10})|(62148[0-8][0-9]{10})|(62149[0-2][0-9]{10})|(62149[4-9][0-9]{10})|(62151[5-9][0-9]{10})|(62152[0-3][0-9]{10})|(62152[5-9][0-9]{10})|(62153[0-3][0-9]{10})|(62153[6-9][0-9]{10})|(62155[0-2][0-9]{10})|(62155[7-9][0-9]{10})|(62156[0-3][0-9]{10})|(621566[0-9]{10})|(62156[8-9][0-9]{10})|(62157[7-9][0-9]{10})|(621580[0-9]{10})|(621582[0-9]{10})|(621585[0-9]{10})|(62158[8-9][0-9]{10})|(62159[0-2][0-9]{10})|(62159[8-9][0-9]{10})|(62160[0-1][0-9]{10})|(621619[0-9]{10})|(621621[0-9]{10})|(62162[3-8][0-9]{10})|(62163[0-1][0-9]{10})|(621633[0-9]{10})|(62163[5-9][0-9]{10})|(62164[0-2][0-9]{10})|(621645[0-9]{10})|(62164[8-9][0-9]{10})|(62165[0-9][0-9]{10})|(62166[0-6][0-9]{10})|(62166[8-9][0-9]{10})|(62167[0-6][0-9]{10})|(62167[8-9][0-9]{10})|(62168[0-5][0-9]{10})|(62168[7-9][0-9]{10})|(62169[0-7][0-9]{10})|(621699[0-9]{10})|(621700[0-9]{10})|(621719[0-9]{10})|(62172[0-3][0-9]{10})|(62172[5-8][0-9]{10})|(62173[0-3][0-9]{10})|(62173[5-9][0-9]{10})|(62174[0-3][0-9]{10})|(62174[6-9][0-9]{10})|(6217[5-6][0-9][0-9]{10})|(62177[0-3][0-9]{10})|(621775[0-9]{10})|(62177[7-9][0-9]{10})|(6217[8-9][0-9][0-9]{10})|(621977[0-9]{10})|(62212[6-9][0-9]{10})|(62213[0-6][0-9]{10})|(62213[8-9][0-9]{10})|(62214[0-1][0-9]{10})|(62214[3-9][0-9]{10})|(62215[0-9][0-9]{10})|(62216[2-9][0-9]{10})|(62217[0-1][0-9]{10})|(62217[3-4][0-9]{10})|(62217[6-9][0-9]{10})|(622180[0-9]{10})|(62218[2-4][0-9]{10})|(62218[7-9][0-9]{10})|(622200[0-9]{10})|(62220[2-3][0-9]{10})|(622206[0-9]{10})|(622208[0-9]{10})|(62221[0-5][0-9]{10})|(622218[0-9]{10})|(622220[0-9]{10})|(62222[3-5][0-9]{10})|(62222[7-9][0-9]{10})|(62223[0-9][0-9]{10})|(622240[0-9]{10})|(62224[5-6][0-9]{10})|(62225[2-9][0-9]{10})|(62226[0-2][0-9]{10})|(62226[5-9][0-9]{10})|(62227[0-1][0-9]{10})|(622273[0-9]{10})|(62227[5-9][0-9]{10})|(6222[8-9][0-9][0-9]{10})|(62230[0-3][0-9]{10})|(622305[0-9]{10})|(62230[7-9][0-9]{10})|(62231[0-2][0-9]{10})|(62231[5-6][0-9]{10})|(62231[8-9][0-9]{10})|(62232[0-5][0-9]{10})|(62232[8-9][0-9]{10})|(62233[1-3][0-9]{10})|(62233[5-6][0-9]{10})|(62233[8-9][0-9]{10})|(62234[1-3][0-9]{10})|(622345[0-9]{10})|(622348[0-9]{10})|(622351[0-9]{10})|(62235[4-6][0-9]{10})|(62235[8-9][0-9]{10})|(62236[0-3][0-9]{10})|(62236[7-9][0-9]{10})|(622370[0-9]{10})|(62237[2-3][0-9]{10})|(62237[6-9][0-9]{10})|(622380[0-9]{10})|(62238[3-9][0-9]{10})|(62239[1-9][0-9]{10})|(622400[0-9]{10})|(622403[0-9]{10})|(62240[6-7][0-9]{10})|(622409[0-9]{10})|(62241[0-6][0-9]{10})|(62242[0-1][0-9]{10})|(62242[5-9][0-9]{10})|(62243[2-3][0-9]{10})|(62243[5-6][0-9]{10})|(622439[0-9]{10})|(62244[0-5][0-9]{10})|(62244[8-9][0-9]{10})|(62245[0-2][0-9]{10})|(622455[0-9]{10})|(62246[2-3][0-9]{10})|(62246[5-9][0-9]{10})|(622470[0-9]{10})|(62247[5-9][0-9]{10})|(62248[0-6][0-9]{10})|(62248[8-9][0-9]{10})|(62249[1-3][0-9]{10})|(62249[8-9][0-9]{10})|(622506[0-9]{10})|(62250[8-9][0-9]{10})|(62251[0-1][0-9]{10})|(62251[6-9][0-9]{10})|(62252[0-3][0-9]{10})|(62252[5-6][0-9]{10})|(62253[2-3][0-9]{10})|(62253[5-9][0-9]{10})|(62254[7-9][0-9]{10})|(622550[0-9]{10})|(62255[5-9][0-9]{10})|(62256[0-3][0-9]{10})|(62256[5-9][0-9]{10})|(62257[0-3][0-9]{10})|(62257[5-9][0-9]{10})|(62258[0-4][0-9]{10})|(622588[0-9]{10})|(62259[1-3][0-9]{10})|(62259[5-7][0-9]{10})|(622599[0-9]{10})|(62260[0-3][0-9]{10})|(622609[0-9]{10})|(622611[0-9]{10})|(622613[0-9]{10})|(62261[5-9][0-9]{10})|(62262[0-3][0-9]{10})|(62262[5-6][0-9]{10})|(62263[0-3][0-9]{10})|(62263[6-8][0-9]{10})|(622644[0-9]{10})|(622648[0-9]{10})|(62265[0-1][0-9]{10})|(62265[5-9][0-9]{10})|(6226[6-8][0-9][0-9]{10})|(62269[0-3][0-9]{10})|(62269[5-6][0-9]{10})|(622698[0-9]{10})|(622700[0-9]{10})|(62270[7-8][0-9]{10})|(622710[0-9]{10})|(62271[7-8][0-9]{10})|(622722[0-9]{10})|(622740[0-9]{10})|(62275[1-9][0-9]{10})|(62276[0-8][0-9]{10})|(62277[0-2][0-9]{10})|(622775[0-9]{10})|(62277[7-8][0-9]{10})|(622785[0-9]{10})|(62278[8-9][0-9]{10})|(622790[0-9]{10})|(622798[0-9]{10})|(62280[1-2][0-9]{10})|(622806[0-9]{10})|(62280[8-9][0-9]{10})|(62281[0-3][0-9]{10})|(62281[5-8][0-9]{10})|(62282[0-9][0-9]{10})|(622830[0-9]{10})|(62283[5-9][0-9]{10})|(62284[0-1][0-9]{10})|(62284[3-9][0-9]{10})|(62285[1-3][0-9]{10})|(62285[5-9][0-9]{10})|(622860[0-9]{10})|(622862[0-9]{10})|(62286[4-9][0-9]{10})|(622870[0-9]{10})|(622873[0-9]{10})|(62287[5-9][0-9]{10})|(62288[0-6][0-9]{10})|(62288[8-9][0-9]{10})|(62289[0-3][0-9]{10})|(622895[0-9]{10})|(62289[7-9][0-9]{10})|(62290[0-2][0-9]{10})|(622906[0-9]{10})|(62290[8-9][0-9]{10})|(62291[0-3][0-9]{10})|(622916[0-9]{10})|(62291[8-9][0-9]{10})|(62292[0-2][0-9]{10})|(622925[0-9]{10})|(62292[7-8][0-9]{10})|(62293[0-3][0-9]{10})|(62293[5-9][0-9]{10})|(622940[0-9]{10})|(62294[2-3][0-9]{10})|(62294[5-9][0-9]{10})|(62295[0-5][0-9]{10})|(622957[0-9]{10})|(622959[0-9]{10})|(62296[0-3][0-9]{10})|(62296[6-8][0-9]{10})|(62297[1-3][0-9]{10})|(62297[5-9][0-9]{10})|(62298[0-3][0-9]{10})|(622986[0-9]{10})|(62298[8-9][0-9]{10})|(62299[0-9][0-9]{10})|(62300[0-1][0-9]{10})|(62300[3-4][0-9]{10})|(623007[0-9]{10})|(623010[0-9]{10})|(62301[6-9][0-9]{10})|(6230[2-3][0-9][0-9]{10})|(62304[0-5][0-9]{10})|(62304[7-8][0-9]{10})|(62305[0-3][0-9]{10})|(62305[5-9][0-9]{10})|(62306[0-8][0-9]{10})|(6230[7-9][0-9][0-9]{10})|(62310[1-9][0-9]{10})|(62311[0-3][0-9]{10})|(62311[5-9][0-9]{10})|(62312[0-9][0-9]{10})|(62313[0-3][0-9]{10})|(62313[5-9][0-9]{10})|(623140[0-9]{10})|(62314[2-3][0-9]{10})|(62314[5-7][0-9]{10})|(623149[0-9]{10})|(62315[0-3][0-9]{10})|(62315[5-9][0-9]{10})|(6231[6-8][0-9][0-9]{10})|(623190[0-9]{10})|(62319[3-9][0-9]{10})|(62320[0-1][0-9]{10})|(623203[0-9]{10})|(62320[5-9][0-9]{10})|(62321[0-1][0-9]{10})|(623213[0-9]{10})|(623216[0-9]{10})|(62321[8-9][0-9]{10})|(62322[0-1][0-9]{10})|(623229[0-9]{10})|(623250[0-9]{10})|(623255[0-9]{10})|(62325[8-9][0-9]{10})|(62326[1-3][0-9]{10})|(623265[0-9]{10})|(623267[0-9]{10})|(623293[0-9]{10})|(623300[0-9]{10})|(62330[2-4][0-9]{10})|(62330[7-9][0-9]{10})|(62331[0-8][0-9]{10})|(623321[0-9]{10})|(62332[3-8][0-9]{10})|(62333[1-2][0-9]{10})|(623334[0-9]{10})|(62333[6-9][0-9]{10})|(623341[0-9]{10})|(62334[4-9][0-9]{10})|(62335[0-3][0-9]{10})|(623355[0-9]{10})|(62335[7-9][0-9]{10})|(623360[0-9]{10})|(623362[0-9]{10})|(62336[5-9][0-9]{10})|(62337[0-6][0-9]{10})|(623379[0-9]{10})|(62338[0-6][0-9]{10})|(62338[8-9][0-9]{10})|(62339[1-9][0-9]{10})|(623402[0-9]{10})|(62340[4-6][0-9]{10})|(62340[8-9][0-9]{10})|(62341[0-9][0-9]{10})|(62342[0-5][0-9]{10})|(62342[7-9][0-9]{10})|(62343[0-5][0-9]{10})|(62343[8-9][0-9]{10})|(6234[4-5][0-9][0-9]{10})|(62346[0-2][0-9]{10})|(62346[4-7][0-9]{10})|(62347[0-1][0-9]{10})|(62347[6-9][0-9]{10})|(62348[0-1][0-9]{10})|(62348[3-5][0-9]{10})|(62348[7-8][0-9]{10})|(62349[1-3][0-9]{10})|(62349[5-9][0-9]{10})|(62350[1-6][0-9]{10})|(62350[8-9][0-9]{10})|(62351[0-9][0-9]{10})|(62352[1-9][0-9]{10})|(62353[0-3][0-9]{10})|(623535[0-9]{10})|(62353[7-9][0-9]{10})|(62354[0-3][0-9]{10})|(62354[7-9][0-9]{10})|(62355[0-9][0-9]{10})|(62356[0-3][0-9]{10})|(62356[5-9][0-9]{10})|(6235[7-8][0-9][0-9]{10})|(623590[0-9]{10})|(62359[2-9][0-9]{10})|(62360[0-1][0-9]{10})|(62360[3-4][0-9]{10})|(62360[6-9][0-9]{10})|(62361[0-1][0-9]{10})|(623613[0-9]{10})|(62361[5-9][0-9]{10})|(62362[1-8][0-9]{10})|(62363[0-5][0-9]{10})|(623637[0-9]{10})|(623639[0-9]{10})|(62364[0-4][0-9]{10})|(62364[6-8][0-9]{10})|(62365[0-9][0-9]{10})|(62366[0-5][0-9]{10})|(62366[7-9][0-9]{10})|(623670[0-9]{10})|(62367[2-9][0-9]{10})|(623680[0-9]{10})|(623683[0-9]{10})|(62368[6-8][0-9]{10})|(623694[0-9]{10})|(62369[8-9][0-9]{10})|(624300[0-9]{10})|(62430[2-3][0-9]{10})|(62430[5-6][0-9]{10})|(62430[8-9][0-9]{10})|(624313[0-9]{10})|(624319[0-9]{10})|(62432[0-5][0-9]{10})|(624329[0-9]{10})|(62433[1-3][0-9]{10})|(62433[7-9][0-9]{10})|(62434[1-6][0-9]{10})|(62434[8-9][0-9]{10})|(62435[0-7][0-9]{10})|(62436[4-8][0-9]{10})|(62437[0-8][0-9]{10})|(62438[0-2][0-9]{10})|(62438[4-8][0-9]{10})|(62439[0-9][0-9]{10})|(62440[0-1][0-9]{10})|(62440[4-5][0-9]{10})|(62440[7-9][0-9]{10})|(62441[0-3][0-9]{10})|(62441[5-9][0-9]{10})|(624420[0-9]{10})|(62442[2-6][0-9]{10})|(62442[8-9][0-9]{10})|(62443[0-2][0-9]{10})|(62443[4-8][0-9]{10})|(62444[0-3][0-9]{10})|(62444[5-6][0-9]{10})|(624448[0-9]{10})|(62445[3-5][0-9]{10})|(62445[7-9][0-9]{10})|(624463[0-9]{10})|(62446[5-9][0-9]{10})|(624470[0-9]{10})|(624472[0-9]{10})|(624474[0-9]{10})|(62447[6-9][0-9]{10})|(62448[0-3][0-9]{10})|(624485[0-9]{10})|(62448[8-9][0-9]{10})|(624490[0-9]{10})|(624494[0-9]{10})|(62449[6-7][0-9]{10})|(624518[0-9]{10})|(624580[0-9]{10})|(624624[0-9]{10})|(62500[1-4][0-9]{10})|(62500[6-9][0-9]{10})|(62501[0-4][0-9]{10})|(62501[6-9][0-9]{10})|(62502[0-6][0-9]{10})|(62502[8-9][0-9]{10})|(62503[1-6][0-9]{10})|(62503[8-9][0-9]{10})|(625040[0-9]{10})|(625042[0-9]{10})|(625044[0-9]{10})|(625046[0-9]{10})|(625048[0-9]{10})|(625050[0-9]{10})|(62505[2-3][0-9]{10})|(625055[0-9]{10})|(625058[0-9]{10})|(625060[0-9]{10})|(62506[2-3][0-9]{10})|(62507[1-9][0-9]{10})|(625080[0-9]{10})|(62508[2-8][0-9]{10})|(62509[0-3][0-9]{10})|(62509[5-9][0-9]{10})|(62510[1-3][0-9]{10})|(62510[6-7][0-9]{10})|(62511[0-6][0-9]{10})|(625119[0-9]{10})|(62512[0-6][0-9]{10})|(62512[8-9][0-9]{10})|(62513[1-2][0-9]{10})|(62513[5-6][0-9]{10})|(62513[8-9][0-9]{10})|(62514[0-1][0-9]{10})|(625143[0-9]{10})|(625145[0-9]{10})|(625147[0-9]{10})|(625150[0-9]{10})|(62515[2-9][0-9]{10})|(62516[0-9][0-9]{10})|(62517[0-4][0-9]{10})|(62517[6-9][0-9]{10})|(625180[0-9]{10})|(62518[2-3][0-9]{10})|(62518[6-9][0-9]{10})|(62519[0-3][0-9]{10})|(62519[5-6][0-9]{10})|(625198[0-9]{10})|(62520[0-3][0-9]{10})|(62520[5-6][0-9]{10})|(62520[8-9][0-9]{10})|(625212[0-9]{10})|(625216[0-9]{10})|(625220[0-9]{10})|(62522[5-6][0-9]{10})|(62524[3-7][0-9]{10})|(625249[0-9]{10})|(625250[0-9]{10})|(625288[0-9]{10})|(625309[0-9]{10})|(625320[0-9]{10})|(62533[0-3][0-9]{10})|(62533[5-9][0-9]{10})|(62535[0-3][0-9]{10})|(62535[6-9][0-9]{10})|(62536[0-3][0-9]{10})|(62536[6-9][0-9]{10})|(625370[0-9]{10})|(625500[0-9]{10})|(62550[2-3][0-9]{10})|(625506[0-9]{10})|(625516[0-9]{10})|(625519[0-9]{10})|(625526[0-9]{10})|(625529[0-9]{10})|(625568[0-9]{10})|(625577[0-9]{10})|(625586[0-9]{10})|(625588[0-9]{10})|(625598[0-9]{10})|(625603[0-9]{10})|(62560[5-6][0-9]{10})|(62565[0-3][0-9]{10})|(62565[7-8][0-9]{10})|(62570[0-1][0-9]{10})|(62570[8-9][0-9]{10})|(62580[0-9][0-9]{10})|(62581[0-1][0-9]{10})|(625814[0-9]{10})|(62581[6-9][0-9]{10})|(62582[0-1][0-9]{10})|(62582[3-9][0-9]{10})|(625831[0-9]{10})|(62583[3-4][0-9]{10})|(62583[6-9][0-9]{10})|(62584[0-3][0-9]{10})|(625850[0-9]{10})|(62585[8-9][0-9]{10})|(625860[0-9]{10})|(62586[5-6][0-9]{10})|(625886[0-9]{10})|(62588[8-9][0-9]{10})|(625890[0-9]{10})|(625899[0-9]{10})|(6259[0-1][0-9][0-9]{10})|(62592[0-4][0-9]{10})|(62592[6-9][0-9]{10})|(62593[0-4][0-9]{10})|(625939[0-9]{10})|(62594[0-4][0-9]{10})|(625946[0-9]{10})|(625950[0-9]{10})|(62595[2-3][0-9]{10})|(62595[5-9][0-9]{10})|(6259[6-7][0-9][0-9]{10})|(62598[0-1][0-9]{10})|(62598[6-9][0-9]{10})|(62599[2-3][0-9]{10})|(62599[5-9][0-9]{10})|(62620[0-2][0-9]{10})|(62620[4-6][0-9]{10})|(626208[0-9]{10})|(626210[0-9]{10})|(626212[0-9]{10})|(626214[0-9]{10})|(62621[7-8][0-9]{10})|(62622[0-3][0-9]{10})|(62622[5-9][0-9]{10})|(626230[0-9]{10})|(62623[2-7][0-9]{10})|(626239[0-9]{10})|(62624[0-1][0-9]{10})|(62636[0-1][0-9]{10})|(626374[0-9]{10})|(62639[4-6][0-9]{10})|(62639[8-9][0-9]{10})|(62640[0-4][0-9]{10})|(62640[7-9][0-9]{10})|(62641[0-1][0-9]{10})|(62641[4-6][0-9]{10})|(62702[5-8][0-9]{10})|(627040[0-9]{10})|(62706[0-1][0-9]{10})|(627063[0-9]{10})|(62706[5-8][0-9]{10})|(627070[0-9]{10})|(627073[0-9]{10})|(62707[5-6][0-9]{10})|(627078[0-9]{10})|(62820[0-9][0-9]{10})|(62821[0-4][0-9]{10})|(62821[6-9][0-9]{10})|(62822[0-4][0-9]{10})|(62822[6-9][0-9]{10})|(62823[0-9][0-9]{10})|(62824[2-4][0-9]{10})|(62824[7-8][0-9]{10})|(62825[0-5][0-9]{10})|(62825[7-9][0-9]{10})|(62826[0-4][0-9]{10})|(62826[6-9][0-9]{10})|(6282[7-8][0-9][0-9]{10})|(62829[0-1][0-9]{10})|(62829[3-9][0-9]{10})|(62830[0-3][0-9]{10})|(62830[5-9][0-9]{10})|(6283[1-2][0-9][0-9]{10})|(62833[0-2][0-9]{10})|(628336[0-9]{10})|(628339[0-9]{10})|(62834[0-1][0-9]{10})|(628343[0-9]{10})|(62834[5-6][0-9]{10})|(628349[0-9]{10})|(62835[0-1][0-9]{10})|(62835[3-9][0-9]{10})|(62836[0-2][0-9]{10})|(62836[4-9][0-9]{10})|(62837[0-3][0-9]{10})|(628375[0-9]{10})|(62837[7-9][0-9]{10})|(62838[0-2][0-9]{10})|(62838[5-9][0-9]{10})|(62839[1-2][0-9]{10})|(628395[0-9]{10})|(62839[7-9][0-9]{10})|(62844[7-8][0-9]{10})|(62912[8-9][0-9]{10})|(62913[0-3][0-9]{10})|(629135[0-9]{10})|(62913[8-9][0-9]{10})|(62914[0-4][0-9]{10})|(62914[7-9][0-9]{10})|(62915[0-8][0-9]{10})|(62916[1-2][0-9]{10})|(629168[0-9]{10})|(629171[0-9]{10})|(62917[3-8][0-9]{10})|(629180[0-9]{10})|(62926[0-1][0-9]{10})|(629269[0-9]{10})|(62927[1-4][0-9]{10})|(62927[7-9][0-9]{10})|(629281[0-9]{10})|(629284[0-9]{10})|(632062[0-9]{10})|(64[4-9][0-9][0-9][0-9][0-9]{10})|(65[0-1][0-9][0-9][0-9][0-9]{10})|(6520[0-9][0-9][0-9]{10})|(6521[0-4][0-9][0-9]{10})|(65215[0-7][0-9]{10})|(652159[0-9]{10})|(652160[0-9]{10})|(65216[2-3][0-9]{10})|(65216[5-6][0-9]{10})|(65216[8-9][0-9]{10})|(65217[0-2][0-9]{10})|(65217[4-5][0-9]{10})|(65217[7-9][0-9]{10})|(65218[0-3][0-9]{10})|(65218[5-9][0-9]{10})|(652190[0-9]{10})|(65219[3-4][0-9]{10})|(652196[0-9]{10})|(652199[0-9]{10})|(65220[1-9][0-9]{10})|(65221[0-9][0-9]{10})|(652220[0-9]{10})|(652223[0-9]{10})|(65222[8-9][0-9]{10})|(65223[0-9][0-9]{10})|(65224[0-7][0-9]{10})|(652251[0-9]{10})|(65225[5-9][0-9]{10})|(65226[0-4][0-9]{10})|(652400[0-9]{10})|(65285[0-6][0-9]{10})|(65285[8-9][0-9]{10})|(65286[0-5][0-9]{10})|(652870[0-9]{10})|(65287[3-4][0-9]{10})|(652878[0-9]{10})|(6531[5-9][0-9][0-9]{10})|(653[2-9][0-9][0-9][0-9]{10})|(654[0-9][0-9][0-9][0-9]{10})|(655[0-5][0-9][0-9][0-9]{10})|(6556[0-7][0-9][0-9]{10})|(65568[0-4][0-9]{10})|(65568[6-9][0-9]{10})|(65569[2-3][0-9]{10})|(655695[0-9]{10})|(65569[7-9][0-9]{10})|(655[7-9][0-9][0-9][0-9]{10})|(656[0-9][0-9][0-9][0-9]{10})|(657[0-2][0-9][0-9][0-9]{10})|(6573[0-7][0-9][0-9]{10})|(65738[0-4][0-9]{10})|(65738[6-9][0-9]{10})|(657392[0-9]{10})|(65739[5-9][0-9]{10})|(657[4-9][0-9][0-9][0-9]{10})|(65[8-9][0-9][0-9][0-9][0-9]{10})|(685800[0-9]{10})|(690750[0-9]{10})|(690755[0-9]{10})|(703988[0-9]{10})|(757555[0-9]{10})|(817200[0-9]{10})|(878655[0-9]{10})|(888888[0-9]{10})|(900105[0-9]{10})|(900205[0-9]{10})|(900300[0-9]{10})|(905920[0-9]{10})|(911100[0-9]{10})|(940001[0-9]{10})|(940003[0-9]{10})|(940010[0-9]{10})|(940013[0-9]{10})|(940015[0-9]{10})|(940018[0-9]{10})|(94002[0-1][0-9]{10})|(940023[0-9]{10})|(94002[7-8][0-9]{10})|(94003[0-1][0-9]{10})|(940035[0-9]{10})|(940037[0-9]{10})|(940039[0-9]{10})|(940040[0-9]{10})|(94004[6-9][0-9]{10})|(940050[0-9]{10})|(94005[5-6][0-9]{10})|(94006[1-3][0-9]{10})|(940066[0-9]{10})|(940068[0-9]{10})|(94007[3-4][0-9]{10})|(955100[0-9]{10})|(955550[0-9]{10})|(95559[0-3][0-9]{10})|(95588[0-2][0-9]{10})|(955888[0-9]{10})|(955990[0-9]{10})|(966666[0-9]{10})|(96880[7-9][0-9]{10})|(98430[0-3][0-9]{10})|(987654[0-9]{10})|(990027[0-9]{10})|(353800[0-9]{10})/).test(b)&&(b.length==16)){return"RUPAY"}else{if((/^(50|56|57|58|6)/).test(b)&&(b.length==16||b.length==18||b.length==19)){return"MAEST"}else{if((/^(300|301|302|303|304|305|36|38|3095)/).test(b)&&b.length==14){return"DINERS"}else{if((/^(203040)/).test(b)&&(b.length==16)){return"BAJAJ"}}}}}}}return null},isCardTypeRupay:function(e){if(e.length>=6){var c=parseInt(e.substring(0,6));for(var b=0;b<rupayBinRange.length;b++){var d=parseInt(rupayBinRange[b].split("-")[0]);var a=parseInt(rupayBinRange[b].split("-")[1]);if(c>=d&&c<=a){return true}}}return false},setMaestroUI:function(a){if(a=="MAEST"){$("#dc_cvvMsg_id").show();$("#dc_cvv_id").attr("data-validation","checkCvv");$("#dc_cvv_id").attr("data-msginfo","Enter a valid cvv");$("#dc_expm_id").attr("data-validation","");$("#dc_expm_id").attr("data-msginfo","");$("#dc_expy_id").attr("data-validation","checkExpiryDate[dc]");$("#dc_expy_id").attr("data-msginfo","Invalid Date")}else{$("#dc_cvvMsg_id").hide();$("#dc_cvv_id").attr("data-validation","required|regType[number]|lenCheck[3]");$("#dc_cvv_id").attr("data-msginfo","* required|* number only|* invalid cvv length");$("#dc_cvv_id").prop("disabled",false);$("#dc_cvv_id").css("background-color","#FFFFFF");$("#dc_expm_id").attr("data-validation","required");$("#dc_expm_id").attr("data-msginfo","* required");$("#dc_expy_id").attr("data-validation","required|checkExpiryDate[dc]");$("#dc_expy_id").attr("data-msginfo","* required|Invalid Date")}},setBajajUI:function(a){if(a=="BAJAJ"){$("#emi_cvv_id").attr("data-validation","");$("#emi_cvv_id").attr("data-msginfo","");$("#emi_expm_id").attr("data-validation","");$("#emi_expm_id").attr("data-msginfo","");$("#emi_expy_id").attr("data-validation","");$("#emi_expy_id").attr("data-msginfo","")}},setSkipOtpUiIfRequired:function(a,b,c){if(a==null||typeof(withoutCVVSupportedCardTypeJSON[b])=="undefined"||withoutCVVSupportedCardTypeJSON[b]==undefined){YatraPaymentUI.cvvRequired="true";return}else{if(isZeroNonPassThroughPayment){YatraPaymentUI.disableCVVforSkipOtpFlow(b)}else{if("true"==withoutCVVSupportedCardTypeJSON[b][a]&&YatraPaymentUI.getBinDetails(c)["skipOtpForBin"]){YatraPaymentUI.disableCVVforSkipOtpFlow(b);YatraPaymentUI.cvvRequired="false"}else{YatraPaymentUI.enableCVVforSkipOtpFlow(b,a);YatraPaymentUI.cvvRequired="true"}}}},setSkipOtpUiForQBIfRequired:function(c,d,a){if(typeof(withoutCVVSupportedCardTypeJSON[d])=="undefined"||withoutCVVSupportedCardTypeJSON[d]==undefined){YatraPaymentUI.cvvRequired="true";return}else{if(isZeroNonPassThroughPayment){YatraPaymentUI.disableQBCVVForCreditCard(c);return}if(c.attr("cardnumber")==null||c.attr("cardnumber")==undefined){return}var b=c.attr("cardnumber").replace("-","");if("true"==withoutCVVSupportedCardTypeJSON[d][c.attr("cardtype")]&&a.skipOtpForBin){if(d=="cc"){YatraPaymentUI.disableQBCVVForCreditCard(c)}else{YatraPaymentUI.disableQBCVVForDebitCard(c)}YatraPaymentUI.cvvRequired="false"}else{if(d=="cc"){YatraPaymentUI.enableQBCVVForCheckedCreditCard(c)}else{YatraPaymentUI.enableQBCVVForCheckedDebitCard(c)}YatraPaymentUI.cvvRequired="true"}}},setMultiPayUiForQBIfRequired:function(b,c,a){if(c=="cc"){YatraPaymentUI.enableMultiFlowUiForQBCard(b,"cc",a)}else{YatraPaymentUI.enableMultiFlowUiForQBCard(b,"dc",a)}},getBinDetails:function(c){var a={};a.cno=c;if(detailsJson.isPassthrough!=null){a.passthrough=detailsJson.isPassthrough}else{a.passthrough="false"}a.product=detailsJson.product;a.superPnr=detailsJson.superPnr;var b="";$.ajax({url:"/PaySwift/get-bin-details-v2.htm",type:"POST",async:false,timeout:"5000",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(d){b=d;if(b.binType!=null&&b.binType!=""){cardBinTypeFromDB=b.binType}},error:function(f,d,e){YatraPaymentUI.recordEventInSentry("Error in receiving Bin Details Response","info","get-bin-details Error")}});return b},validateEMICardAndBank:function(d,b){var c={};var a="";c.cno=d;c.emiBank=b;c.superPnr=detailsJson.superPnr;$.ajax({url:"/PaySwift/validate_emi_bank_details.htm",type:"POST",async:false,timeout:"5000",data:JSON.stringify(c),contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(e){a=e},error:function(g,e,f){a={is_successful:"true",message:""}}});return a},enableMultiFlowUiForQBCard:function(h,c,g){if(g!=null){var a=$(h).val();$(".qb_multiFlowDiv").hide();var b=$("#qb_pmt_MultiFlowId_"+a);var e=$(b).find("#multiflow_type_div_"+a);var f="#multiflow_type_div_"+a;var d="";if("true"==g.isMultiPayFlowEnabled&&(g.multiPayFlow!=null)&&(g.multiPayFlow!="")){var j=g.multiPayFlow.split("|");d+=YatraPaymentUI.getMultiFlowUiTemplate(g.multiPayFlow,c,a);$(e).html(d);if(j.length>1){if(!$(e).is(":visible")){$(f+' input:radio[name="processTyperdo"]:nth(0)').attr("checked","checked");YatraPaymentUI.paymentProcessType=$("input[name='processTyperdo']:checked").val()}$(b).show();$(f+' input:radio[name="processTyperdo"]:nth(0)').click()}else{if(j.length==1){$(f+' input:radio[name="processTyperdo"]:nth(0)').attr("checked","checked");$(b).hide();YatraPaymentUI.paymentProcessType=j[0]}else{YatraPaymentUI.paymentProcessType="Secure"}}}else{YatraPaymentUI.paymentProcessType="Secure"}}},getEnabledCards:function(paymentOption){if(paymentOption=="cc"){return cc_enabledCards}else{if(paymentOption=="dc"){return dc_enabledCards}else{if(paymentOption=="dcpin"){return dcpin_enabledCards}else{if(paymentOption=="rewards"){return rw_enabledCards}else{if(paymentOption=="emi"){var emiBank=$("#emiBank_select option:selected").val();var emi_enabledCards="";var bankList="";if(banksArray==""){return}bankList=eval(banksArray);for(var i=0;i<bankList.length;i++){if(emiBank==bankList[i].bankName){emi_enabledCards=emi_enabledCards+"/"+bankList[i].code}}emi_enabledCards=emi_enabledCards.substring(1);return emi_enabledCards}}}}}},setMaxCreditCardNumberLengthForEMI:function(field,paymentOption,ctype){if(paymentOption=="emi"){var maxCreditCardNumberLength="16";var emiBank=$("#emiBank_select option:selected").val();var bankList="";if(banksArray==""){return}bankList=eval(banksArray);for(var i=0;i<bankList.length;i++){if(emiBank==bankList[i].bankName&&ctype==bankList[i].code){maxCreditCardNumberLength=bankList[i].cardNumberLength;break}}$(field).attr("maxlength",maxCreditCardNumberLength)}return},setMaxCVVLengthForEMI:function(field,paymentOption,ctype){if(paymentOption=="emi"){var maxCVVLength="3";var emiBank=$("#emiBank_select option:selected").val();var bankList="";if(banksArray==""){return}bankList=eval(banksArray);for(var i=0;i<bankList.length;i++){if(emiBank==bankList[i].bankName&&ctype==bankList[i].code){maxCVVLength=bankList[i].cvvLength;break}}if(ctype=="BAJAJ"){$(field).attr("cvvLength","0");$("#emi_cvv_id").attr("maxlength","0");$("#emi_cvv_id").attr("data-validation","")}else{$(field).attr("cvvLength",maxCVVLength);$("#emi_cvv_id").attr("maxlength",maxCVVLength);$("#emi_cvv_id").attr("data-validation","required|regType[number]|lenCheck["+maxCVVLength+"]")}}return},setCardValidation:function(d,c,b,e){$(d).attr("data-validation","required|validateLuhn|cardRegType[VISA]|supportedCard[VISA,"+b+"]|enabledCard[VISA,'"+e+"']");if(c=="MAEST"||c=="BAJAJ"){var a="required|cardRegType["+c+"]|supportedCard["+c+","+b+"]|enabledCard["+c+","+e+"]";$(d).attr("data-validation",a)}else{if(c!=null){if(b=="emi"){var a="required|validateLuhn|cardRegType["+c+"]|supportedCard["+c+","+b+"]|enabledCard["+c+","+e+"]|emiCardBankValidaton";$(d).attr("data-validation",a)}else{var a="required|validateLuhn|cardRegType["+c+"]|supportedCard["+c+","+b+"]|enabledCard["+c+","+e+"]";$(d).attr("data-validation",a)}}}},fadeCardLogo:function(a){setTimeout(function(){$(".card-logos").removeClass("VISA");$(".card-logos").removeClass("MASTER");$(".card-logos").removeClass("DINERS");$(".card-logos").removeClass("AMEX");$(".card-logos").removeClass("RUPAY");$(".card-logos").removeClass("MAEST")},10);setTimeout(function(){$(".card-logos").addClass(a)},10);$.each($("[cardAttr='pm_cards']:visible > i"),function(b,c){$(this).removeClass("cpmt_fade");if(a!=null&&a!="undefined"){if($(this).attr("title")!=a){$(this).addClass("cpmt_fade")}}})},setCardTypeParameter:function(b){var a=YatraPaymentUI.getPaymentOption();if(a=="cc"){$("#cc_ctype_id").val(b)}else{if(a=="dc"){$("#dc_ctype_id").val(b)}else{if(a=="emi"){$("#emi_ctype_id").val(b)}else{if(a=="rewards"){$("#rw_ctype_id").val(b)}else{if(a=="dcpin"){$("#dcpin_ctype_id").val(b)}}}}}},setCvvLogo:function(a){var c=YatraPaymentUI.getPaymentOption();if(a=="AMEX"){if(c=="emi"){var b=$("#emi_CvvUrl_id").attr("class");$("#emi_CvvUrl_id").removeClass(b);$("#emi_CvvUrl_id").addClass("PaymentSprite "+amexCvvURL);$("#emi_cvv_id").attr("maxlength",amexCvvLength);$("#emi_cvv_id").attr("data-validation","required|regType[number]|lenCheck[4]");$("#emi_cvvImageText_id").text(amexCvvImageText)}else{var b=$("#cc_CvvUrl_id").attr("class");$("#cc_CvvUrl_id").removeClass(b);$("#cc_CvvUrl_id").addClass("PaymentSprite "+amexCvvURL);$("#cc_cvv_id").attr("maxlength",amexCvvLength);$("#cc_cvv_id").attr("data-validation","required|regType[number]|lenCheck[4]");$(".cpmt_cvvBlock .cpmt_CVVtxt").text(amexCvvImageText)}}else{if(a=="BAJAJ"){var b=$("#emi_CvvUrl_id").attr("class");$("#emi_CvvUrl_id").removeClass(b);$("#emi_CvvUrl_id").addClass("PaymentSprite "+amexCvvURL);$("#emi_cvv_id").attr("maxlength",0);$("#emi_cvv_id").attr("data-validation","");$("#emi_cvvImageText_id").text("")}else{if(c=="emi"){YatraPaymentUI.resetEMICardCvv()}else{YatraPaymentUI.resetCreditCardCvv()}}}},ifArrayContains:function(c,b){for(var a=0;a<c.length;a++){if(b==c[a]){return true}}return false},isInternationalSupportedOnProduct:function(){if(YatraPaymentUI.byPassInternationalSupportRestrictionOnProduct()){return true}var a=getPaymentJSON();var c=a.product;for(var b=0;b<intl_productsArr.length;b++){if(c==intl_productsArr[b]){return true}}return false},byPassInternationalSupportRestrictionOnProduct:function(){return byPassUIChecksForWhitelistedEmail=="true"},byPassTravelDateCheck:function(){return byPassUIChecksForWhitelistedEmail=="true"},isProductRoutedOnInternationalGateway:function(){var a=getPaymentJSON();var c=a.product;for(var b=0;b<productsOnInternationalGateway.length;b++){if(c==productsOnInternationalGateway[b]){return true}}return false},disableEMI:function(b,d){var c=YatraPaymentUI.getPaymentOption();if(b=="dhdfc"||b=="dkotak"||b=="dbob"||b=="dfdrl"){var a=b;if(b=="dhdfc"){a="hdfc"}else{if(b=="dkotak"){a="kotak"}else{if(b=="dbob"){a="bank of baroda"}else{if(b=="dfdrl"){a="federal"}}}}if(d){$("#emi_pmt_msg_WARNING").html("Only bookings with value "+(disableEMICondition[b][12].max-1)+" and below can be paid in EMI using "+a.toUpperCase()+"  Debit Card. Please select another bank or choose a different payment option")}else{$("#emi_pmt_msg_WARNING").html("Only bookings with value "+disableEMICondition[b][3].min+" and above can be paid in EMI using "+a.toUpperCase()+" Debit Card. Please select another bank or choose a different payment option")}}else{if(d){$("#emi_pmt_msg_WARNING").html("Only bookings with value "+(disableEMICondition[b][12].max-1)+" and below can be paid in EMI using "+b.toUpperCase()+" Credit / Debit / EMI Card. Please select another bank or choose a different payment option")}else{$("#emi_pmt_msg_WARNING").html("Only bookings with value "+disableEMICondition[b][3].min+" and above can be paid in EMI using "+b.toUpperCase()+" Credit / Debit /EMI Card. Please select another bank or choose a different payment option")}}$("#emi_pmt_msg_WARNING").show();$('input[name="'+b+'"]').attr("disabled","disabled");$("#TncAgree").prop("disabled",true);$("#emi_cno_id").prop("disabled",true);$("#emi_mobile_number_id_"+b).prop("disabled",true);$("#emi_cardholder_name_id").prop("disabled",true);$("#emi_expm_id").prop("disabled",true);$("#emi_expy_id").prop("disabled",true);$("#emi_cvv_id").prop("disabled",true);$("."+b+"-emi-details").addClass("disabled-field");$("#emi_cno_id").addClass("disabled-field");$("#emi_mobile_number_id_"+b).addClass("disabled-field");$("#emi_cardholder_name_id").addClass("disabled-field");$("#emi_cvv_id").addClass("disabled-field");$("#emi_expm_id").addClass("disabled-field");$("#emi_expy_id").addClass("disabled-field");$("#expr_month").addClass("disabled-field");$("#expr_year").addClass("disabled-field");if(c=="emi"){$("#payNow").addClass("emi-paynow-btn-disabled")}$("#emi_cno_id").val("");$("#emi_mobile_number_id_"+b).val("");$("#emi_cardholder_name_id").val("");$("#emi_expm_id").val("");$("#emi_expy_id").val("");$("#emi_cvv_id").val("");if(c=="emi"){ProcessPayment.disablePayNow()}},enableEMI:function(a){$("#emi_pmt_msg_WARNING").html("");$("#emi_pmt_msg_WARNING").hide();$('input[name="'+a+'"]').removeAttr("disabled");$("#TncAgree").prop("disabled",false);$("#emi_cno_id").prop("disabled",false);$("#emi_mobile_number_id_"+a).prop("disabled",false);$("#emi_cardholder_name_id").prop("disabled",false);$("#emi_expm_id").prop("disabled",false);$("#emi_expy_id").prop("disabled",false);$("#emi_cvv_id").prop("disabled",false);$("."+a+"-emi-details").removeClass("disabled-field");$("#emi_cno_id").removeClass("disabled-field");$("#emi_mobile_number_id_"+a).removeClass("disabled-field");$("#emi_cardholder_name_id").removeClass("disabled-field");$("#emi_cvv_id").removeClass("disabled-field");$("#emi_expm_id").removeClass("disabled-field");$("#emi_expy_id").removeClass("disabled-field");$("#expr_month").removeClass("disabled-field");$("#expr_year").removeClass("disabled-field");$("#payNow").removeClass("emi-paynow-btn-disabled");ProcessPayment.enablePayNow()},disableEmiDetails:function(a,b){let tenureList=Object.keys(disableEMICondition[b]);for(let i=0;i<tenureList.length;i++){let tenure=tenureList[i];if(a<disableEMICondition[b][tenure].min){$("."+b+"-"+tenure).addClass("disabled-field");if(b=="bajaj"){$("."+b+"-"+tenure).attr("title","For Bajaj EMI transactions, minimum monthly installment amount should be greater than Rs 1,500.")}$("#"+b+"-"+tenure).attr("disabled","disabled")}}},isIntCardTravelCheckIgnored:function(){var a=getPaymentJSON();var c=a.product;for(var b=0;b<int_card_travel_date_ignore_products.length;b++){if(c==int_card_travel_date_ignore_products[b]){return true}}return false},doesProductAcceptIntCardTwoDaysPrior:function(){var a=getPaymentJSON();var c=a.product;for(var b=0;b<int_card_two_days_allowing_products.length;b++){if(c==int_card_two_days_allowing_products[b]){return true}}return false},isHoldAndPaySupportedOnProduct:function(){var a=getPaymentJSON();var c=a.product;for(var b=0;b<holdAndPay_productsArr.length;b++){if(c==holdAndPay_productsArr[b]){return true}}return false},showErrorMessage:function(a,b){$(a+"divWarningMsgBlock").css("display","none");$(a+"divErrMsgBlock").html(b);$(a+"divErrMsgBlock").css("display","")},hideErrorMessage:function(a){a="#"+a;$(a+"_divErrMsgBlock").css("display","none");$(a+"_divWarningMsgBlock").css("display","none")},showInternationalWarning:function(b){var a="#"+b+"_";$(a+"divErrMsgBlock").css("display","none");$(a+"divWarningMsgBlock").html(YatraPaymentUI.amexWarningMessage);$(a+"divWarningMsgBlock").css("display","")},showBankMessage:function(b,d){var a="#"+b+"_";var c="."+b+"_";$(a+"divErrMsgBlock").css("display","none");$(c+"payop_msg").css("display","none");$(a+"bank_msg").html(d);$(a+"bank_msg").css("display","")},hideBankMessage:function(b){var a="#"+b+"_";var c="."+b+"_";$(a+"divErrMsgBlock").css("display","none");$(a+"bank_msg").css("display","none");$(c+"payop_msg").css("display","")},setDefaultClassForContinue:function(){var a="#"+getContinueButtonId();continueClass=$(a).attr("class")},enablePayNow:function(b){var a="#"+b+"_";$(a+"divErrMsgBlock").css("display","none");$(a+"divWarningMsgBlock").css("display","none");var c="#"+getContinueButtonId();$(c).removeClass("cpmt_disable_button");$(c).prop("disabled",false);if($(c).hasClass("emi-paynow-btn-disabled")){$(c).removeClass("emi-paynow-btn-disabled")}},disablePayNow:function(b,d){var a="#"+b+"_";YatraPaymentUI.showErrorMessage(a,d);var c="#"+getContinueButtonId();$(c).addClass("cpmt_disable_button");$(c).prop("disabled",true)},showBillingAddressDiv:function(m,k,j){if(!YatraPaymentUI.ifArrayContains(intlPayOpArr,m)){return}var g=j.cardType;var h="#"+m+"_";var f=h+"isCardInternational_id";var d=h+"pmt_addressId";var b=h+"process-pay-type";var r="#"+m+"_process_pay_type_div";if(g!=null){var n=YatraPaymentUI.isInternationalSupportedOnProduct();if(g=="AMEX"){YatraPaymentUI.enablePayNow(m);if(n==false){YatraPaymentUI.showInternationalWarning(m);$(f).val("false");return}if(!$("#cc_AddressShowHide").is(":visible")){$('#cc_AddressShowHide input:radio[name="address_check_rdo"]:nth(0)').attr("checked","checked")}$("#cc_AddressShowHide").show()}else{$(h+"AddressShowHide").hide();if(g=="VISA"||g=="MASTER"||g=="DINNERS"||g=="DINERS"||g=="RUPAY"){var o=parseInt(k.substring(0,6));if(j!=null){var l="",p="",c="",t=j;if("true"==j.isMultiPayFlowEnabled&&(j.multiPayFlow!=null)&&(j.multiPayFlow!="")){var s=j.multiPayFlow.split("|");l=YatraPaymentUI.getMultiFlowUiTemplate(j.multiPayFlow,m,m);$(r).html(l);if(s.length>1){if(!$(b).is(":visible")){$(b+' input:radio[name="processTyperdo"]:nth(0)').attr("checked","checked");YatraPaymentUI.paymentProcessType=$("input[name='processTyperdo']:checked").val()}$(b).show();$(b+' input:radio[name="processTyperdo"]:nth(0)').click()}else{if(s.length==1){$(b+' input:radio[name="processTyperdo"]:nth(0)').attr("checked","checked");$(b).hide();YatraPaymentUI.paymentProcessType=s[0]}else{$(b).hide();YatraPaymentUI.paymentProcessType="Secure"}}}else{$(b).hide();YatraPaymentUI.paymentProcessType="Secure"}var e=t.serverDate;if("true"==t.isCardInternational){if(n==false){var a=YatraPaymentUI.intlerrorMessage;YatraPaymentUI.disablePayNow(m,a);$(f).val("false");return}if(m=="emi"){YatraPaymentUI.disablePayNow(m,YatraPaymentUI.emiIntlErrorMessage);$(f).val("false");return}else{if(m=="rewards"){YatraPaymentUI.disablePayNow(m,YatraPaymentUI.rewardsIntlErrorMessage);$(f).val("false");return}}var q=YatraPaymentUI.checkForTravelDate(m,e);if(q=="true"){$(d).show();$(f).val("true")}else{$(d).hide();$(f).val("false")}}else{if("false"==t.isCardInternational){$(d).hide();$(f).val("false");YatraPaymentUI.enablePayNow(m)}else{if("error"==t.isCardInternational){$(d).hide();$(f).val("false");YatraPaymentUI.enablePayNow(m)}}}}else{$(d).hide();$(f).val("false");YatraPaymentUI.enablePayNow(m)}}else{$(f).val("false");$(b).hide();YatraPaymentUI.paymentProcessType="Secure"}}}else{$("#cc_AddressShowHide").hide();$(b).hide();$(d).hide();$(f).val("false");YatraPaymentUI.enablePayNow(m)}},getMultiFlowUiTemplate:function(g,l,m){var a="ATM Pin";var c="OTP";var d="Secure Password";var b="",n="",f="";var k=g.split("|");var j=k.indexOf("atm");for(var e=0;e<k.length;e++){var h=k[e];if((h!=null)&&(h=="atm")){n=a+b;f+='<div class="list-b mb5 listopt_atm" id="'+l+"_multi-pay-atm-option-message-template_"+m+'"><label for="'+l+"-Atm-Rdo_"+m+'"> <spanclass="custom-Radiobox"> <input type="radio" class="cpmt_alignMid radioMid multipayRadio" value="ATM"id="'+l+"-Atm-Rdo_"+m+'" name="processTyperdo" > <span class="box"><b class="tick"></b></span></span>'+n+'<span class="in-sm" id="in-sm"></span></label></div>'}if((h!=null)&&(h=="secure")){if((k.length==2)&&(j!=-1)){d="Secure/OTP"}n=d+b;f+='<div class="list-b mb5 listopt_secure" id="'+l+"_multi-pay-secure-option-message-template_"+m+'"><label for="'+l+"-Secure-Rdo_"+m+'"> <spanclass="custom-Radiobox"> <input type="radio" class="cpmt_alignMid radioMid multipayRadio" value="Secure"id="'+l+"-Secure-Rdo_"+m+'" name="processTyperdo"> <span class="box"><b class="tick"></b></span></span>'+n+'<span class="in-sm" id="in-sm"></span></label></div>'}if((h!=null)&&(h=="otp")){n=c+b;f+='<div class="list-b mb5 listopt_otp" id="'+l+"_multi-pay-otp-option-message-template_"+m+'"><label for="'+l+"-Otp-Rdo_"+m+'"> <spanclass="custom-Radiobox"> <input type="radio" class="cpmt_alignMid radioMid multipayRadio" value="OTP"id="'+l+"-Otp-Rdo_"+m+'" name="processTyperdo"> <span class="box"><b class="tick"></b></span></span>'+n+'<span class="in-sm" id="in-sm"></span></label></div> '}b=""}return f},checkForTravelDate:function(c,g){if(YatraPaymentUI.byPassTravelDateCheck()){return"true"}if(YatraPaymentUI.isIntCardTravelCheckIgnored()){return"true"}var b=getPaymentJSON();var f=YatraPaymentUI.doesProductAcceptIntCardTwoDaysPrior();var a=b.international.travelDate;var e="";if(a==null||a==""){if(f){YatraPaymentUI.disablePayNow(c,YatraPaymentUI.d2errorMessage);YatraPaymentUI.logDXErrorInSentry("InternationalCards:D-2 check failed",YatraPaymentUI.d2errorMessage)}else{YatraPaymentUI.disablePayNow(c,YatraPaymentUI.d3errorMessage);YatraPaymentUI.logDXErrorInSentry("InternationalCards:D-3 check failed",YatraPaymentUI.d3errorMessage)}return"false"}else{e=new Date(a)}var d;if(g==null||g==""){d=new Date()}else{d=new Date(g)}if(f){if(((e.getTime()-d.getTime())/(24*3600*1000))<=2){YatraPaymentUI.disablePayNow(c,YatraPaymentUI.d2errorMessage);YatraPaymentUI.logDXErrorInSentry("InternationalCards:D-2 check failed",YatraPaymentUI.d2errorMessage);return"false"}else{return"true"}}else{if(((e.getTime()-d.getTime())/(24*3600*1000))<=3){YatraPaymentUI.disablePayNow(c,YatraPaymentUI.d3errorMessage);YatraPaymentUI.logDXErrorInSentry("InternationalCards:D-3 check failed",YatraPaymentUI.d3errorMessage);return"false"}else{return"true"}}return"true"},logDXErrorInSentry:function(b,a){YatraPaymentUI.recordEventInSentry(b,"info","InternationalCards:DX-check-failed","messageDisplayed",a)},interateRewardcardList:function(d,a,b){for(var c=0;c<a;c++){var e=new RegExp("^"+b[c]);if(e.test(d)){rwprefixValid=true}}return rwprefixValid},validateRewardCardNumber:function(cardNo){var rewardBinData=eval(rewardCardsBinList);rwprefixValid=false;for(var i=0;i<rewardBinData.length;i++){var binList=rewardBinData[i][1];rwprefixValid=YatraPaymentUI.interateRewardcardList(cardNo,binList.length,binList);if(rwprefixValid){rwConversion=rewardBinData[i][2];break}}if(!rwprefixValid){$("#error-rwCnoValid").show();return false}return true},calRewardAmount:function(b){var a=Math.floor(b*parseInt($("#rw_reward_points_id").val())/100);if(!isNaN(a)){if(a=="0"){$("#rw_reward_amount_id").val("")}else{$("#rw_reward_amount_id").val(a)}}},getParamValue:function(a){return $("#paymentForm input[name="+a+"]").val()},generateEMILogos:function(emiBank){var bankList="";if(banksArray==""){return}emi_enabledCards="";binNumber="";bankList=eval(banksArray);$("#emiCardLogos").empty();$("#emiCardLogos").removeClass();$("#emiCardLogos").addClass("card-logos");for(var i=0;i<bankList.length;i++){if(emiBank==bankList[i].bankName){$("#emiCardLogos").append('<i class="PaymentSprite '+bankList[i].logoURL+'" title="'+bankList[i].code+'" ></i> <script language="javascript"> emi_enabledCards = emi_enabledCards + "/" + "'+bankList[i].code+'";<\/script>	')}}$("#emiCardLogos").append(' <script language="javascript"> emi_enabledCards = emi_enabledCards.substring(1);<\/script>	')},disableNewCreditCard:function(){$("#cc_newCard_id").prop("checked",false);$("#cc_newCard_id + .box > .tick").parents("label").addClass("selChecked");if(showAuthDiv){$('#tab_cc_qb > input[name="payop"]').val("cc")}else{$('#tab_cc_qb > input[name="payop"]').val("qb")}YatraPaymentUI.changePayNowButtonLabel(detailsJson.product)},disableNewDebitCard:function(){$("#dc_newCard_id").prop("checked",false);$("#dc_newCard_id + .box > .tick").parents("label").addClass("selChecked");if(showAuthDiv){$('#tab_dc_qb > input[name="payop"]').val("dc")}else{$('#tab_dc_qb > input[name="payop"]').val("qb")}YatraPaymentUI.changePayNowButtonLabel(detailsJson.product)},setActiveClass:function(a){$(a).parent().parent().parent().addClass("active").siblings().removeClass("active")},disableQBCVVForCreditCard:function(b){var a=$(b).parent().parent().parent().find(".qb_ccCVV");$(a).val("");$(a).prop("readonly",true);$(a).css("background-color","#DEDEDE");$(a).attr("data-validation","");$(a).attr("data-msginfo","")},disableCVVforGdsFlow:function(){var a=$(".cvvInput");$(a).val("");$(a).prop("readonly",true);$(a).css("background-color","#DEDEDE");$(a).attr("data-validation","");$(a).attr("data-msginfo","")},disableCVVforSkipOtpFlow:function(b){var a="#"+b+"_";var d=a+"cvv_id";var c=$(d);$(c).val("");$(c).prop("readonly",true);$(c).css("background-color","#DEDEDE");$(c).attr("data-validation","");$(c).attr("data-msginfo","")},enableCVVforSkipOtpFlow:function(d,a){var b="#"+d+"_";var f=b+"cvv_id";var e=$(f);$(e).val("");$(e).prop("readonly",false);$(e).css("background-color","#FFFFFF");var c=$(e).attr("maxlength");if(a=="MAEST"){$(e).attr("data-validation","checkCvv");$(e).attr("data-msginfo","Enter a valid cvv")}else{$(e).attr("data-validation","required|regType[number]|lenCheck["+c+"]");$(e).attr("data-msginfo","* required|* number only|* invalid cvv length")}},disableQBCVVForDebitCard:function(b){var a=$(b).parent().parent().parent().find(".qb_dcCVV");$(a).val("");$(a).prop("readonly",true);$(a).css("background-color","#DEDEDE");$(a).attr("data-validation","");$(a).attr("data-msginfo","")},enableQBCVVForCheckedCreditCard:function(c){var a=$(c).parent().parent().parent().find(".qb_ccCVV");$(a).prop("readonly",false);$(a).css("background-color","#FFFFFF");$(a).focus();var b=$(a).attr("maxlength");$(a).parents("li").find(".selChecked").removeClass("selChecked");$(a).attr("data-validation","required|regType[number]|lenCheck["+b+"]");$(a).attr("data-msginfo","* required|* number only|* invalid cvv length");YatraPaymentUI.callOnCardEntry("QB",$(c).attr("id"),$(c).attr("cardtype"))},enableQBCVVForCheckedDebitCard:function(d){var a=$(d).attr("cardType");var b=$(d).parent().parent().parent().find(".qb_dcCVV");$(b).prop("readonly",false);$(b).css("background-color","#FFFFFF");$(b).focus();var c=$(b).attr("maxlength");$(b).parents("li").find(".selChecked").removeClass("selChecked");if(a=="MAESTRO"){$(b).attr("data-validation","checkCvv");$(b).attr("data-msginfo","Enter a valid cvv")}else{$(b).attr("data-validation","required|regType[number]|lenCheck["+c+"]");$(b).attr("data-msginfo","* required|* number only|* invalid cvv length")}YatraPaymentUI.callOnCardEntry("QB",$(d).attr("id"),$(d).attr("cardtype"))},setElementInnerHtml:function(c,a){var b=document.getElementById(c);if(b!=null){$(b).innerHTML=a}},setElementText:function(c,a){var b=document.getElementById(c);if(b!=null){$(b).text(a)}},getMonthlyInterest:function(e,h,k){var b=k/12;if(b==0){var a=e/h}else{var c=b/100;var g=e*c;var f=Math.pow(1+c,h);var j=g*f;var d=f-1;var a=j/d}return Math.round(a*100)/100},getBankInterest:function(d,a,c){var b=(d*c)-a;return Math.round(b*100)/100},generateEmiTable:function(){var c=YatraEWalletPaymentUI.getCashAmount();if(c==undefined||c==null||c==""||c<=0){var b=getPaymentJSON();c=b.amount}$("#emi-details-table tr").each(function(){var g=$(this).find(".emiTenure").html();if(g!=null&&g!=""&&g!=undefined){var e=$(this).find(".interestRate").html()=="Interest Free EMI"?0:$(this).find(".interestRate").html();var j=YatraPaymentUI.getMonthlyInterest(c,g,e);$(this).find(".monthlyEMI").html(YatraPayment.formatAmount(j));var f=YatraPaymentUI.getBankInterest(j,c,g);$(this).find(".InterestPaid").html(YatraPayment.formatInterestAmount(f,e));if(e==0){var h=c}else{var h=j*g}h=Math.round(h*100)/100;$(this).find(".total-payable-amount").html(YatraPayment.formatAmount(h))}});var d=$("#emiBank_select option:selected").val();if(d!=null&&d!=""&&d!=undefined){var a=$('input[name="'+d+'"]:checked');YatraPaymentUI.setEMITableFooterDetails(a)}},setEMITableFooterDetails:function(m){var d=m.val();var a=m.attr("name");var b=$("."+a+"-"+d).find(".InterestPaid").html();var g=YatraEWalletPaymentUI.getCashAmount();if(g==undefined||g==null||g==""||g<=0){var k=getPaymentJSON();g=k.amount}$("#emiMsg").hide();$("#noCostEmiMsg").hide();if(b==0){$(".taxmsg").hide();$(".taxmsg1").hide();var l=YatraPaymentUI.getNoCostEmiDiv(d,a,g);var f,h;try{f=JSON.parse(l)}catch(j){f=l}h="<ul style='list-style-type:disc; margin-left:25px'>";if(f.status&&f.status=="success"&&f.content&&f.content.length>0){$("#noCostEmiMsg").show();for(var c=0;c<f.content.length;c++){h=h+"<li>"+f.content[c]+"</li>"}YatraPaymentUI.isNoCostEmiFlag=true;h=h+"</ul>";$("#noCostEmiMsg").html(h);$("#emi_emiTenure_id").val(d)}else{$("#emiMsg").show();$("#emi_emiTenure_id").val(d);$("#cpmt_emiInterest").html(b);$("#cpmt_tenure").html(YatraPayment.formatAmount(d));$("#cpmt_amount").html(YatraPayment.formatAmount(g));YatraPaymentUI.isNoCostEmiFlag=false}}else{$(".taxmsg").show();if(a=="hdfc"){$(".taxmsg1").show()}else{$(".taxmsg1").hide()}$("#emiMsg").show();$("#emi_emiTenure_id").val(d);$("#cpmt_emiInterest").html(b);$("#cpmt_tenure").html(YatraPayment.formatAmount(d));$("#cpmt_amount").html(YatraPayment.formatAmount(g));YatraPaymentUI.isNoCostEmiFlag=false}},getNoCostEmiDiv:function(d,c,b){var a;$.ajax({url:"/checkout/pay/getNoCostEmiDiv?amount="+b+"&tenure="+d+"&bank="+c+"&merchantCode=yatra&productCode=dom2&super_pnr="+detailsJson.superPnr,type:"GET",async:false,timeout:"5000",cache:false,success:function(e){console.log(e);a=e},error:function(g,e,f){console.log("error in get emi div",f);a=f}});return a},onAmountChange:function(){YatraPaymentUI.generateEmiTable();if(exchangeRates&&exchangeRates.status=="true"){YatraPaymentUI.changePaypalSection()}if(parseInt($("#eCashRedeemed").val())>0){YatraEWalletPaymentUI.setRedeemUI()}else{YatraEWalletPaymentUI.setEWalletUI()}},onLogin:function(){YatraQBPaymentUI.updateQBDiv();YatraEWalletPaymentUI.updateEWalletHTML()},onLogout:function(){YatraQBPaymentUI.updateQBDiv();YatraEWalletPaymentUI.updateEWalletHTML();eCashJSON=null;redeemAuthJSON=null;reverseAuthJSON=null},clearAddressDiv:function(b){var c=$(b).parent().parent().parent().find("#qb_pmt_addressId");var a=$(b).parent().parent().parent().find("#qb_AddressShowHide");$(c).hide();$(a).hide()},handleAMEXQBCard:function(e,d,f,b){var c="#"+b+"_isCardInternational_id";var g="#"+b+"_saveQBCardAddress_id";YatraPaymentUI.enablePayNow(f);if(d==false){YatraPaymentUI.showInternationalWarning(f);$(c).val("false");$(g).val("false");return}var a=$(e).parent().parent().parent().find("#qb_AddressShowHide");if(!$(a).is(":visible")){$('#qb_AddressShowHide input:radio[name="qb_address_check_rdo"]:nth(0)').attr("checked","checked");$(c).val("false");$(g).val("false")}$(a).show()},showQuickBookBillingDiv:function(c,a,b,d){$(c).show();$(a).val("true");YatraPaymentUI.enablePayNow(b);$(d).val("true")},hideQuickBookBillingDiv:function(b,a,c){$(b).hide();$(a).val("false");$(c).val("false")},handleDomesticQBCard:function(c,a,b,d){$(c).hide();$(a).val("false");YatraPaymentUI.enablePayNow(b);$(d).val("false")},handleInternationalQBCard:function(e){var l=$(e).attr("processCardId");var c=$(e).attr("cardAccessType");var h=$(e).attr("isAddressSaved");var o=$(e).attr("cardNumber");var a=$(e).attr("cardType");var b=$(e).parent().parent().parent().find("#qb_pmt_addressId");var d="#"+l+"_isCardInternational_id";var j="#"+l+"_saveQBCardAddress_id";var k=l+"_qb";var g=YatraPaymentUI.isInternationalSupportedOnProduct();if(c==null||c=="null"||c==""||c=="undefined"){if(a=="AMEX"){YatraPaymentUI.handleAMEXQBCard(e,g,k,l)}else{if(a=="VISA"||a=="MASTER"){var n=parseInt(o.substring(0,6));var f="/PaySwift/isCardInternational.htm";$.ajax({url:f,type:"POST",data:"bin="+n,cache:false,success:function(s){var q=$.parseJSON(s);var t=q.serverDate;if("true"==q.isCardInternational){if(g==false){var r=YatraPaymentUI.intlerrorMessage;YatraPaymentUI.disablePayNow(k,r);$(d).val("false");return}var p=YatraPaymentUI.checkForTravelDate(k,t);if(p=="true"){YatraPaymentUI.showQuickBookBillingDiv(b,d,k,j)}else{YatraPaymentUI.hideQuickBookBillingDiv(b,d,j)}}else{if("false"==q.isCardInternational||"error"==q.isCardInternational){YatraPaymentUI.handleDomesticQBCard(b,d,k,j)}}},error:function(r,p,q){YatraPaymentUI.handleDomesticQBCard(b,d,k,j)}})}else{YatraPaymentUI.handleDomesticQBCard(b,d,k,j)}}}else{if("INT"==c){if(a=="VISA"||a=="MASTER"||a=="AMEX"){var m=YatraPaymentUI.checkForTravelDate(k,null);if(m=="true"){if(h=="false"){YatraPaymentUI.showQuickBookBillingDiv(b,d,k,j)}else{YatraPaymentUI.hideQuickBookBillingDiv(b,d,j)}}else{YatraPaymentUI.hideQuickBookBillingDiv(b,d,j)}}}else{if("DOM"==c){YatraPaymentUI.handleDomesticQBCard(b,d,k,j)}}}},generatePartialPaymentDiv:function(){PaymentMode.initialise()},checkPaymentModes:function(a){PaymentMode.checkPaymentModes(a)},pushLiveTrackingPageLoadData:function(){try{var c={};c.tenant=detailsJson.product;if(detailsJson.ci){c.ci=detailsJson.ci}if(detailsJson.pricingId){c.pricingId=detailsJson.pricingId}c.ttv=detailsJson.totalAmount;c.spnr=detailsJson.superPnr;c.stage="payment";c.previousStage="Traveller";c.convFee=PaymentCommon.getConvienceFee("cc");c.ttid=detailsJson.superPnr;c.referrerURL=document.referrer;c.screenHeight=screen.height;c.screenWidth=screen.width;var a="/livedata-analytics/trackLiveData";YatraPaymentUI.sendLiveTrackingAjax(JSON.stringify(c),a)}catch(b){console.log(b)}},pushGTMData:function(){try{if(detailsJson.gtmTrackingData){dataLayer.push(detailsJson.gtmTrackingData)}}catch(a){console.log(a)}},sendLiveTrackingAjax:function(b,a){try{var d;if(detailsJson.liveDataProduct){d=detailsJson.liveDataProduct}else{d="payment"}$.ajax({type:"POST",url:a,data:{trackingData:b,product:d,page:"payment"}})}catch(c){console.log(c)}},updateGSTCartUI:function(a){var b=0;$.ajax({url:"/PaySwift/pricingUpdate/GST.htm",type:"POST",async:false,timeout:"5000",data:{totalDiscount:a,superPnr:detailsJson.superPnr,product:detailsJson.product,gstUrl:detailsJson.gstUrl},cache:false,success:function(c){b=c},error:function(e,c,d){YatraPaymentUI.recordEventInSentry("Error in receiving GST Controller Response","info","GST Error")}});ShoppingCart.updateGST(b)},isGSTEnabled:function(a){if(typeof(a)!="undefined"&&a!=undefined&&a!=null&&a=="true"){return true}else{return false}},isTcsEnabled:function(a){if(typeof(a)!="undefined"&&a!=undefined&&a!=null&&a==true){return true}else{return false}},addEventsForQB:function(){$("#cc_quickOrCard").unbind();$("#dc_quickOrCard").unbind();$("#cc_quickOrCard").click(function(){binNumber="000000";$("#qb_newCreditCard").show();$("label[for=cc_quickOrCard]").hide();$("#tab_ccQB .js-quick").slideDown("slow");$("#tab_ccQB").removeClass("border-bottom");$("#tab_ccQB ul li").removeClass("active");$("#tab_ccQB ul li:first").addClass("active");var a=$('#tab_ccQB input:radio[name="cardid"]:nth(0)');$(a).prop("checked",true);YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard(a);YatraPaymentUI.enableQBCVVForCheckedCreditCard(a);if($(a).attr("cardNumberOriginal")!=null&&$(a).attr("cardNumberOriginal")!=undefined){var c=$(a).attr("cardNumberOriginal");var d=c.replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired(a,"cc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired(a,"cc",b)}});$("#dc_quickOrCard").click(function(){binNumber="000000";$("#qb_newDebitCard").show();$("label[for=dc_quickOrCard]").hide();$("#tab_dcQB .js-quick").slideDown("slow");$("#tab_dcQB").removeClass("border-bottom");$("#tab_dcQB ul li").removeClass("active");$("#tab_dcQB ul li:first").addClass("active");var a=$('#tab_dcQB input:radio[name="cardid"]:nth(0)');$(a).prop("checked",true);YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard(a);YatraPaymentUI.enableQBCVVForCheckedCreditCard(a);if($(a).attr("cardNumberOriginal")!=null&&$(a).attr("cardNumberOriginal")!=undefined){var c=$(a).attr("cardNumberOriginal");var d=c.replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired(a,"dc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired(a,"dc",b)}})},initialise:function(){YatraPayment.initialisePage();YatraPaymentUI.setDefaultClassForContinue();YatraPaymentUI.setExpiryYearData();YatraPaymentUI.addProductsToGAMap();YatraPaymentUI.addDcPinBankVsPgData();YatraPaymentUI.pushGAInfoPageView();YatraPaymentUI.enableFirstPaymentOption();YatraPaymentUI.initializeBanksPaymentUI();PaymentMode.initialise();YatraPaymentUI.generateEmiTable();YatraEWalletPaymentUI.init();YatraPaymentUI.contentSwitcher();YatraQBPaymentUI.updateQBDiv();CreditPool.initialise();CashPool.initialise();YatraCorpCardUI.initialise();YatraCorpCardUI.updateCorpCardDiv();YatraPaymentUI.pushLiveTrackingPageLoadData();YatraPaymentUI.pushGTMData();YatraPaymentUI.displayEmiTable();YatraPaymentUI.logPageLoadInSentry();var a=YatraPaymentUI.isProductRoutedOnInternationalGateway();YatraPaymentUI.showAddressDivForProductRoutedOnInternationalGateway(a);YatraPaymentUI.startSessionTimer();LOBNotification.paymentOptionChange();YatraPaymentUI.addEventsForQB();$("#corpLoginContinueBtn").on("click",function(){YatraCorpCardUI.authenticateCorporateUser()});$("#dcpinBank").on("change",function(){var b=this.value;if(b==""){$("#dcpinpaylaterlabel").hide();$("#dcpincardul").show();YatraPaymentUI.clearDcPinCardFields();YatraPaymentUI.generateDcPinLogos();return}if(dcPinBankVsPgData[b]==true){$("#dcpincardul").show();YatraPaymentUI.clearDcPinCardFields();YatraPaymentUI.generateDcPinLogos();$("#dcpinpaylaterlabel").hide()}else{if(dcPinBankVsPgData[b]==false){$("#dcpincardul").hide();$("#dcpinpaylaterlabel").show()}}$("#dcpin_bank_name").val(dcPinBankCodeVsBankName[b]);return});$(".emi-tenure-radio").on("click",function(){YatraPaymentUI.setEMITableFooterDetails($(this))});$("#cc_cno_id, #dc_cno_id, #dcpin_cno_id, #emi_cno_id, #rw_cno_id").bind("contextmenu",function(b){b.preventDefault()});$("#continue_invalid_visa").on("click",function(){$("#invalid_visa_discount_pop_up").hide();PaymentCommon.hideBlackDiv();ProcessPayment.payNow()});$("#spanEditStep1").on("click",function(){Ewallet.confirmPageChange("1")});$("#spanEditStep2").on("click",function(){Ewallet.confirmPageChange("2")});$("#undo_invalid_visa").on("click",function(){$("#invalid_visa_discount_pop_up").hide();PaymentCommon.hideBlackDiv();var c=YatraPaymentUI.getPaymentOption();var b="#tab_"+c;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange()});$("#ChangePromo").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("change promocode");PaymentCommon.hideBlackDiv();$("#invalid_promo_code_discount_pop_up").hide();var b=resp.changePromoUrl;var d=YatraPaymentUI.getPaymentOption();var c="#tab_"+d;YatraPaymentUI.clearPaymentDetails(c);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();window.location=b});$("#searchResult").on("click",function(){PaymentCommon.hideBlackDiv();$("#session_timer_pop_up").hide();var d=detailsJson.sessionTimeoutData.searchUrl;var c=YatraPaymentUI.getPaymentOption();var b="#tab_"+c;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();window.location=d});$("#latestPricing").on("click",function(){PaymentCommon.hideBlackDiv();$("#session_timer_pop_up").hide();var d=detailsJson.sessionTimeoutData.pricingUrl;var c=YatraPaymentUI.getPaymentOption();var b="#tab_"+c;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();window.location=d});$("#ChangePayOpt").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("change payment option");PaymentCommon.hideBlackDiv();$("#invalid_promo_code_discount_pop_up").hide();var c=YatraPaymentUI.getPaymentOption();var b="#tab_"+c;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();if(c=="cc"){if($("#tab_ccQB .qbLogin").length){$("label[for=cc_newCard_id]").show()}if($("#cc_newCard_id").prop("checked")){$("#cc_newCard_id").trigger("click")}else{$("#cc_quickOrCard").trigger("click")}}if(c=="dc"){if($("#tab_dcQB .qbLogin").length){$("label[for=dc_newCard_id]").show()}if($("#dc_newCard_id").prop("checked")){$("#dc_newCard_id").trigger("click")}else{$("#dc_quickOrCard").trigger("click")}}});$("#ContinueWithoutPromo").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("continue without promocode");var d=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);if(d){var b=0;if(typeof(detailsJson.discount)!="undefined"&&detailsJson.discount!=undefined){b=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]}currentGSTAmount=ShoppingCart.json[ShoppingCart.labelIndex.GST]["GST"];prevGSTAmount=currentGSTAmount;var c=ShoppingCart.totalPayableAmount;YatraPaymentUI.updateGSTCartUI(Number(YatraEWalletPaymentUI.getYLP())+Number(Math.abs(b)));YatraPaymentUI.ewalletRedemptionUpdateOnGSTIncrease(c,prevGSTAmount,currentGSTAmount)}PaymentCommon.hideBlackDiv();ShoppingCart.updatePromocode(0);$("#invalid_promo_code_discount_pop_up").hide();ProcessPayment.proceedWithPromo=false;PaymentCommon.onAmountChange();if(!d){ProcessPayment.payNow()}});$("#ChangePayOptWithPartialPromo").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("change payment option");PaymentCommon.hideBlackDiv();$("#valid_warning_promo_code_discount_pop_up").hide();var c=YatraPaymentUI.getPaymentOption();var b="#tab_"+c;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange()});$("#ContinueWithPartialPromo").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("continue without promocode'");PaymentCommon.hideBlackDiv();ShoppingCart.updatePromocode(-resp.promoAmount);$("#valid_warning_promo_code_discount_pop_up").hide();ProcessPayment.proceedWithPromo=true;PaymentCommon.onAmountChange();PaymentCommon.continueWithPayment(resp)});$("#ChangePartialPromo").on("click",function(){YatraPaymentUI.adobeTrackAfterPromoFaliure("change promocode");PaymentCommon.hideBlackDiv();$("#valid_warning_promo_code_discount_pop_up").hide();var b=resp.changePromoUrl;var d=YatraPaymentUI.getPaymentOption();var c="#tab_"+d;YatraPaymentUI.clearPaymentDetails(c);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();window.location=b});$("#ValidateFailureUrlBtn").on("click",function(){PaymentCommon.hideBlackDiv();$("#validate_error_pop_up").hide();var c=resp.lobValidationFailureUrl;var d=YatraPaymentUI.getPaymentOption();var b="#tab_"+d;YatraPaymentUI.clearPaymentDetails(b);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();window.location=c});$("#ChangeFlight").on("click",function(){PaymentCommon.hideBlackDiv();$("#pricing_error_pop_up").hide();var b=resp.priceValidationFailureUrl;var d=YatraPaymentUI.getPaymentOption();var c="#tab_"+d;YatraPaymentUI.clearPaymentDetails(c);YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();window.location=b});$("#primeFailureReviewPage").on("click",function(){PaymentCommon.hideBlackDiv();$("#prime_error_pop_up").hide();var c=resp.pricingUrl;YatraPaymentUI.clearValidationError();PaymentCommon.onAmountChange();window.location=c});$("#ContinueWithNewPrice").on("click",function(){PaymentCommon.hideBlackDiv();$("#pricing_error_pop_up").hide();PaymentCommon.onAmountChange();PaymentCommon.continueWithPayment(resp)});$("input[processCardNo=true]").on("keyup",function(h){if(h.keyCode==37||h.keyCode==39||h.keyCode==8){return false}else{var f=this.selectionStart,g=this.selectionEnd;YatraPaymentUI.disableSpace($(this));YatraPaymentUI.checkNaN($(this));var l="";l=$(this).val();if(l.length>=9&&l.substr(0,9)!=binNumber){binNumber=l.substr(0,9);var j=YatraPaymentUI.getBinDetails(l);var c=j.cardType;YatraPaymentUI.setMaestroUI(c);YatraPaymentUI.setBajajUI(c);var b=YatraPaymentUI.getPaymentOption();var k=YatraPaymentUI.getEnabledCards(b);YatraPaymentUI.setCardValidation($(this),c,b,k);YatraPaymentUI.setMaxCreditCardNumberLengthForEMI($(this),b,c);YatraPaymentUI.setMaxCVVLengthForEMI($(this),b,c);YatraPaymentUI.fadeCardLogo(c);YatraPaymentUI.setCardTypeParameter(c);if(b=="cc"||b=="emi"){YatraPaymentUI.setCvvLogo(c)}if(a==false){YatraPaymentUI.showBillingAddressDiv(b,l,j)}if(c){LOBNotification.paymentOptionChange(b,c)}this.setSelectionRange(f,g);var d=getPaymentJSON();if(detailsJson.isPassthrough=="true"&&(d.product=="crpdom_hotel"||d.product=="crpint_hotel"||d.product=="crpinthotel"||d.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}else{YatraPaymentUI.setSkipOtpUiIfRequired(c,b,l)}}}});$("input[processCardNo=true]").on("blur",function(){var c=$(this).val();if(c!=""&&c!=undefined){var b=YatraPaymentUI.getCardType(c);if(b!=""&&b!=undefined){YatraPaymentUI.callOnCardEntry("NEW",c,b)}}});$("input[processCardNo=true]").on("blur",function(){var c=$(this).val();var b=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(c,b,"cc")});$("#cc_cvv_id").on("keyup",function(){YatraPaymentUI.disableSpace($(this));YatraPaymentUI.checkNaN($(this));$("#cc_cvv").val($("#cc_cvv_id").val())});$("#dc_cvv_id").on("keyup",function(){YatraPaymentUI.disableSpace($(this));YatraPaymentUI.checkNaN($(this));$("#dc_cvv").val($("#dc_cvv_id").val())});$("#dcpin_cvv_id").on("keyup",function(){YatraPaymentUI.disableSpace($(this));YatraPaymentUI.checkNaN($(this));$("#dcpin_cvv").val($("#dcpin_cvv_id").val())});$("#emi_cvv_id").on("keyup",function(){YatraPaymentUI.disableSpace($(this));YatraPaymentUI.checkNaN($(this))});$("input[name=baisd]").on("keyup",function(){YatraPaymentUI.checkNaN($(this))});$("input[name=bamob]").on("keyup",function(){YatraPaymentUI.checkNaN($(this))});$('input:radio[name="address_check_rdo"]').on("change",function(){YatraPaymentUI.resetBillingDiv("cc");var d=$("input[name='address_check_rdo']:checked").val();var e="#cc_pmt_addressId";var c="#cc_isCardInternational_id";if(d=="Domestic"){$(e).hide();$(c).val("false");YatraPaymentUI.enablePayNow("cc")}else{if(d=="International"){var b=YatraPaymentUI.checkForTravelDate("cc",null);if(b=="true"){$(e).show();$(c).val("true");YatraPaymentUI.enablePayNow("cc")}else{$(e).hide();$(c).val("false")}}}});$('input:radio[name="processTyperdo"]').on("change",function(){YatraPaymentUI.paymentProcessType=$("input[name='processTyperdo']:checked").val()});$('input:radio[name=".processTyperdo"]').on("change",function(){YatraPaymentUI.paymentProcessType=$("input[name='processTyperdo']:checked").val()});$('input:radio[name="qb_address_check_rdo"]').on("change",function(){YatraPaymentUI.resetBillingDiv("qb");var d=$("input[name='qb_address_check_rdo']:checked").val();var f=$(this).parent().parent().parent().parent().parent().parent().parent().find("#qb_pmt_addressId");var c="#cc_isCardInternational_id";var g="#cc_saveQBCardAddress_id";var e="cc_qb";if(d=="Domestic"){YatraPaymentUI.handleDomesticQBCard(f,c,e,g)}else{if(d=="International"){var b=YatraPaymentUI.checkForTravelDate(e,null);if(b=="true"){YatraPaymentUI.showQuickBookBillingDiv(f,c,e,g)}else{YatraPaymentUI.hideQuickBookBillingDiv(f,c,g)}}}});$("input:radio[name=prBank]").click(function(){YatraPaymentUI.resetDropDown("#nprBank");$('#tab_nb > input[name="bankCode"]').val($('input[name="prBank"]:checked').val());$("#iframeEnabledFor-nb-bank").val($('input[name="prBank"]:checked').attr("iframeEnabled"));var b=$('#tab_nb > input[name="bankCode"]').val($('input[name="prBank"]:checked').val()).attr("value");var c=bankMessageJson[b];if(c!=null&&c!=""){YatraPaymentUI.showBankMessage("nb",c.message)}else{YatraPaymentUI.hideBankMessage("nb")}LOBNotification.paymentOptionChange()});$('select[name="nprBank"]').change(function(f){$('input:radio[name="prBank"]').prop("checked",false);if($('select[name="nprBank"]').val()=="Select Your Bank"||$('select[name="nprBank"]').val()==""){$('#tab_nb input:radio[name="prBank"]:nth(0)').attr("checked","checked");$('#tab_nb > input[name="bankCode"]').val($('input[name="prBank"]:checked').val());$("#iframeEnabledFor-nb-bank").val($('input[name="prBank"]:checked').attr("iframeEnabled"));var c=$('#tab_nb > input[name="bankCode"]').val($('input[name="prBank"]:checked').val()).attr("value");var d=bankMessageJson[c]}else{$('#tab_nb > input[name="bankCode"]').val($('select[name="nprBank"]').val());var b=$('select[name="nprBank"]').find("option:selected");$("#iframeEnabledFor-nb-bank").val(b.attr("iframeEnabled"));var c=$('#tab_nb > input[name="bankCode"]').val($('select[name="nprBank"]').val()).attr("value");var d=bankMessageJson[c]}if(d!=null&&d!=""){YatraPaymentUI.showBankMessage("nb",d.message)}else{YatraPaymentUI.hideBankMessage("nb")}LOBNotification.paymentOptionChange()});$('select[name="netBankDropDowm"]').change(function(g){$('input:radio[name="prBank"]').prop("checked",false);if($('select[name="netBankDropDowm"]').val()=="Select Your Bank"||$('select[name="netBankDropDowm"]').val()==""){$('#tab_nb input:radio[name="netBankDropDowm"]:nth(0)').attr("checked","checked");$('#tab_nb > input[name="bankCode"]').val($('input[name="netBankDropDowm"]:checked').val());$("#iframeEnabledFor-nb-bank").val($('input[name="netBankDropDowm"]:checked').attr("iframeEnabled"));var d=$('#tab_nb > input[name="bankCode"]').val($('input[name="netBankDropDowm"]:checked').val()).attr("value");var b=bankMessageJson[d].message}else{$('#tab_nb > input[name="bankCode"]').val($('select[name="netBankDropDowm"]').val());var c=$('select[name="netBankDropDowm"]').find("option:selected");$("#iframeEnabledFor-nb-bank").val(c.attr("iframeEnabled"));var d=$('#tab_nb > input[name="bankCode"]').val($('select[name="netBankDropDowm"]').val()).attr("value");var f=bankMessageJson[d]}if(f!=null&&f!=""){YatraPaymentUI.showBankMessage("nb",f.message)}else{YatraPaymentUI.hideBankMessage("nb")}LOBNotification.paymentOptionChange()});$("input:radio[name=atmBank]").click(function(){$('#tab_atm > input[name="bankCode"]').val($('input[name="atmBank"]:checked').val());LOBNotification.paymentOptionChange()});$("input:radio[name=walletService]").click(function(){$('#tab_mw > input[name="bankCode"]').val($('input[name="walletService"]:checked').val());var b=$('#tab_mw > input[name="bankCode"]').val($('input[name="walletService"]:checked').val()).attr("value");var c=bankMessageJson[b];if(c!=null&&c!=""){YatraPaymentUI.showBankMessage("mw",c.message)}else{YatraPaymentUI.hideBankMessage("mw")}LOBNotification.paymentOptionChange()});$("input:radio[name=payLaterService]").click(function(){$('#tab_payltr > input[name="bankCode"]').val($('input[name="payLaterService"]:checked').val());var b=$('#tab_payltr > input[name="bankCode"]').val($('input[name="payLaterService"]:checked').val()).attr("value");var c=bankMessageJson[b];if(c!=null&&c!=""){YatraPaymentUI.showBankMessage("payltr",c.message)}else{YatraPaymentUI.hideBankMessage("payltr")}LOBNotification.paymentOptionChange()});$("select[name=emiBank_select]").change(function(){;YatraPaymentUI.resetEMI();YatraPaymentUI.generateEMILogos($(this).val());if($(this).val()=="bajaj"){$("#emiExpMonth").hide();$("#emiExpYear").hide();$("#emiCvv").hide();$("#tncEMI").prop("href","https://www.yatra.com/online/tnc-bajaj-finance")}else{$("#emiExpMonth").show();$("#emiExpYear").show();$("#emiCvv").show();$("#tncEMI").prop("href","https://www.yatra.com/fresco/online/journal-article-emi-ax")}var b=3;var c=12;if(disableEMICondition[$(this).val()]&&disableEMICondition[$(this).val()][2]){b=2}if(disableEMICondition[$(this).val()]&&disableEMICondition[$(this).val()][18]){c=18}if(disableEMICondition[$(this).val()]&&!(disableEMICondition[$(this).val()][b].min<=ShoppingCart.getTotalCartAmount()&&disableEMICondition[$(this).val()][c].max>ShoppingCart.getTotalCartAmount())){YatraPaymentUI.disableEMI($(this).val(),disableEMICondition[$(this).val()][c].max<=ShoppingCart.getTotalCartAmount()?true:false)}else{YatraPaymentUI.enableEMI($(this).val());let cAmt=ShoppingCart.getTotalCartAmount();let selEmiOpt=$(this).val();if(cAmt&&selEmiOpt){YatraPaymentUI.disableEmiDetails(cAmt,selEmiOpt)}}$("#emi_cardholder_name_id").val("")});$("#cc_saveQBCard").click(function(){if($("#cc_saveQBCard").is(":checked")){$("#cc_saveQuickBookCard_id").val("true")}else{$("#cc_saveQuickBookCard_id").val("false")}});$("#dc_saveQBCard").click(function(){if($("#dc_saveQBCard").is(":checked")){$("#dc_saveQuickBookCard_id").val("true")}else{$("#dc_saveQuickBookCard_id").val("false")}});$("select").change(function(){if($(this).attr("paramId")!=undefined){$("#"+$(this).attr("paramId")).val($(this).val())}});$("#cc_bcountry").change(function(b){$("#cc_bcountry_name").val($("#cc_bcountry option:selected").text())});$("#dc_bcountry").change(function(b){$("#dc_bcountry_name").val($("#cc_bcountry option:selected").text())});$("#rw_cno_id").on("focus",function(b){$("#error-rwCnoRequired").hide()});$("#other_payop").click(function(){var b=YatraPaymentUI.getPaymentOption();YatraPaymentUI.enablePayNow(b);YatraPaymentUI.notifyPayopToLOB();if(b!=="gv"){YatraPaymentUI.changePayNowButtonLabel(detailsJson.product)}});$("#other_payop").on("change",function(){var b=$("#other_payop option:selected").val();if(b=="cc"){if($("#tab_ccQB .qbLogin").length){$("label[for=cc_newCard_id]").show()}if($("#cc_newCard_id").prop("checked")){$("#cc_newCard_id").trigger("click")}else{$("#cc_quickOrCard").trigger("click")}}if(b=="dc"){if($("#tab_dcQB .qbLogin").length){$("label[for=dc_newCard_id]").show()}if($("#dc_newCard_id").prop("checked")){$("#dc_newCard_id").trigger("click")}else{$("#dc_quickOrCard").trigger("click")}}});$("#rw_cno_id").on("keyup",function(b){var c=$("#rw_cno_id").val();if(c.length>=8){YatraPaymentUI.validateRewardCardNumber(c)}else{if(c.length<8){$("#error-rwCnoValid").hide();rwConversion="";$("#rw_reward_points_id").val("");$("#rw_reward_amount_id").val("")}}});$("#rw_cno_id").bind({paste:function(){$("#rw_reward_points_id").val("");$("#rw_reward_amount_id").val("")}});$("#rw_reward_points_id").on("keyup",function(b){YatraPaymentUI.checkNaN($(this));if($("#rw_cno_id").val()==""||$("#rw_cno_id").val().length<8){$("#error-rwCnoRequired").show();$($(this)).val("")}else{if($("#rw_reward_points_id").val()==null||$("#rw_reward_points_id").val()==""){$("#rw_reward_amount_id").val("")}else{YatraPaymentUI.calRewardAmount(rwConversion)}}});$("#cc_newCard_id").click(function(){if($("#qb_newCreditCard").is(":visible")){$("#tab_ccQB").addClass("border-bottom")}$("#payWithQB").html("Pay with Credit Card");if($("#payWithQB").is(":visible")){$("#cc_newCard .heading-p").hide()}$("#qb_newCreditCard").hide();$("label[for=cc_quickOrCard]").show();$("#tab_ccQB .js-quick").slideUp("slow");$("#tab_ccQB .js-quick li").removeClass("active");$("#tab_ccQB > input:radio[name=cardid]").prop("checked",false);$("#tab_ccQB .custom-Radiobox > input:checked + .box > .tick").parents("label").addClass("selChecked");$("#cc_newCard").show();$('#tab_cc_qb > input[name="payop"]').val("cc");$("#qb_newCreditCard").removeClass("selChecked");YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=cc]"));YatraPaymentUI.hideErrorMessage("cc_qb");$("#qb_password_cc").val("");YatraPaymentUI.resetCreditCard();YatraPaymentUI.notifyPayopToLOB();YatraPaymentUI.pushGAInfoForQuickBook("Use New Card");YatraPaymentUI.changePayNowButtonLabel(detailsJson.product);LOBNotification.paymentOptionChange();try{var b=getPaymentJSON();if(detailsJson.isPassthrough=="true"&&(b.product=="crpdom_hotel"||b.product=="crpint_hotel"||b.product=="crpinthotel"||b.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}}catch(c){console.log(c)}});$("#dc_newCard_id").click(function(){if($("#qb_newDebitCard").is(":visible")){$("#tab_dcQB").addClass("border-bottom")}$("#qb_newDebitCard").hide();$("label[for=dc_quickOrCard]").show();$("#payWithQB").html("Pay with Debit Card");if($("#payWithQB").is(":visible")){$("#dc_newCard .heading-p").hide()}$("#tab_dcQB .js-quick").slideUp("slow");$("#tab_dcQB .js-quick li").removeClass("active");$("#tab_dcQB > input:radio[name=cardid]").prop("checked",false);$("#tab_dcQB .custom-Radiobox > input:checked + .box > .tick").parents("label").addClass("selChecked");$("#dc_newCard").show();$('#tab_dc_qb > input[name="payop"]').val("dc");$("#qb_newDebitCard").removeClass("selChecked");YatraPaymentUI.disableQBCVVForDebitCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.disableMultiFlowUiForDebitCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=dc]"));YatraPaymentUI.hideErrorMessage("dc_qb");$("#qb_password_dc").val("");YatraPaymentUI.resetDebitCard();YatraPaymentUI.notifyPayopToLOB();YatraPaymentUI.pushGAInfoForQuickBook("Use New Card");YatraPaymentUI.changePayNowButtonLabel(detailsJson.product);LOBNotification.paymentOptionChange();try{var b=getPaymentJSON();if(detailsJson.isPassthrough=="true"&&(b.product=="crpdom_hotel"||b.product=="crpint_hotel"||b.product=="crpinthotel"||b.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}}catch(c){console.log(c)}});$("#tab_ccQB").on("click",".selChecked",function(){$(this).removeClass("selChecked")});$("#tab_dcQB").on("click",".selChecked",function(){$(this).removeClass("selChecked")});$(".qb_ccCVV").on("click",function(){var b=$(this).attr("id");var g=$("#"+b).parent().parent().attr("for");$("input[id="+g+"]").prop("checked","true");$("input[name=cardid]:checked").parents("li").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableNewCreditCard();YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.setActiveClass($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.enableQBCVVForCheckedCreditCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.clearValidationError();YatraPaymentUI.hideErrorMessage("cc");YatraPaymentUI.notifyPayopToLOB();var f=$(this).val();var l=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(f,l+35,"qb");LOBNotification.paymentOptionChange();var c=$("input:radio[processCardId=cc]:checked").attr("id");$("#qb_pmt_MultiFlowId_"+c).show();try{var d=getPaymentJSON();if(detailsJson.isPassthrough=="true"&&(d.product=="crpdom_hotel"||d.product=="crpint_hotel"||d.product=="crpinthotel"||d.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}else{if($("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal")!=null&&$("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal")!=undefined){var k=$("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal").replace(/-/g,"");var j=YatraPaymentUI.getBinDetails(k);YatraPaymentUI.setSkipOtpUiForQBIfRequired($("input:radio[processCardId=cc]:checked"),"cc",j);YatraPaymentUI.setMultiPayUiForQBIfRequired($("input:radio[processCardId=cc]:checked"),"cc",j)}}}catch(h){console.log(h)}});$("#tab_ccQB").on("click","input:radio[processCardId=cc]",function(){$("input[name=cardid]:checked").parents("li").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableNewCreditCard();YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.setActiveClass($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.enableQBCVVForCheckedCreditCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard($("input:radio[processCardId=cc]:checked"));YatraPaymentUI.clearValidationError();YatraPaymentUI.hideErrorMessage("cc");YatraPaymentUI.notifyPayopToLOB();var j=$(this).val();var d=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(j,d+35,"qb");LOBNotification.paymentOptionChange();var h=$("input:radio[processCardId=cc]:checked").attr("id");$("#qb_pmt_MultiFlowId_"+h).show();try{var c=getPaymentJSON();if(detailsJson.isPassthrough=="true"&&(c.product=="crpdom_hotel"||c.product=="crpint_hotel"||c.product=="crpinthotel"||c.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}else{if($("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal")!=null&&$("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal")!=undefined){var f=$("input:radio[processCardId=cc]:checked").attr("cardNumberOriginal").replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(f);YatraPaymentUI.setSkipOtpUiForQBIfRequired($("input:radio[processCardId=cc]:checked"),"cc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired($("input:radio[processCardId=cc]:checked"),"cc",b)}}}catch(g){console.log(g)}});$(".qb_dcCVV").on("click",function(){var k=$(this).attr("id");var f=$("#"+k).parent().parent().attr("for");$("input[id="+f+"]").prop("checked","true");$("input[name=cardid]:checked").parents("li").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableNewDebitCard();YatraPaymentUI.disableQBCVVForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.disableMultiFlowUiForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.enableQBCVVForCheckedDebitCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.clearValidationError();YatraPaymentUI.hideErrorMessage("dc");YatraPaymentUI.notifyPayopToLOB();var j=$(this).val();var c=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(j,c+35,"qb");LOBNotification.paymentOptionChange();var h=$("input:radio[processCardId=dc]:checked").attr("id");$("#qb_pmt_MultiFlowId_"+h).show();try{if(detailsJson.isPassthrough=="true"&&(paymentJson.product=="crpdom_hotel"||paymentJson.product=="crpint_hotel"||paymentJson.product=="crpinthotel"||paymentJson.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}else{if($("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal")!=null&&$("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal")!=undefined){var d=$("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal").replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired($("input:radio[processCardId=dc]:checked"),"dc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired($("input:radio[processCardId=dc]:checked"),"dc",b)}}}catch(g){console.log(g)}});$("#tab_dcQB").on("click","input:radio[processCardId=dc]",function(){$("input[name=cardid]:checked").parents("li").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableNewDebitCard();YatraPaymentUI.disableQBCVVForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.disableMultiFlowUiForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.enableQBCVVForCheckedDebitCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.clearAddressDiv($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard($("input:radio[processCardId=dc]:checked"));YatraPaymentUI.clearValidationError();YatraPaymentUI.hideErrorMessage("dc");YatraPaymentUI.notifyPayopToLOB();var h=$(this).val();var c=$(".cpmt_Paymentdiv").offset().top;PaymentCommon.handleVisaDiscountCommon(h,c+35,"qb");LOBNotification.paymentOptionChange();var g=$("input:radio[processCardId=dc]:checked").attr("id");$("#qb_pmt_MultiFlowId_"+g).show();try{if(detailsJson.isPassthrough=="true"&&(paymentJson.product=="crpdom_hotel"||paymentJson.product=="crpint_hotel"||paymentJson.product=="crpinthotel"||paymentJson.product=="crpdomhotel")){YatraPaymentUI.disableCVVforGdsFlow()}else{if($("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal")!=null&&$("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal")!=undefined){var d=$("input:radio[processCardId=dc]:checked").attr("cardNumberOriginal").replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(d);YatraPaymentUI.setSkipOtpUiForQBIfRequired($("input:radio[processCardId=dc]:checked"),"dc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired($("input:radio[processCardId=dc]:checked"),"dc",b)}}}catch(f){console.log(f)}});$("input:radio[processCardId=corpCard]").on("click",function(){YatraCorpCardUI.handleCorpUI($(this));YatraPaymentUI.clearValidationError();YatraPaymentUI.hideErrorMessage("corpCard");YatraPaymentUI.notifyPayopToLOB();LOBNotification.paymentOptionChange();$(this).parents("li").addClass("active").siblings().removeClass("active")});$("#tab_ccQB").on("keyup","input[processCVV=ccCVV]",function(){YatraPaymentUI.checkNaN($(this));$("#cc_cvv").val($(this).val())});$("#tab_dcQB").on("keyup","input[processCVV=dcCVV]",function(){YatraPaymentUI.checkNaN($(this));$("#dc_cvv").val($(this).val())});$("input[processCVV=corpCardCVV]").on("keyup",function(){YatraPaymentUI.checkNaN($(this));$("#corpCard_cvv_id").val($(this).val())});$("input[processQBPassword=true]").on("click",function(){YatraPaymentUI.disableNewCreditCard();YatraPaymentUI.disableNewDebitCard()});$("#rewards_pay_now").on("click",function(){if(typeof(proceedPayNow)=="function"){proceedPayNow()}});$("#rewards_enter_points").on("click",function(){$("#popoverWindowOverlay-rewards").hide();$("#popoverWindow-rewards").hide();$("#rw_reward_points_id").focus()});$("#citiEmiPopoupProceed").on("click",function(){if($("#citiEmiPopoupChecked").is(":checked")){isCitiEmiPopupTncValidated=true;var b="#"+getContinueButtonId();$(b).click()}});$("#citiEmiPopoupCancel").on("click",function(){$("#citi-emi-popup-modal").hide();$("#citi-emi-popup").hide();isCitiEmiPopupTncValidated=false});$("#itineraryDetailHeader .totalPayInf h2").on("click",function(){$("#containerScroll").slideToggle("slow");$(this).parents("#itineraryDetailHeader").toggleClass("hide-buk-sum")})},getPaymentOptionTab:function(){return $("#tab_"+YatraPaymentUI.getPaymentOption()).clone()},validateRewardPoints:function(){var b=true;var a=YatraPaymentUI.getPaymentOption();if(a=="rewards"){if(!YatraPaymentUI.validateRewardCardNumber($("#rw_cno_id").val())){b=false}else{if(typeof(proceedPayNow)=="function"&&$("#rw_reward_points_id").val()==""){$("#popoverWindowOverlay-rewards").show();$("#popoverWindow-rewards").show();b=false}}}return b},validateCitiEmiTnc:function(){if(!YatraPaymentUI.isPayopCitiEmI()){return true}if(isCitiEmiPopupTncValidated){return true}$("#citi-emi-popup-modal").show();$("#citi-emi-popup").show()},isPayopCitiEmI:function(){if(YatraPaymentUI.getPaymentOption()=="emi"&&$("#emiBank_select option:selected").val()=="citi"){return true}return false},eligibleForIframePayment:function(){var b=false;var c=YatraPayment.getPayOp();var a=$("#cpmt_tabmenu > li.active > a").attr("iframeEnabled");if(a==undefined){a=$("#cpmt_tabmenu > li> ul> li.active > a").attr("iframeEnabled")}if(c=="nb"&&a=="true"){if($("#iframeEnabledFor-nb-bank").val()=="true"){b=true}}return b},processPendingPayment:function(){var a=confirm("Please confirm if your money is deducted ?");if(a){YatraPaymentUI.queryPaymentPortal()}},queryPaymentPortal:function(){var b=getPaymentJSON();var a=b.superPNR;$.ajax({url:"/checkout/pay/query.htm?ttid="+a+"&mode=qtxns",cache:false,success:function(c){console.log(c)},error:function(e,c,d){}})},callOnCardEntry:function(c,b,a){if(typeof onCardEntry=="function"){onCardEntry(c,b,a)}},bankDownMesage:function(){var a="/PaySwift/getBankDownMessage.htm";$.ajax({url:a,timeout:(5*1000),type:"POST",async:false,data:{},cache:false,success:function(b){bankMessageJson=JSON.parse(b)},error:function(d,b,c){alert("Error while getting quickbook cards.")}})},getPayAtHotelAmount:function(a){if(!a){return 0}return parseFloat(a)},showHotelMessage:function(a,b){if(("HOTEL_IN"==a||"tgdomhotel"==a)&&YatraPaymentUI.getPayAtHotelAmount(b)>0){if("HOTEL_IN"==a){$("#pay-at-hotel-msg-box_id").show()}else{$("#pay-at-tg-msg-box_id").show()}$(".totalPrice .you-pay-txt").text("Pay Now");$("#ecash_container").hide()}},showFareBreakUpMessage:function(a){if(!a){$("#farebreakup_msg_id").hide()}$("#farebreakup_subMsg_id").text(a)},showYouPayMessage:function(a){if(!a){$("#youPay_msg_id").hide()}$("#youPay_subMsg_id").text(a)},changePayNowButtonLabel:function(a){$("#payNow").show();if("INT_HOTEL_BKG"==a){$("#payNow").val("Confirm Booking");$(".contiue-section .mobilePay").addClass("hideForHotel");$("body").addClass("pah-hack-only");$("#tcStrip_id").text("Confirm Booking");var b=detailsJson.hotelDepositRequired;if(typeof(b)!="undefined"&&b!=undefined&&b!=null&&b=="true"){$(".totalPrice .you-pay-txt").text("Pay Later")}else{$(".totalPrice .you-pay-txt").text("Pay at Hotel")}}},showStaticMessage:function(a){if(a.headerMessages){if(a.payLaterFlow&&a.payLaterFlow=="true"){$("#payLaterHeaderMessages_id").show();$(".totalPrice .you-pay-txt").text("Total Booking Amount");$(".totalPricenow").show();$(".totalPayInf").css("margin-top","-35px")}else{$("#headerMessage_id").show()}}else{$("#payLaterHeaderMessages_id").hide();$("#headerMessage_id").hide()}},addAdobeProduct:function(){adobeProductMap.HOTEL_IN="dom|domestic|hotel|web";adobeProductMap.HOLIDAY_IN="dom|domestic|holiday|web";adobeProductMap.HOLIDAYS_OB="dom|domestic|holiday|web";adobeProductMap.dom2="dom|domestic|flight|web";adobeProductMap.int2="int|international|flight|web";adobeProductMap.bus="dom|domestic|bus|web";adobeProductMap.HOLIDAY_WAP="dom|domestic|holiday|wap";adobeProductMap.trainngetb2c="dom|domestic|train|web";adobeProductMap.trainngetwap="dom|domestic|train|wap";adobeProductMap.INT_HOTEL_BKG="int|international|hotel|web";adobeProductMap.homestays="dom|domestic|homestay|web";adobeProductMap.busdesktop="dom|domestic|bus|web";adobeProductMap.buswap="dom|domestic|bus|wap|web";adobeProductMap.HOLIDAYS_MP_ONLINE="dom|domestic|holiday|web";adobeProductMap.activities="dom|domestic|activity|web";adobeProductMap.metadom="dom|domestic|flight|web";adobeProductMap.metaint="int|international|flight|web";adobeProductMap.HOLIDAYS_SAPG="dom|domestic|holiday|web";adobeProductMap.HOLIDAYS_SAPG_OB="dom|domestic|holiday|web";adobeProductMap.mdomsbi="dom|domestic|flight|web";adobeProductMap.mintsbi="int|international|flight|web";adobeProductMap.mdomhotelsbi="dom|domestic|hotel|web";adobeProductMap.mbussbi="dom|domestic|bus|web";adobeProductMap.INT_HOTEL="int|international|hotel|web";adobeProductMap.INT_HOTEL_TRM="int|international|hotel|web"},getAdobeJSON:function(k){try{var f=k.product;if(adobeProductMap[f]!=""&&typeof adobeProductMap[f]!="undefined"){var v="";var E="yt";var z="";var g="web";var b="business";var t=null;var q="";var C="";var I="payment";var c="";var j="Guest";var l="";var u=YatraPaymentUI.getCookie("SessionVX")?YatraPaymentUI.getCookie("SessionVX"):"";var n=YatraPaymentUI.getCookie("userName");var l="";if(n!=null&&n!=""&&n!="undefined"){j="logged-in"}var H=adobeProductMap[f];var y=H.split("|");z=y[0];v=y[2];g=y[3];q=v+" checkout";C=y[1]+" "+v;var a=E+":"+v+":"+z+":checkout:payment";var h={pageName:a,lob:v,sessionID:u};var B={pageType:b,primaryCategory:q,subCategory1:C,subCategory2:I,subCategory3:c};var J={loginStatus:j,userID:""};page.pageInfo=h;page.category=B;digitalDataAdobe.page=page;if(typeof k.adobeTrackPaymentLoad!="undefined"&&typeof k.adobeTrackPaymentLoad[v]!="undefined"){l=k.adobeTrackPaymentLoad[v];if(v&&v.toLowerCase()==="hotel"){var d=(k.adobeTrackPaymentLoad[v].hotelInfo&&k.adobeTrackPaymentLoad[v].hotelInfo.isPayPerUse==="true")?"yes":"no";l.hotelInfo.ppuused=d;if(d==="yes"){l.hotelInfo.hotelflowtype="hotel flow type:ppu"}else{l.hotelInfo.hotelflowtype="hotel flow type:normal"}l.hotelInfo.weekendWidget=(k.adobeTrackPaymentLoad[v].hotelInfo&&k.adobeTrackPaymentLoad[v].hotelInfo.isWeekendgetAway==="true")?"selected":"not selected";l.hotelInfo.smartHotel=(k.adobeTrackPaymentLoad[v].hotelInfo&&k.adobeTrackPaymentLoad[v].hotelInfo.isYatraSmart==="true")?"selected":"not selected"}}if(typeof digitalDataAdobe.transaction=="undefined"){digitalDataAdobe.transaction={}}digitalDataAdobe[v]=l;digitalDataAdobe.events="Payment Page";var A=v+"Info";try{var G=digitalDataAdobe[v][A]["tenant"]}catch(F){console.log("tenant not present in lob info from booking details")}if(typeof G=="undefined"){G="B2C"}digitalDataAdobe.transaction.thirdPartyVendorID=G;var p=false;if(qbJson!=null&&typeof(qbJson)!="undefined"&&qbJson!=""&&qbJson!="null"){var w=$.parseJSON(qbJson);if(w!=null&&typeof(w.status)!="undefined"){if(w.status=="ENABLED"){if(w.authenticationFailed||w.authenticationRequired){}else{p=true}}}}var s=detailsJson.sessionTimeoutData;if(s&&s.pricingTime!=undefined&&s.pricingTime!=""&&s.currentTime!=undefined&&s.currentTime!=""&&s.timeout>0){var D=new Date(s.currentTime);var o=new Date(s.pricingTime);var m=D-o;var r=Math.floor(m/1000);digitalDataAdobe.timeOnReview=r}digitalDataAdobe.cardshown=p?"shown":"not shown";if(typeof yt_adobe!="undefined"){yt_adobe.track("virtualPageView",digitalDataAdobe)}}}catch(F){console.log("some issue in sending adobe data on load")}},getCookie:function(b){var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}},computeAmount:function(a){var b=ShoppingCart.getTotalCartAmount();return YatraPayment.formatAmount((b/a).toFixed(2))},showConvertedAmount:function(){$("#paypalContainer input").on("click",function(){$(".paypal_pmt_msg_INFO").hide();var a=YatraPaymentUI.getPaymentOption();$("input[name=paypal]:checked","#paypalContainer").parents(".paypal-block-sel").addClass("active").siblings().removeClass("active");$("#convertedAmountPaypal, #mobile-conv").html("<p id='showConverstion'><span> 1 "+$("input[name=paypal]:checked","#paypalContainer").attr("id")+" = </span><span>"+$("input[name=paypal]:checked","#paypalContainer").attr("forexrate")+" </span><span>INR</span></p>");if(a==="paypal"){if($("input[name=paypal]:checked","#paypalContainer").attr("id")=="INR"){$("#paypalINRHelper").show();$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}else{$("#paypalINRHelper").hide();$("#convertedAmountPaypal, #mobile-conv").css("visibility","visible");$("#showConverstion").css("visibility","visible")}}})},populatePaypalSection:function(){if(exchangeRates&&exchangeRates.status=="true"){var b=$("#paypalContainer");for(var d=0;d<exchangeRates.currencies.length;d++){var f=$(".paypal-block-sel").first().clone();f.find("label").attr("for",exchangeRates.currencies[d].code);f.find("input").attr("id",exchangeRates.currencies[d].code);f.find("input").attr("forexrate",exchangeRates.currencies[d].rate);f.find("input").attr("forexamount",this.computeAmount(exchangeRates.currencies[d].rate));f.find(".currency-name").append(exchangeRates.currencies[d].code+"  <span class='cur-name'>("+exchangeRates.currencies[d].name+") </span>");var g=exchangeRates.currencies[d].unicode.replace("U+","&#x");f.find(".currency-sign").html(g);f.find("input").attr("currencysymbol",g);var c=this.computeAmount(exchangeRates.currencies[d].rate);f.find(".amount-usd").text(c);b.append(f);if(exchangeRates.currencies[d].code=="INR"){b.append('<div id="paypalINRHelper"  class="paypalINRHelper" style="display:none"> <p> <i class="ico_info_paySwift PaymentSprite"></i> INR is allowed only for Indian registered PayPal accounts</p> </div>')}}}var a=(exchangeRates.defaultCurrency)?exchangeRates.defaultCurrency:exchangeRates.currencies[0].code;this.showConvertedAmount();var e=$("#paypalContainer").find("#"+a);if(e.length){}else{}},changePaypalSection:function(){var b=this;var a=YatraPaymentUI.getPaymentOption();$("#paypalContainer .amount-usd").each(function(c,d){$(this).text(b.computeAmount(exchangeRates.currencies[c].rate))});$("#paypalContainer input").each(function(c,d){$(this).attr("forexamount",b.computeAmount(exchangeRates.currencies[c].rate))});$("#convertedAmountPaypal, #mobile-conv").html("<p id='showConverstion'><span> 1 "+$("input[name=paypal]:checked","#paypalContainer").attr("id")+" = </span><span>"+$("input[name=paypal]:checked","#paypalContainer").attr("forexrate")+" </span><span>INR</span></p>");if(a==="paypal"){if($("input[name=paypal]:checked","#paypalContainer").attr("id")=="INR"){$("#paypalINRHelper").show();$("#convertedAmountPaypal, #mobile-conv").css("visibility","hidden");$("#showConverstion").css("visibility","hidden")}else{$("#paypalINRHelper").hide();$("#convertedAmountPaypal, #mobile-conv").css("visibility","visible");$("#showConverstion").css("visibility","visible")}}},callForRecalculatingTcs:function(c){var a=c?(ShoppingCart.getTotalCartAmount()+c-ShoppingCart.tcsAmount):ShoppingCart.getTotalCartAmount();a=GV.totalGVAmount()>0?(ShoppingCart.getTotalCartAmount()+c-ShoppingCart.tcsAmount):ShoppingCart.getTotalCartAmount();if(GV.totalGVAmount()>0&&ShoppingCart.getTotalCartAmount()<ShoppingCart.tcsAmount&&GV.balanceAmountAfterGV<2){return}else{if(GV.totalGVAmount()>0&&ShoppingCart.getTotalCartAmount()==0){if($('input:radio[name="payOption"]:checked').val()=="payPartial"){a=detailsJson.partialPayment.partialPayAmount}else{if($('input:radio[name="payOption"]:checked').val()=="holdAndPay"){a=detailsJson.holdPayment.holdAmount}else{a=detailsJson.totalAmount}}}else{a=ShoppingCart.getTotalCartAmount()+GV.totalGVAmount()}}var b="/holidays/recalculateTCS.htm";$.ajax({url:b,timeout:(5*1000),type:"POST",async:false,data:{superPnr:detailsJson.superPnr,totalPayableAmount:a},cache:false,success:function(d){$("#fareBreakup-TCS")[0].textContent=YatraHelper.formatPrice(d.tcs.totalTCSAmount);totall=Number(ShoppingCart.getTotalCartAmount())+Number(d.tcs.totalTCSAmount);if(Ewallet.ecashRedeemedAmount>0&&Ewallet.ecashRedeemedAmount>Number(ShoppingCart.getTotalCartAmount())){totall=ShoppingCart.getTotalCartAmount();var f=Ewallet.ecashRedeemedAmount-(ShoppingCart.getTotalCartAmount()-ShoppingCart.tcsAmount);console.log("You Pay",d.tcs.totalTCSAmount-ShoppingCart.tcsAmount)}if(GV.totalGVAmount()>0&&ShoppingCart.getTotalCartAmount()==0){var g=$('input:radio[name="payOption"]:checked').val();if(g=="payPartial"){totall=Number(detailsJson.partialPayment.partialPayAmount)+Number(d.tcs.totalTCSAmount)-GV.totalGVAmount()-Ewallet.ecashRedeemedAmount}else{if(g=="holdAndPay"){totall=Number(detailsJson.holdPayment.holdAmount)+Number(d.tcs.totalTCSAmount)-GV.totalGVAmount()-Ewallet.ecashRedeemedAmount}else{totall=Number(detailsJson.totalAmount)+Number(ShoppingCart.tcsAmount)-GV.totalGVAmount()-Ewallet.ecashRedeemedAmount}}try{console.log($('input:radio[name="payOption"]:checked').val());console.log(Number(detailsJson.partialPayment.partialPayAmount)+Number(d.tcs.totalTCSAmount)-GV.totalGVAmount());console.log(Number(detailsJson.holdPayment.holdAmount)+Number(d.tcs.totalTCSAmount)-GV.totalGVAmount())}catch(e){console.log(e)}}GV.balanceAmountAfterGV=totall;ShoppingCart.totalPayableAmount=totall;PaymentCommon.changePayNowLabel(detailsJson.product);if(totall==0){YatraEWalletPaymentUI.hidePaymentDiv()}if(GV.totalGVAmount()>0){YatraEWalletPaymentUI.setEWalletUI()}$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(totall));$("#totalAmountSpann").html(YatraHelper.formatPrice(totall));ShoppingCart.tcsAmount=d.tcs.totalTCSAmount},error:function(f,d,e){alert("Error while getting recalculatd TCS value.")}})}};LOBNotification={paymentChangeNotification:b2bProducts.split(","),previousPaymentType:null,previousPaymentOption:null,paymentType:"",paymentOption:"",cardBrand:"",paymentOptionChange:function(b,c){var g=getPaymentJSON();var j=g.product;if(!f(j)){return}this.paymentType=c;this.paymentOption=b;this.cardBrand="";if(!this.paymentOption){this.paymentOption=YatraPayment.getPayOp()}switch(this.paymentOption){case"cc":a();break;case"dc":a();break;case"qb":var e=YatraPayment.getPaymentDiv();var d=$(e+" input[name= cardid]:checked");LOBNotification.paymentType=$(d).attr("processcardid");LOBNotification.cardBrand=$(d).attr("cardType");LOBNotification.sendNotification();break;case"corpCard":LOBNotification.cardBrand=$("#corpCard_cardBrand_id").val();LOBNotification.paymentType=$("#corpCard_cardType_id").val();LOBNotification.sendNotification();break;case"emi":a();break;case"paypal":LOBNotification.paymentType="PAYPAL";LOBNotification.sendNotification();break;case"upi":LOBNotification.paymentType="UPI";LOBNotification.sendNotification();break;case"tez":LOBNotification.paymentType="TEZ";LOBNotification.sendNotification();break;case"rewards":a();break;case"cashCard":LOBNotification.paymentType=$("#tab_"+LOBNotification.paymentOption+' > input[name="payop"]').val();LOBNotification.sendNotification();break;case"mw":h();break;case"itz":h();break;case"atm":h();break;case"nb":h();break;case"cp":LOBNotification.paymentType="NA";LOBNotification.cardBrand="NA";LOBNotification.sendNotification();break;case"ec":h();break;default:}function f(l){for(var k=0;k<LOBNotification.paymentChangeNotification.length;k++){if(l==LOBNotification.paymentChangeNotification[k]){return true}}return false}function h(){LOBNotification.paymentType=$("#tab_"+LOBNotification.paymentOption+' > input[name="bankCode"]').val();LOBNotification.sendNotification()}function a(){LOBNotification.paymentType=typeof LOBNotification.paymentType=="undefined"?"NA":LOBNotification.paymentType;LOBNotification.sendNotification()}},sendNotification:function(){console.log("Payment option changed "+LOBNotification.paymentType+"  "+LOBNotification.paymentOption);try{var a={paymentOption:LOBNotification.paymentOption,paymentType:LOBNotification.paymentType,cardBrand:""};if(LOBNotification.cardBrand){a.cardBrand=LOBNotification.cardBrand}paymentOptionChange(a)}catch(b){console.log(b)}LOBNotification.previousPaymentOption=LOBNotification.paymentOption;LOBNotification.previousPaymentType=LOBNotification.paymentType}};PaymentMode={partialEnabledForProduct:false,holdAndPayEnabledForProduct:false,checkPaymentModes:function(f){var a=YatraPaymentUI.getPaymentOption();var e=PaymentMode.partialEnabledForProduct&&partial_payOpArr.indexOf(a)>=0;var b=PaymentMode.holdAndPayEnabledForProduct&&holdAndPay_payOpArr.indexOf(a)>=0;(e)?$("#partial_payment_div").show():$("#partial_payment_div").hide();(b)?$("#hold_pay_div").show():$("#hold_pay_div").hide();$('#partialPaymentDiv input:radio[name="payOption"]').each(function(){$(this).prop("checked",false)});if(!e&&!b){$("#partialPaymentDiv").hide();$('input:radio[name="payOption"]:first').prop("checked",true)}else{$("#partialPaymentDiv").show();var g=PaymentMode.selPaymentMode;var d=(e&&g=="partPayOption")||(b&&g=="holdAndPayOption");if(!d){var c=$('input:radio[name="payOption"]:nth(0)');$(c).prop("checked",true)}else{$("#"+PaymentMode.selPaymentMode).prop("checked",true)}}PaymentMode.notifyPartial()},initialise:function(){var c=getPaymentJSON();var d=c.product;var a=c.holdAndPay&&(c.holdAndPay.isEligibleForHold=="true"||c.holdAndPay.isEligibleForHold===true);var b=c.partialpayment&&(c.partialpayment.isEligibleForPartial==="true"||c.partialpayment.isEligibleForPartial===true);this.partialEnabledForProduct=b&&PaymentMode.isPayModeSupportedOnProduct(partialPay_productsArr,d);this.holdAndPayEnabledForProduct=a&&PaymentMode.isPayModeSupportedOnProduct(holdAndPay_productsArr,d);if(this.partialEnabledForProduct){YatraPaymentUI.setElementText("payNowAmount",c.partialpayment.payNowAmount);YatraPaymentUI.setElementText("partialPayNowAmount",c.partialpayment.partialPayNowAmount);YatraPaymentUI.setElementText("partialPayLaterAmount",c.partialpayment.partialPayLaterAmount);$("#partial_payment_div").show()}if(this.holdAndPayEnabledForProduct){YatraPaymentUI.setElementText("payNowAmount",c.holdAndPay.payNowAmount);YatraPaymentUI.setElementText("holdAndPayNowAmount",c.holdAndPay.holdAndPayNowAmount);$("#hold_pay_div").show()}if(c.partialpayment&&c.partialpayment.isSelected&&c.partialpayment.isSelected=="true"){$('input:radio[name="payOption"]:nth(1)').attr("checked","checked")}else{if(c.holdAndPay&&c.holdAndPay.isSelected&&c.holdAndPay.isSelected=="true"){$('input:radio[name="payOption"]:nth(2)').attr("checked","checked")}else{$('input:radio[name="payOption"]:nth(0)').attr("checked","checked")}}this.selPaymentMode=$("input:radio[name=payOption]:checked").attr("id");PaymentMode.checkPaymentModes();this.payModeActions()},notifyPartial:function(){try{var a=$('input:radio[name="payOption"]:checked').val();processPartialPayment(a)}catch(b){}},isPayModeSupportedOnProduct:function(a,c){for(var b=0;b<a.length;b++){if(c==a[b]){return true}}return false},payModeActions:function(){$("input:radio[name=payOption]").on("click",function(){if(Ewallet.ecashRedeemedAmount>0&&GV.totalGVAmount()>0&&detailsJson.isTcsEnabled==true){Ewallet.showAlert();YatraEWalletPaymentUI.reverseAuth()}var a=$(this).val();ShoppingCart.addConvFee();PaymentMode.notifyPartial();PaymentMode.selPaymentMode=$(this).attr("id");YatraPaymentUI.pushGAInfoForPaymentModes(a)});$("input:radio[name=paymentOption]").on("click",function(){var a=$(this).val();var b=$(this).attr("id");if(b=="payNowPaymentOption"){PaymentMode.selPaymentMode="payNowOption"}else{if(b=="partialPayPaymentOption"){PaymentMode.selPaymentMode="partPayOption"}else{if(b=="holdAndPayPaymentOption"){PaymentMode.selPaymentMode="holdAndPayOption"}}}$('input:radio[name="payOption"][value="'+a+'"]').attr("checked","checked");YatraPaymentUI.pushGAInfoForPaymentModes(a)})}},CreditPool={rowTemplateStringSecondary:"rowTemplateStringSecondary",initialise:function(){var b=getPaymentJSON();var l=b.agentProfileType;if(!l){$("#cp_divErrMsgBlock").attr("style","display:block;");$("#cp_divErrMsgBlock").html("Sorry, Error getting credit pool information!");return}l=l.toUpperCase();var k=detailsJson.isPassthrough=="true"&&(b.product=="crpdom_hotel"||b.product=="crpint_hotel"||b.product=="crpinthotel"||b.product=="crpdomhotel");if(detailsJson.secondaryCurrencyJSON){var d=detailsJson.secondaryCurrencyJSON;var m=detailsJson.secondaryCurrencyJSON.paymentType;var h=new Template();h.set(this.rowTemplateStringSecondary);var g="";if(d.currencies){for(var f in d.currencies){g+=h.render({label:d.currencies[f]["currencyKey"],amount:d.currencies[f]["currencyValue"]})}$("#breakDownContainerSecondary").html(g);$("#secondaryCurrrencyContainer").removeClass("hide")}}if(detailsJson.notifyUserMessage){var a=$("#cc_divErrMsgBlock_hotelGDS");$(a).html(detailsJson.notifyUserMessage);$(a).show();YatraPaymentUI.disableCVVforGdsFlow()}if(k){try{$("#cpmt_tabmenu li").not($("#cc").parent()).remove();$("div .cpmt_payop").filter(":not(#tab_cc)").remove();YatraPaymentUI.enableFirstPaymentOption()}catch(j){console.log(j)}YatraPaymentUI.disableCVVforGdsFlow();YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"));return}$("#"+l+"PoolDiv").attr("style","display:block;");var c=l=="CREDIT"?"creditPool":"cashPool";$("#cp_poolType_id").val(c)},validate:function(){var c=YatraPaymentUI.getPaymentOption();var b=getPaymentJSON();if(c=="cp"){var f=$("#cp_poolType_id").val();if(!f||!(f=="creditPool"||f=="cashPool")){$("#cp_divErrMsgBlock").attr("style","display:block;");$("#cp_divErrMsgBlock").html("Sorry, Error getting credit pool information!");$("#cp_divErrMsgBlock").delay(3000).queue(function(g){$(this).css("display","none");g()});return false}var d=b.agentProfileType;var a=b.amount;var e=$("#"+d+"PoolDiv").attr("amount");if(a>e){$("#cp_divWarningMsgBlock").attr("style","display:block;");$("#cp_divWarningMsgBlock").html("Insufficient Balance !");$("#cp_divWarningMsgBlock").delay(3000).queue(function(g){$(this).css("display","none");g()});return false}}return true}};CashPool={initialise:function(){var a=getPaymentJSON();$("#CashPoolAmountDiv").attr("style","display:block;")},validate:function(){var c=YatraPaymentUI.getPaymentOption();var b=getPaymentJSON();if(c=="cashPool"){var a=b.amount;var d=$("#CashPoolAmountDiv").attr("amount");if(a>d){$("#cashPool_divWarningMsgBlock").attr("style","display:block;");$("#cashPool_divWarningMsgBlock").html("Insufficient Balance !");$("#cashPool_divWarningMsgBlock").delay(3000).queue(function(e){$(this).css("display","none");e()});return false}}return true}};$(document).ready(function(){$("#cc_cno_id,#cc_cardholder_name_id,#cc_expm_id,#cc_expy_id,#cc_cvv_id").focus(function(){$("#qb_password_cc").val("")});$("#dc_cno_id,#dc_cardholder_name_id,#dc_expm_id,#dc_expy_id,#dc_cvv_id").focus(function(){$("#qb_password_dc").val("")});try{$(".popmodal").popmodal()}catch(a){console.log(a)}jQuery.support.cors=true;setTimeout(function(){YatraPaymentUI.initialise();if(exchangeRates&&exchangeRates.status=="true"){YatraPaymentUI.populatePaypalSection()}IE_Placeholder.init();$("#partialPaymentDiv input").trigger("change")},200);setTimeout(function(){$("#containerScroll").slideUp("slow")},3000);try{if($.browser.msie&&parseInt($.browser.version)<9){$("input").parent().removeClass("custom-checkbox");$("input").parent().removeClass("custom-Radiobox")}}catch(a){}if(detailsJson.crpInfo!=undefined){YatraCorpCardUI.getTokenizedCardList()}});var IE_Placeholder=IE_Placeholder||{config:{placeholder_color_class:"placeholderColor",normaltext_color_class:"defaultColor",isIE:0},init:function(a){var c=this,b=window.navigator.userAgent;c.config.isIE=b.match(/msie/i);if(c.config.isIE){if(a==""||a==undefined||a==null){a="input[type=text]"}$(a).each(function(){var d=$(this);c.placeDefaultText(d);document.getElementById(d.prop("id")).onfocus=function(){c.removeDefaultText($(this))};document.getElementById(d.prop("id")).onblur=function(){c.placeDefaultText($(this))};document.getElementById(d.prop("id")).onchange=function(){c.placeDefaultText($(this))};c.callBackPlaceDefaultText($(this))})}},removeDefaultText:function(a){var b=this,c=a.attr("placeholder");if(a.val()==c){a.val("");a.addClass(b.config.normaltext_color_class);a.removeClass(b.config.placeholder_color_class)}},placeDefaultText:function(a){var b=this,c=a.attr("placeholder");if(a.val()==""||a.val()==null||a.val()==undefined||(a.val()==a.attr("placeholder")&&b.config.isIE=="MSIE")){a.removeClass(b.config.normaltext_color_class);a.addClass(b.config.placeholder_color_class);a.val(c)}else{a.removeClass(b.config.placeholder_color_class);a.addClass(b.config.normaltext_color_class)}},callBackPlaceDefaultText:function(a){var b=this;if(b.config.isIE){b.placeDefaultText(a)}},validateDefaultText:function(b){var a=$(b);var c=this;if(a.val()==0||a.val()==""||a.val()==undefined||(a.val()==a.attr("placeholder")&&c.config.isIE=="MSIE")){return 0}return 1},manageValueChange:function(a){}};Popup={loaderContent:"loader_span",loaderSpanClass:"loader_msg_change",loaded:false,showPopup:function(a,b){$("."+this.loaderSpanClass).html(a);var c=$("#"+this.loaderContent).html();if(!this.loaded){PopModal()}Modal.show({title:b,content:c,width:"100px",manual:true})},showSessionExpire:function(){Popup.showPopup("Your session has been expired. Please wait while we reconfirm your itinerary","Session Expire")},processingPayment:function(){Popup.showPopup("Please give us some time","Processing Payment")},hidePopup:function(){Modal.hide()}};var GV={initialise:function(a){GV.gv=[];GV.recentGvType;GV.validGVType;GV.balanceAmountAfterGV;GV.config={maxGV:a};GV.registerEvents();GV.voucherNodes=[];GV.addedGVFirst6},maintainState:false,isPGPaymentRequiredForVoucher:false,registerEvents:function(){Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};$("#gvNo").keypress(function(c){GV.clearErrors();var b=new RegExp("^[0-9a-zA-Z]+$");var d=String.fromCharCode(!c.charCode?c.which:c.charCode);var a=c.which||c.keyCode||c.charCode;if(b.test(d)||a==8){console.log("gv value",$("#gvNo").val());return true}c.preventDefault();return false});$("#redeem-gv-button").click(function(b){GV.clearErrors();if(!GV.validateGV($("#gvNo").val(),$("#gvPin").val())){return false}var a=$("#gvNo").val();var c=$("#gvPin").val();GV.addGV(a,c)});$("#gvNo").on("input propertychange paste",function(b){if(b.type=="input"){GV.clearErrors();var a=new RegExp("^[0-9a-zA-Z]+$");var d=$(this).val().trim();$(this).val(d);var c=d;console.log("gv value1",c);if(a.test(c)){console.log("regex passed",$("#gvNo").val());if(c.length>=6){if(c.substring(0,6)==GV.addedGVFirst6&&GV.recentGvType!=""){}else{GV.addedGVFirst6=c.substring(0,6);console.log("calling the GV type",GV.addedGVFirst6);GV.getGvType(GV.addedGVFirst6)}}if(c.length>=9){if(c.substring(0,9)==GV.addedGVFirst9&&GV.validGVType!=""){$("#redeem-gv-button").removeClass("gv-btn-disabled")}else{GV.addedGVFirst9=c.substring(0,9);console.log("calling the GV type",GV.addedGVFirst9);GV.checkGvType(GV.addedGVFirst9)}}else{$("#redeem-gv-button").addClass("gv-btn-disabled")}}else{$("#errorGV").html("Please enter the valid GV");$("#errorGV").show()}}})},addGV:function(a,e){ProcessPayment.stopPollingForQRCode();var b=ShoppingCart.getTotalCartAmount();if(detailsJson.isTcsEnabled){b+=Number(ShoppingCart.tcsAmount)}if(b==0){console.log("cart balance is already 0, cannot add more coupons");$("#errorGV").html("Cart balance is already 0, cannot add more coupons");$("#errorGV").show();return false}var d=Object.size(GV.gv);if((d+1)>GV.config.maxGV){console.log("Max you can redeem "+GV.config.maxGV+" GVs.");$("#errorGV").html("Max you can redeem "+GV.config.maxGV+" GVs.");$("#errorGV").show();return false}if(GV.alreadyAdded(a)){console.log("You have already applied the GV");$("#errorGV").html("You have already added this GV, Please add another one");$("#errorGV").show()}else{console.log("add the GV");var c=GV.requestBuilder(a,e,b);GV.checkBalanceRequest(a,c)}},deleteGV:function(a){ProcessPayment.stopPollingForQRCode();var b=GV.alreadyAdded(a);GV.gv.splice((b-1),1);GV.voucherNodes.splice((b-1),1);if(GV.gv.length==0){GV.isPGPaymentRequiredForVoucher=false}GV.renderGV();if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){GV.balanceAmountAfterGV=ShoppingCart.getTotalCartAmountForTCS()+Number(ShoppingCart.tcsAmount);ShoppingCart.totalPayableAmount=GV.balanceAmountAfterGV;$("#fareBreakup-Payable").html(GV.balanceAmountAfterGV+GV.totalGVAmount()-ShoppingCart.tcsAmount);$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(GV.balanceAmountAfterGV));$("#totalAmountSpann").html(YatraHelper.formatPrice(GV.balanceAmountAfterGV))}},renderGV:function(){if(GV.gv.length){$(".applied-gift-vouc-txt").css("visibility","visible");$("#payNow").css("margin-top","30px");$(".gv-bal-amount").show()}else{$(".applied-gift-vouc-txt").css("visibility","hidden");$("#payNow").css("margin-top","0px");$(".gv-bal-amount").hide()}var b="";var a=0;for(var c in GV.gv){a++;b=b+GV.addedGVDiv(GV.gv[c].gvNo,GV.gv[c].maskedGvNo,GV.gv[c].amountRedeemed,GV.gv[c].amountBalance)}$("#appliedGvBlock").html(b);GV.updatePaymentDetails();$(".remove-voucher").click(function(d){d.preventDefault();console.log("deleting the GV"+this.id);GV.deleteGV(this.id)})},addedGVDiv:function(b,g,f,a,e){var d=a>0?'<span class="right"><span>Balance:</span><span class="RupeeSign curcd">Rs.</span><span>'+a+"</span> </span>":"";var c="";c=c+'<li class="gift-voucher-redeem-box">';c=c+"<div>";c=c+'<i class="check-success"></i>';c=c+"<p>";c=c+'<span>Redeemed:</span> <span class=" right"><span class="RupeeSign curcd">Rs.</span>'+f+"</span> </p>";c=c+"<p>";c=c+'<span class="fs12"> '+g+"</span>"+d+"</p>";c=c+'</div><span class="remove-voucher" id='+b+">X</span></li>";return c},clearErrors:function(){$("#errorGV").removeClass("warningGV");$("#errorGV").hide();$("#gv_pmt_msg_WARNING").hide()},updatePaymentDetails:function(){var a=GV.totalGVAmount();ShoppingCart.updateGVRedeemed(a);PaymentCommon.onAmountChange()},totalGVAmount:function(){var a=0;for(var b in GV.gv){a=a+GV.gv[b].amountRedeemed}return a},maskGV:function(a){var c=a.substring(0,3);var d=a.substring(a.length-4);var b=a.substring(3,a.length-4).replace(/\w/g,"*");console.log(c+b+d);return(c+b+d)},validateGV:function(a,b){var d=new RegExp("^[0-9a-zA-Z]+$");if(d.test(a)){}else{$("#errorGV").html("Please enter the valid GV");$("#errorGV").show();return false}if(GV.recentGvType=="QC"){if(a.length!=16){$("#errorGV").html("Please enter the valid GV");$("#errorGV").show();return false}var c=new RegExp("^[0-9]+$");if(d.test(b)){if(b.length!=6){$("#errorGV").html("Please enter the valid PIN");$("#errorGV").show();return false}}else{$("#errorGV").html("Please enter the valid Pin");$("#errorGV").show();return false}}if(GV.recentGvType=="PROMO"){if(a.length<10&&a.length>20){$("#errorGV").html("Please enter the valid GV");$("#errorGV").show();return false}}return true},getGvType:function(a){$.ajax({url:"/PaySwift/gift-voucher/type?voucherCode="+a+"&product="+detailsJson.product+"&merchant="+detailsJson.merchant,type:"GET",contentType:"application/json",dataType:"json",cache:false,success:function(b){if(b.status=="success"){GV.recentGvType=b.type;if(GV.recentGvType=="QC"){$("#gvPin").val("");$("#gvPinBlock").show();$("#gvPin").keypress(function(f){GV.clearErrors();var d=new RegExp("^[0-9]+$");var g=String.fromCharCode(!f.charCode?f.which:f.charCode);var c=f.which||f.keyCode||f.charCode;if(d.test(g)||c==8||c==118){console.log("gv PIN",$("#gvPin").val());return true}f.preventDefault();return false});$("#gvPin").on("input propertychange paste",function(d){if(d.type=="input"){GV.clearErrors();var c=new RegExp("^[0-9]+$");var g=$(this).val().trim();$(this).val(g);var f=g;console.log("PIN value1",f);if(c.test(f)){console.log("regex passed PIN",$("#gvNo").val())}else{$("#errorGV").html("Please enter the valid PIN");$("#errorGV").show()}}})}else{$("#gvPinBlock").hide()}}else{GV.recentGvType="";$("#gvPinBlock").hide()}},error:function(d,b,c){GV.recentGvType="";console.log("fail gv type",c)}})},checkGvType:function(a){$.ajax({url:"/PaySwift/gift-voucher/checkVocherType?voucherCode="+a+"&superPnr="+detailsJson.superPnr,type:"GET",contentType:"application/json",dataType:"json",cache:false,success:function(b){if(b.resCode=="0"){$("#redeem-gv-button").removeClass("gv-btn-disabled");GV.validGVType=true}else{$("#errorGV").html(b.displayMessage);$("#errorGV").show();GV.validGVType=false}},error:function(d,b,c){GV.validGVType="";console.log("fail check gv",c)}})},checkBalanceRequest:function(a,b){$.ajax({url:"/PaySwift/gift-voucher/"+detailsJson.merchant+"/"+detailsJson.product+"/"+detailsJson.superPnr+"/check-balance",type:"POST",data:JSON.stringify(b),contentType:"application/json",dataType:"json",cache:false,success:function(c){console.log("success add coupon",c);if(c.status=="success"){GV.config.maxGV=c.maxVoucherAllowed;GV.gv.push({gvNo:a,maskedGvNo:GV.maskGV(a),gvPin:gvPin,amountRedeemed:c.vouchers[GV.voucherNodes.length].redeemedBalance,amountBalance:c.vouchers[GV.voucherNodes.length].availableBalance,totalBalance:c.vouchers[GV.voucherNodes.length].totalBalance});GV.isPGPaymentRequiredForVoucher=c.isPaymentRequired?c.isPaymentRequired:false;GV.renderGV();GV.balanceAmountAfterGV=ShoppingCart.getTotalCartAmountForTCS()+Number(ShoppingCart.tcsAmount);if(YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled)){ShoppingCart.totalPayableAmount=GV.balanceAmountAfterGV;$("#fareBreakup-Payable").html(GV.balanceAmountAfterGV+GV.totalGVAmount()-ShoppingCart.tcsAmount);$("#"+ShoppingCart.totalAmountSpan).html(YatraHelper.formatPrice(GV.balanceAmountAfterGV));$("#totalAmountSpann").html(YatraHelper.formatPrice(GV.balanceAmountAfterGV))}YatraEWalletPaymentUI.setEWalletUI();$("#gvNo").val("");$("#gvPin").val("");$("#redeem-gv-button").addClass("gv-btn-disabled");$("#gvPinBlock").hide();GV.voucherNodes=c.vouchers.slice();GV.addedGVFirst6="";GV.recentGvType="";GV.validGVType="";if(c.displayMessage&&c.displayMessage!=""){$("#gv_pmt_msg_WARNING").html(c.displayMessage);$("#gv_pmt_msg_WARNING").show()}}else{console.log("Error in adding the GV");$("#errorGV").removeClass("warningGV");$("#errorGV").html(c.displayMessage);$("#errorGV").show();$("#gv_pmt_msg_WARNING").hide()}},error:function(e,c,d){console.log("fail add coupon",d);$("#errorGV").removeClass("warningGV");$("#errorGV").html("There is some problem in adding the voucher, please try again later");$("#errorGV").show();$("#gv_pmt_msg_WARNING").hide()}})},alreadyAdded:function(a){for(var b=0;b<GV.gv.length;b++){if(a==GV.gv[b].gvNo){return b+1}}return false},requestBuilder:function(a,f,b){var d=GV.voucherNodes.slice();d.push({code:a,type:GV.recentGvType,pin:f});var c;if(detailsJson.discount&&detailsJson.discount.cartLabel&&ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]==0){c=b+GV.totalGVAmount()}else{c=PaymentCommon.isVisaApplied()?b+GV.totalGVAmount()-1:b+GV.totalGVAmount()}var e={superPnr:detailsJson.superPnr,emailId:detailsJson.userDetails.email,amount:c,lob:lob,isd:detailsJson.userDetails.mobileNoISD,mobile:detailsJson.userDetails.mob,source:source,context:"REVIEW",vouchers:d};return e}};$.extend($.expr[":"],{opacity:function(c,b,a){return($(c).css("opacity")===a[3]+"")}});PaymentValidation={oldTextProp:{},counter:20,restorOldText:function(a){var b=$(a).attr("name");var c=this.oldTextProp[b];if($.trim($(c.target).val())==""){$(c.target).val(c.value);$(c.target).unbind("blur");$(c.target).removeClass("blackText")}},manageInputText:function(a,b){var d=$(a);var c=$(a).attr("name");var e=$(a).val();if(typeof(this.oldTextProp[c])=="undefined"){this.oldTextProp[c]={target:d,value:e};$(d).bind("focus",function(f){$(d).addClass("blackText");f.target.select()})}if(e==this.oldTextProp[c].value){if(typeof(b)=="undefined"){$(d).val("")}$(d).bind("blur",function(){PaymentValidation.restorOldText(d)})}},focus:function(a){document.getElementById(a).focus()},selectCombo:function(c,d){var e=document.getElementById(c);var f=e.options;var a=d;for(var b=0;b<f.length;b++){if((f[b].text.toString().toLowerCase()==a.toLowerCase())||f[b].value==a){e.selectedIndex=b;break}}},validate_email:function(c){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,6})+$/;var a=b.test(c);return a},validate_numeric:function(a){return !isNaN(a)},validate:function(frm,beforepost,onsuccess,onerror,validateOnly){var form=$(frm);if(form.length==0){$(frm).prop("id","msForm_"+(PaymentValidation.counter++))}var frmId=$(frm).prop("id");if(beforepost){$("#"+frmId).data("beforepost",beforepost)}if(onsuccess){$("#"+frmId).data("onsuccess",onsuccess)}if(onerror){$("#"+frmId).data("onerror",onerror)}if(validateOnly){$("#"+frmId).data("validateOnly",true)}else{$("#"+frmId).data("validateOnly",false)}var allElements=$("#"+frmId+" [data-validation]:visible").not(".nonValidate");var isDifferent=$("#"+frmId).data("isdifferent");$("#"+frmId).data("isdifferent",false);for(var i=0;i<allElements.length;i++){var current=allElements[i];var eType=$(current).prop("type");var is_error=false;var field_name=current.name;var error_holder=field_name+"_error";if(field_name.indexOf("[]")>0){eType="multiple";if(typeof current.id=="undefined"||current.id==""){throw"Need id for the field : "+field_name;return false}else{field_name=current.id;error_holder=field_name+"_error"}}switch(eType){case"radio":if($("input."+field_name+":checked").length==0){is_error=true}break;case"checkbox":if(typeof current.id!="undefined"){$("#"+field_name).val("checked");if(document.getElementById(field_name).checked==false){is_error=true;$("#"+field_name).val("")}}else{$("input."+field_name).val("checked");if($("input."+field_name+":checked").length==0){is_error=true;$("input."+field_name).val("")}}break;case"select":case"multiple":if($("#"+field_name).val()==null){is_error=true}break;default:if($.trim($(current).val())==""||$(current).val()==null){is_error=true;field_name=current.id||field_name}break}field_name=(current.id!=field_name)?current.id:field_name;error_holder=field_name+"_error";var ruletype=$("#"+field_name).attr("data-validation");if(ruletype!=null&&ruletype!=""&&ruletype!=undefined){var ruleTypeArr=ruletype.split("|"),errorMsg=$("#"+field_name).attr("data-msginfo");var errorMsgArr=errorMsg.split("|");IE_Placeholder.removeDefaultText($("#"+field_name));for(var index=0;index<ruleTypeArr.length;index++){var value=$("#"+field_name).val();var rule=ruleTypeArr[index];var ruleSplit=rule.split(/\[|,|\]/);switch(ruleSplit[0]){case"required":if(value==null||value==undefined){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}else{if($.trim($(current).val())==""){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}break;case"regType":var type=ruleSplit[1];var regex;if(type=="alpha"){regex=/^\s*[a-zA-Z\s]+\s*$/}else{if(type=="number"){regex=/^[0-9\ ]+$/}else{if(type=="onlyLetter"){regex=/^[a-zA-Z\ ]+$/}}}if(regex.test(value)==false){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"validateLuhn":var cardNo=value.replace(/[\s-]/g,"");var doubleDigit=false;var checkSum=0;for(var j=cardNo.length-1;j>=0;j--){var digit=value.substr(j,1);if(doubleDigit==true){var pNum=parseInt(2*digit);var digitSum=0;while(pNum>0){digitSum+=pNum%10;pNum=parseInt(pNum/10)}checkSum+=digitSum}else{checkSum+=parseInt(digit)}doubleDigit=!doubleDigit}if(checkSum%10!=0){YatraPaymentUI.recordEventInSentry("Card Luhn Validation Failure","info","invalid-card");return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"cardRegType":var type=ruleSplit[1];var cardName=type.replace(/[[\]]/g,"");var cards=new Array();cards[0]={cardName:"Visa",lengths:"13,16",prefixes:"4"};cards[1]={cardName:"Master",lengths:"16",prefixes:"51,52,53,54,55,222"};cards[2]={cardName:"Diners",lengths:"14",prefixes:"300,301,302,303,304,305,36,38,3095"};cards[3]={cardName:"Amex",lengths:"15",prefixes:"34,37"};cards[4]={cardName:"Maest",lengths:"16,18,19",prefixes:"50,56,57,58,6"};cards[5]={cardName:"Dinners",lengths:"14",prefixes:"300,301,302,303,304,305,36,38,3095"};cards[6]={cardName:"Rupay",lengths:"16",prefixes:"000000-999999"};cards[7]={cardName:"BAJAJ",lengths:"16",prefixes:"203040"};var cardType=-1;for(var j=0;j<cards.length;j++){if(cardName.toLowerCase()==cards[j].cardName.toLowerCase()){cardType=j;break}}if(cardType==-1){YatraPaymentUI.recordEventInSentry("Card Type Not Found","info","invalid-card","cardName",cardName);return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}value=value.replace(/[\s-]/g,"");if(value.length==0){YatraPaymentUI.recordEventInSentry("Card Length Zero","info","invalid-card");return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}var cardNo=value;var cardexp=/^[0-9]{13,19}$/;if(!cardexp.exec(cardNo)){YatraPaymentUI.recordEventInSentry("Card Invalid - either has chars or wrong length","info","invalid-card");return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}cardNo=cardNo.replace(/\D/g,"");var lengthValid=false;var prefixValid=false;var prefix=new Array();var lengths=new Array();prefix=cards[cardType].prefixes.split(",");if(cards[cardType].cardName=="Rupay"){var bin=parseInt(cardNo.substring(0,6));for(var prefixIndex=0;prefixIndex<prefix.length;prefixIndex++){var lowerLimit=parseInt(prefix[prefixIndex].split("-")[0]);var upperLimit=parseInt(prefix[prefixIndex].split("-")[1]);if(bin>=lowerLimit&&bin<=upperLimit){prefixValid=true;break}}}else{for(var j=0;j<prefix.length;j++){var exp=new RegExp("^"+prefix[j]);if(exp.test(cardNo)){prefixValid=true}}}if(!prefixValid){YatraPaymentUI.recordEventInSentry("Card Invalid Prefix","info","invalid-card");return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}lengths=cards[cardType].lengths.split(",");for(var j=0;j<lengths.length;j++){if(cardNo.length==lengths[j]){lengthValid=true}}if(!lengthValid){YatraPaymentUI.recordEventInSentry("Card Invalid Length","info","invalid-card");return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"supportedCard":var type=ruleSplit[1];var PaymentOption=ruleSplit[2];var cardName=type.replace(/[[\]]/g,"");var cards=new Array();cards[0]={cardName:"Visa",payOption:"cc,dc,dcpin,emi,rewards"};cards[1]={cardName:"Master",payOption:"cc,dc,dcpin,emi,rewards"};cards[2]={cardName:"Diners",payOption:"cc,dc,dcpin,emi"};cards[3]={cardName:"Amex",payOption:"cc,emi"};cards[4]={cardName:"Maest",payOption:"dc,dcpin"};cards[5]={cardName:"Dinners",payOption:"cc,dc,dcpin,emi"};cards[6]={cardName:"Rupay",payOption:"cc,dc,dcpin"};cards[7]={cardName:"BAJAJ",payOption:"emi"};var cardType=-1;for(var j=0;j<cards.length;j++){if(cardName.toLowerCase()==cards[j].cardName.toLowerCase()){cardType=j;break}}if(cardType==-1){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}var paymentOptionValid=false;var paymentOptions=new Array();paymentOptions=cards[cardType].payOption.split(",");for(var j=0;j<paymentOptions.length;j++){if(PaymentOption==paymentOptions[j]){paymentOptionValid=true}}if(!paymentOptionValid){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"enabledCard":var cardType=ruleSplit[1];var enabledCardList=ruleSplit[2];var cardName=cardType.replace(/[[\]]/g,"");var cardTypeEnabled=false;var enabledCards=new Array();enabledCards=enabledCardList.split("/");for(var j=0;j<enabledCards.length;j++){if(cardName==enabledCards[j]){cardTypeEnabled=true}}if(!cardTypeEnabled){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"emiCardBankValidaton":var cardNo=value;cardNo=cardNo.replace(/\D/g,"");var bank=$("#emiBank_select option:selected").val();var emiCardValidated=false;if(cardNo.length>=7){extendedBinNumber=cardNo.substr(0,7);var paymentOption="emi";var emiCardBankValidation=YatraPaymentUI.validateEMICardAndBank(extendedBinNumber,bank);if(emiCardBankValidation.is_successful!=null&&emiCardBankValidation.is_successful!=""){if(emiCardBankValidation.is_successful=="true"){emiCardValidated=true}}}if(!emiCardValidated){return showValidationError(frmId,field_name,error_holder,emiCardBankValidation.message)}break;case"checkExpiryDate":var type=ruleSplit[1];var monthElm=$("#"+type+"_expm_id");var yearElm=$("#"+type+"_expy_id");expMonth=monthElm.val();expYear=yearElm.val();var val="";val+=expMonth+expYear;elmVal=val;maxLen=parseInt(monthElm.attr("maxlength"))+parseInt(yearElm.attr("maxlength"));if(elmVal.length==0){break}else{if(elmVal.length<maxLen){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}var expVal=elmVal;var regExp=/[0-9]*$/;if(!regExp.exec(expVal)){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}today=new Date();month=today.getMonth();if(navigator.appName=="Microsoft Internet Explorer"){year=today.getYear()}else{year=today.getYear()+1900}month=eval(month+1);expMonth=eval(expMonth);expYear=eval(expYear);if((expYear<year)||(expMonth>12||expMonth<1)||(expYear==year&&expMonth<month)){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"lenCheck":var len=ruleSplit[1];if(len!=undefined){var checkLen=parseInt(len.replace(/[[\]]/g,""));if(value.length!=checkLen){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}break;case"minLenCheck":var len=ruleSplit[1];if(len!=undefined){var checkLen=parseInt(len.replace(/[[\]]/g,""));if(value.trim().length<checkLen){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}break;case"internationalMobileRangeCheck":var payop=ruleSplit[1];var isdValue=$("#dc_baisd").val();if(payop=="cc"){isdValue=$("#cc_baisd").val()}else{if(payop=="qbcc"){isdValue=$("#temp_baisd").val()}}if(isdValue=="91"){if(value.length!=10){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}else{if(value.length<4||value.length>17){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}break;case"checkReward":var paymentJSON=getPaymentJSON();var totAmount=parseInt(paymentJSON.cartAmount);value=parseInt(value);if(value<0||value>totAmount){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"emailCheck":if(PaymentValidation.validate_email(value)){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"validBankSelectedCheck":var selectedOption=$("#dcpinBank option:selected").val();if(selectedOption==""){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"resetPassCheck":var newPassword=$("#qb_newPassword_id").val();var confirmPassword=$("#qb_confirmPassword_id").val();if(newPassword!=confirmPassword){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"oldPassCheck":var oldPassword=$("#qb_oldPassword_id").val();var newPassword=$("#qb_newPassword_id").val();if(oldPassword==newPassword){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"lengthCheck":if((value.length>=8)&&/^(?=.*[a-z])(?=.*[0-9]).+$/.test(value)){break}else{return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"checkCvv":if(value&&value.indexOf("--")==-1){if(/^[0-9\ ]+$/.test(value)){if(value.length==3){break}else{return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}else{return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}else{break}case"checkVA":var mobileNumberRegex=/^\d{10}$/;var regex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9]+$/;if(regex.test(value)==false&&mobileNumberRegex.test(value)==false){return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;case"checkVAMobile":var regex=/^[0-9\ ]+$/;if(regex.test(value)){if(value.length==10){break}else{return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}}else{return showValidationError(frmId,field_name,error_holder,errorMsgArr[index])}break;default:var regExp=new RegExp(regtype,"g");var isOkay=regExp.test($("#"+field_name).val());if(regExp.test($("#"+field_name).val())==false){Utils.scrollWin(document.forms[frmId][field_name]);showErrorMessage(field_name,error_holder,errorMsgArr[index]);return false}break}}}}var success=true;if($("#"+frmId).data("beforepost")){success=$("#"+frmId).data("beforepost")()}var isajax=$("#"+frmId).data("isajax");var validateOnly=$("#"+frmId).data("validateOnly");if(validateOnly==true){if(onsuccess){onsuccess("validated",isDifferent)}return false}if(isajax&&isajax.toString()=="true"&&success==true){var url=$("#"+frmId).prop("action");$.ajax({url:url,type:"post",data:$("#"+frmId).serialize(),success:function(res){var onsuccess=$("#"+frmId).data("onsuccess");if(onsuccess){onsuccess(res)}},error:function(res){var onerror=$("#"+frmId).data("onerror");if(onerror){onerror(res)}}});return false}else{if(success==true){return true}else{return false}}$("#"+frmId+" [data-validation]").bind("keydown",function(){$(".error:visible").hide()});function showValidationError(frmId,field_name,error_holder,errorMsg){var dd=$("#"+field_name).data("dd");if(dd){field_name=dd.get("id")+"_msdd"}$("#"+field_name).addClass("error");setTimeout(function(){$("#"+field_name).removeClass("error")},4000);showErrorMessage(field_name,error_holder,errorMsg);document.getElementById(field_name).focus();return false}function showErrorMessage(field_name,error_holder,msg){errormsg="";if(msg!=null&&msg!=""&&msg!=undefined){errormsg=msg}else{var htmlError=$("#"+error_holder).val();if(htmlError!=null&&htmlError!=""&&htmlError!=undefined){FX.come("#"+error_holder);return}else{field_name=field_name.id||field_name.name;errormsg=field_name+" is required..."}}Toast.show(errormsg,field_name)}}};var appProp=appProp||{};var PaymentCommonActions={ids:{module_tab_class:"jsModules"},constants:{module_ajaxURL:(appProp&&appProp.frescoServiceUrl)?appProp.frescoServiceUrl:""},init:function(){this.initAction();this.customSelect()},getCookie:function(b){var c,a,e;var d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}},getDeviceName:function(){var a=$(window).width();var b="desktop";if(a>480&&a<=920){b="tab"}return b},getCarouselProp:function(){var b=this.getDeviceName();var a={desktop:{width:538,height:167,displayItems:3},tab:{width:325,height:167,displayItems:2}};return a[b]},customSelect:function(){try{$('select:not(".template")').msDropdown({enableAutoFilter:true}).bind("change",function(b){if(typeof(BE_Hotels)!="undefined"&&typeof($(this).attr(BE_Hotels.ids.agegroup_attribute))!="undefined"){BE_Hotels_Action.onChangeSelectValue(this)}else{if(typeof(BE_FlightsHotels)!="undefined"&&typeof($(this).attr(BE_FlightsHotels.ids.agegroup_attribute))!="undefined"){BE_FlightsHotels_Action.onChangeSelectValue(this)}else{if(typeof(BE_Flights)!="undefined"&&typeof($(this).attr(BE_Flights.ids.agegroup_select_attribute))!="undefined"){BE_Flights_Action.onChangeSelectValue(this)}else{if(typeof(gMap)!="undefined"&&typeof($(this).attr(gMap.ids.city_select_attribute))!="undefined"){gMapAction.onChangeSelectCity(this)}}}}})}catch(a){}},oTab:null,enableTouch:function(){var a=this.oTabs;$("#touchScroll").msTouch({onLeft:function(){$(".box").hide();$(".box:first").show(1000);a.switchTabByCounter(2)},onRight:function(){$(".box").hide();$(".box:last").show(1000);a.switchTabByCounter(0)}})},enableCarouselTouch:function(){if($.fn.msTouch){var a=this.getCarouselProp();$(".mscarousel").msTouch({onLeft:function(d){var e=$(this).data();var h=e.msCarousel;var c=h.items();var g=h.getCurrentId();var f=e.visibleitem||a.displayItems;f=parseInt(f);var b=(g+f)},onRight:function(){var d=$(this).data();var g=d.msCarousel;var c=g.items();var f=g.getCurrentId();var e=d.visibleitem||3;e=parseInt(e);var b=(f-e);b=(b<0)?0:b}})}},enableCustomScroller:function(){if($.fn.customScrollbar){$(".scrollContainer").customScrollbar({skin:"default-skin",hScroll:false,updateOnWindowResize:true})}},fixUI:function(){this.enableCustomScroller();this.customSelect()},enableCarousel:function(c){try{var a=this.getCarouselProp();$(".carouseldiv"||c).each(function(){$(this).msCarousel({boxClass:"div.singleOffer, div.comments, li.matrixTopCarousel",width:$(this).data("carouselwidth")||a.width,height:$(this).data("carouselheight")||a.height,scrollSpeed:$(this).data("carouselspeed")||500,callback:function(d){var e=d.prop.element_id;if(d.getCurrentId()==0){$("#"+e+" .prev").addClass("prevDisabled");$("#"+e+" .iconSpekPre").addClass("prevDisabled")}else{$("#"+e+" .prev").removeClass("prevDisabled");$("#"+e+" .iconSpekPre").removeClass("prevDisabled")}}});if($(this).find("li.matrixTopCarousel").length<=a.displayItems){$(this).find(".next, .prev").hide()}});if(!this.enableCarousel.isInit){this.enableCarousel.isInit=true;$(".carouseldiv").parent().find(".next, .iconSpekNxt").on("click",function(){var g=$(this).parent().find(".carouseldiv").data("msCarousel");var d=g.item().length;var e=g.getCurrentId();var f=$(this).data("carouseldisplayitem")||a.displayItems;if(f!=1){if(e!=d-f){g.next()}if(e==d-f){}}else{g.next()}});$(".carouseldiv").parent().find(".prev, .iconSpekNxt").on("click",function(){var d=$(this).parent().find(".carouseldiv").data("msCarousel");d.previous()});this.enableCarouselTouch()}}catch(b){}},initAction:function(){var a=this;$("."+this.ids.module_tab_class).on("click",function(){var c=$(this).data("active");if(!$(this).hasClass(c)){MS_Loader.showLoader(this,"Please wait...",false);var d=$(this).data("parent");$(this).parents(d).find("a."+a.ids.module_tab_class).removeClass(c);$(this).addClass(c);var f=$(this).data("module");var b=a.constants.module_ajaxURL;var e=$(this).data("place");var g={};g.name=f;b=b+"?"+common_func.objToUrl(g);CustomLoader.ajax({url:b,noCache:false,type:"POST",dataType:"html",success:function(h){MS_Loader.hideLoader();$("#"+e).html(h);a.fixUI()},error:function(){MS_Loader.hideLoader();console.log("module: "+f+"is not coming")}})}});if($.fn.msTabs){this.oTabs=$(".tabholder").msTabs({tabs:"li",effects:"none",speed:"fast",selected:"active",event:"mouseover"}).data("msTabs")}this.enableCarousel();$(".nav-tabs li").on("click",function(){$(".nav li").removeClass("active");$(this).addClass("active")});$(".jsWinopen").on("click",function(){window.location=$(this).data("url")});this.fixUI();$(".dropdown").hover(function(){$(this).addClass("active");$(this).find("ul:first").show()},function(){$(this).removeClass("active");$(this).find("ul:first").hide()})}};var eCashJSON=null;var redeemAuthJSON=null;var reverseAuthJSON=null;var breakUpJson=null;var disableEcash=false;var YatraEWalletPaymentUI={eCashJsonURL:"/checkout/wallet/get-ecash.htm",redeemAuthURL:"/checkout/wallet/auth.htm",reverseAuthURL:"/checkout/wallet/reverse-auth.htm",redeemCapURL:"/checkout/wallet/cap.htm",breakUpInfoURL:"/checkout/wallet/get-breakup-info.htm",sliderMaxLimit:0,expEcash:0,nexpEcash:0,isReverseAuthWhenFullEcashAndGST:false,init:function(){if(enableEWallet&&isAdditionalPaymentAttempt!="true"){this.updateEWalletHTML();$("#redeem-ecash-button").on("click",function(d,f){var c=YatraEWalletPaymentUI.getAmountToBeRedeemed();if(detailsJson.convFeePercent&&totalCartAmountWithoutConvFeesPercentage<=c){$("#upi").trigger("click")}var c=YatraEWalletPaymentUI.getAmountToBeRedeemed();$("#ecash-div .eCash-loader").show();var a=getPaymentJSON();if(roundOffCart){var b=parseInt(a.amount)}else{var b=a.amount.toFixed(2)}if(YatraEWalletPaymentUI.isBookingForEcashGV()){YatraEWalletPaymentUI.redeemForEcashGV(f);return}if(GV.isPGPaymentRequiredForVoucher){c=c-1}if(c>0){if(b>=c){YatraEWalletPaymentUI.redeemAuth(c);YatraEWalletPaymentUI.logWalletRedemptionInSentry(f,c)}}else{YatraEWalletPaymentUI.setErrorMessage("Amount must be greater than 0.")}});$("#cancelRedemption").on("click",function(){$("#ecash-div .eCash-loader").show();YatraEWalletPaymentUI.reverseAuth();YatraPaymentUI.recordEventInSentry("Ecash Cancel Redemption","info","Ecash Redemption")});$("#okgotitlink").click(function(){$("#ecash-tupple").hide()})}},redeemForEcashGV:function(b){var a=YatraEWalletPaymentUI.getEcashForGVAmountToBeRedeemed();if(a>0){YatraEWalletPaymentUI.redeemAuth(a);YatraEWalletPaymentUI.logWalletRedemptionInSentry(b,a)}else{YatraEWalletPaymentUI.setErrorMessage("Amount must be greater than 0.")}},logWalletRedemptionInSentry:function(b,a){if(b!=undefined&&b=="auto"){YatraPaymentUI.recordEventInSentry("Ecash Auto Redemption","info","Ecash Redemption","amount",a)}else{YatraPaymentUI.recordEventInSentry("Ecash Manual Redemption","info","Ecash Redemption","amount",a)}},updateEWalletHTML:function(){var a=YatraQBPaymentUI.getSSOToken();if(enableEWallet&&a!=undefined&&a!=null){this.getEWalletJSON()}else{$("#ecash-div").hide()}},getEWalletJSON:function(){var a=getPaymentJSON();if(a!=undefined&&a!=null){var f=new Date();var b=f.getTime();try{$.ajax({url:this.eCashJsonURL+"?date="+b,type:"POST",data:{cust_email:a.userEmail,merchant_code:a.merchant,product_code:a.product,super_pnr:a.superPNR},cache:false,success:function(d){eCashJSON=$.parseJSON(d);YatraEWalletPaymentUI.setEWalletUI();YatraEWalletPaymentUI.automaticallyRedeemECash()},error:function(g,d,e){eCashJSON=YatraEWalletPaymentUI.getErrorJSON("Error occurred while getting eCash JSON")}})}catch(c){console.log(c)}}},automaticallyRedeemECash:function(){var a=getPaymentJSON();if(enableEWallet&&((detailsJson.autoRedeemECash&&detailsJson.autoRedeemECash=="true")||(YatraEWalletPaymentUI.isBookingForEcashGVAndToHideEcashSlider())||(a.wallet.previousEcashRedeemed&&parseInt(a.wallet.previousEcashRedeemed)>0))){$("#redeem-ecash-button").trigger("click","auto")}},setEWalletUI:function(){if(enableEWallet&&eCashJSON!=null&&eCashJSON.status==true){var j=YatraEWalletPaymentUI.getAmountInRupee(eCashJSON.totalEcash.redeemableECashInPaisa);if(j>0){var h=getPaymentJSON();if(roundOffCart){}else{h.amount=h.amount.toFixed(2)}$(".total-amount-due").html(YatraPayment.formatAmount(h.amount));var e=0;var b=0;var f=0;var c=0;var d=0;var m=eCashJSON.ECashList[0];var k=eCashJSON.ECashList[1];if(m!=null){if(m.eCashType=="EXPIRABLE"){f=YatraEWalletPaymentUI.getAmountInRupee(m.redeemableECashInPaisa)}else{c=YatraEWalletPaymentUI.getAmountInRupee(m.redeemableECashInPaisa)}}if(k!=null){if(k.eCashType=="EXPIRABLE"){f=YatraEWalletPaymentUI.getAmountInRupee(k.redeemableECashInPaisa)}else{c=YatraEWalletPaymentUI.getAmountInRupee(k.redeemableECashInPaisa)}}if(f<h.wallet.maxRedeemableECash){e=parseInt(f)+parseInt(c)}else{e=parseInt(h.wallet.maxRedeemableECash)+parseInt(c)}if(YatraEWalletPaymentUI.isBookingForEcashGV()){var l=parseInt(h.wallet.maxRedeemableECash)+h.amount;if(e>l){e=l}}else{if(e>h.amount){e=h.amount}}b=parseInt(c);var a=ShoppingCart.totalPayableAmount;if(b>a){b=a}d=e;if(h.wallet.previousEcashRedeemed>0){d=parseInt(h.wallet.previousEcashRedeemed);if(d>e){d=e}YatraPaymentUI.recordEventInSentry("Override EcashToBeRedeemed","info","Ecash","amountOverriden",d)}sliderMaxLimit=e;if(YatraEWalletPaymentUI.isBookingForEcashGV()&&b>0){sliderMaxLimit=b}if(GV.isPGPaymentRequiredForVoucher){e=e-1;sliderMaxLimit=sliderMaxLimit-1}if(parseInt(c)>0&&detailsJson.maxRedeemableECash==0){disableEcash=false;if(detailsJson.disableYlp){$("#ecash-warning-message").show()}else{$("#ecash-warning-message").hide()}}else{$("#ecash-warning-message").hide();disableEcash=true}if(e>0){YatraEWalletPaymentUI.resetSlider();$("#total-redeemable-ecash").html(YatraPayment.formatAmount(e));$("#totalECash").val(j);$("#totalECash-Bal").html(parseInt(j));$("#totalECash-Balj").html(parseInt(j));$("#totalRedeemableECash").val(e);$("#eCashToBeRedeemed").val(d);if(YatraEWalletPaymentUI.isBookingForEcashGV()&&b>0){$("#total-redeemable-ecash").html(YatraPayment.formatAmount(b))}$("#nexpEcashForGVToRedeem").val(b);$("#expEcashForGVToRedeem").val(parseInt(h.wallet.maxRedeemableECash));if(YatraEWalletPaymentUI.isBookingForEcashGV()){if(YatraEWalletPaymentUI.toHideEcashSliderForEcashGV()&&b==0){$("#ecash-div").hide()}else{$("#ecash-div").show()}}else{$("#ecash-div").show()}if(YatraEWalletPaymentUI.isBookingForEcashGV()){$("#ecashGVAmount").text($("#expEcashForGVToRedeem").val());$("#ecashGV").show()}else{$("#ecashGV").hide()}var g={totalRedeemableEcash:e,totalEcash:j,eCashToBeRedeemed:d,ylpMax:h.wallet.maxRedeemableECash,autoRedeemECash:detailsJson.autoRedeemECash};YatraPaymentUI.recordEventInSentryWithObj("Ecash Div Load","info","Ecash",g)}else{$("#ecash-div").hide()}}}},isBookingForEcashGV:function(){return(typeof(detailsJson.isOnlyEcashGV)!="undefined"&&detailsJson.isOnlyEcashGV!=undefined)},toHideEcashSliderForEcashGV:function(){return(typeof(detailsJson.hideEcashSlider)!="undefined"&&detailsJson.hideEcashSlider!=undefined&&detailsJson.hideEcashSlider=="true")},isBookingForEcashGVAndToHideEcashSlider:function(){return(YatraEWalletPaymentUI.isBookingForEcashGV()&&YatraEWalletPaymentUI.toHideEcashSliderForEcashGV())},redeemAuth:function(c){YatraEWalletPaymentUI.disableRedeemButton();var a=getPaymentJSON();var g=new Date();var f=g.getTime();var e=true;var b=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);if(b){e=false}$("#ecash-div .eCash-loader").show();$.ajax({url:this.redeemAuthURL+"?date="+f,type:"POST",async:e,timeout:"5000",data:{cust_email:a.userEmail,amount:c,ttid:a.superPNR,merchant_code:a.merchant,product_code:a.product,ylp_max:a.wallet.maxRedeemableECash,product:a.wallet.product,channel:a.wallet.channel,device:a.wallet.device},cache:false,success:function(d){redeemNow=false;redeemAuthJSON=$.parseJSON(d);YatraEWalletPaymentUI.handleRedeemAuth()},error:function(j,d,h){redeemAuthJSON=YatraEWalletPaymentUI.getErrorJSON("Error occurred while redemption of eCash.");YatraEWalletPaymentUI.enableRedeemButton();$("#ecash-div .eCash-loader").hide()}})},getRedeemedECashBreakUp:function(b){var a=getPaymentJSON();$.ajax({url:this.breakUpInfoURL,type:"POST",async:false,timeout:"5000",data:{wallet_id:b,ttid:a.superPNR,validate:"true",cust_email:a.userEmail},cache:false,success:function(c){breakUpJson=$.parseJSON(c)},error:function(e,c,d){breakUpJson=YatraEWalletPaymentUI.getErrorJSON("Error occurred while trying to get BreakUp of eCash.");YatraPaymentUI.recordEventInSentry("Error in receiving walletBreakUp Info Controller Response","info","walletBreakUp Info Error")}})},handleRedeemAuth:function(){$("#ecash-div .eCash-loader").show();console.log("here");if(redeemAuthJSON.status==true){var c=YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON.amountInPaisa);var d=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);YatraEWalletPaymentUI.getRedeemedECashBreakUp(redeemAuthJSON.walletId);if(breakUpJson.status==true){this.expEcash=breakUpJson.ExpEcash;this.nexpEcash=breakUpJson.NexpEcash}if(d){currentGSTAmount=ShoppingCart.json[ShoppingCart.labelIndex.GST]["GST"];prevGSTAmount=currentGSTAmount;totalPayableAmount=ShoppingCart.totalPayableAmount}processWalletPayment("REDEEM",c);if(d){var e=0;if(typeof(detailsJson.promo)!="undefined"&&detailsJson.promo!=undefined){e=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.promo.cartLabel]][detailsJson.promo.cartLabel]}var b=0;if(typeof(detailsJson.discount)!="undefined"&&detailsJson.discount!=undefined){b=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]}if(detailsJson.product!="HOLIDAY_IN"&&detailsJson.product!="HOLIDAYS_OB"){YatraPaymentUI.updateGSTCartUI(Number(this.expEcash)+Number(Math.abs(e))+Number(Math.abs(b)))}if(this.nexpEcash>0){var a=Number(totalPayableAmount)-Number(prevGSTAmount)+Number(currentGSTAmount);if(c>a){this.isReverseAuthWhenFullEcashAndGST=true;YatraEWalletPaymentUI.reverseAuth();YatraPaymentUI.recordEventInSentry("Ecash Reverse Auth due to updated GST","info","Ecash Redemption GST");$("#redeem-ecash-button").trigger("click","auto")}else{YatraEWalletPaymentUI.setRedeemUI()}}else{YatraEWalletPaymentUI.setRedeemUI()}}else{YatraEWalletPaymentUI.setRedeemUI()}}else{YatraEWalletPaymentUI.setErrorMessage("Error occurred while redemption of eCash.");YatraEWalletPaymentUI.enableRedeemButton()}},setRedeemUI:function(){ShoppingCart.update();var c=getPaymentJSON();var b=YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON.amountInPaisa);var g=parseInt(c.cartAmount);if(YatraEWalletPaymentUI.isBookingForEcashGV()){YatraEWalletPaymentUI.getRedeemedECashBreakUp(redeemAuthJSON.walletId);if(breakUpJson.status==true){this.expEcash=breakUpJson.ExpEcash;this.nexpEcash=breakUpJson.NexpEcash}$(".total-redeemed-ecash").html(YatraPayment.formatAmount(YatraEWalletPaymentUI.getUserMoney()))}else{$(".total-redeemed-ecash").html(YatraPayment.formatAmount(b))}$(".total-amount-due").html(YatraPayment.formatAmount(c.amount));$("#eCashRedeemed").val(b);$("#available-bal").html(YatraPayment.formatAmount(parseInt(c.amount)-parseInt(b)));var e=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);var d=YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled);setTimeout(function(){$("#ecash-div .eCash-loader").hide()},1000);if(e){$("#gst_text_id").show()}else{$("#gst_text_id").hide()}if(d){YatraPaymentUI.callForRecalculatingTcs(this.nexpEcash);c=getPaymentJSON();g=parseInt(c.cartAmount)}redeemWrapper=$("#redeem-block-id");redeemApplied=$("#redeem-applied-id");$(redeemWrapper).hide();$(redeemApplied).show();YatraEWalletPaymentUI.enableRedeemButton();YatraPaymentUI.generateEmiTable();if(g==0){if(GV&&GV.gv&&GV.gv.length!=0){$("#gv").click()}else{YatraEWalletPaymentUI.hidePaymentDiv();$("#previousPayOp").val(YatraPayment.getPayOp());$(".cpmt_Paytabbox > .content").hide().removeClass("show");redeemNow=false;YatraPaymentUI.enableFirstPaymentOption()}}else{YatraEWalletPaymentUI.showPaymentDiv();$("#previousPayOp").val("")}YatraPaymentUI.pushGAInfoEWallet("Redeem Now");var a=parseFloat($("#totalRedeemableECash").val());var f=parseFloat(b);if(f<a){YatraPaymentUI.pushGAInfoEWallet("Redeem Partial - "+f+" - "+a)}},reverseAuth:function(e){if(e==undefined){e=true}var a=getPaymentJSON();YatraEWalletPaymentUI.disableCancelRedemption();var f=new Date();var c=f.getTime();var b=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);if(b){e=false}$.ajax({url:this.reverseAuthURL+"?date="+c,type:"POST",async:e,data:{cust_email:a.userEmail,ttid:a.superPNR,amount:YatraEWalletPaymentUI.getAmountInRupee(redeemAuthJSON.amountInPaisa),wallet_id:redeemAuthJSON.walletId,merchant_code:a.merchant,product_code:a.product},cache:false,success:function(d){reverseAuthJSON=$.parseJSON(d);YatraEWalletPaymentUI.setReverseAuthUI();YatraEWalletPaymentUI.expEcash=0;$("#ecash-div .eCash-loader").hide()},error:function(h,d,g){reverseAuthJSON=YatraEWalletPaymentUI.getErrorJSON("Error occurred while cancelling eCash redeemed.");YatraEWalletPaymentUI.enableCancelRedemption();$("#ecash-div .eCash-loader").hide()}})},setReverseAuthUI:function(){if(reverseAuthJSON.status==true){$(".total-redeemed-ecash").html("");$("#eCashRedeemed").val("");$("#available-bal").html("");$("#gst_text_id").hide();processWalletPayment("CANCEL-REDEEM",YatraEWalletPaymentUI.getAmountInRupee(reverseAuthJSON.amountInPaisa));YatraPaymentUI.generateEmiTable();var c=YatraPaymentUI.isGSTEnabled(detailsJson.isGSTEnabled);if(c&&!this.isReverseAuthWhenFullEcashAndGST){var d=0;var a=0;if(typeof(detailsJson.promo)!="undefined"&&detailsJson.promo!=undefined){d=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.promo.cartLabel]][detailsJson.promo.cartLabel]}if(typeof(detailsJson.discount)!="undefined"&&detailsJson.discount!=undefined){a=ShoppingCart.json[ShoppingCart.labelIndex[detailsJson.discount.cartLabel]][detailsJson.discount.cartLabel]}if(detailsJson.product!="HOLIDAY_IN"&&detailsJson.product!="HOLIDAYS_OB"){YatraPaymentUI.updateGSTCartUI(Number(Math.abs(d))+Number(Math.abs(a)))}}var b=YatraPaymentUI.isTcsEnabled(detailsJson.isTcsEnabled);if(b){YatraPaymentUI.callForRecalculatingTcs()}this.isReverseAuthWhenFullEcashAndGST=false;YatraEWalletPaymentUI.resetPreviousEcashRedeemed();YatraEWalletPaymentUI.setEWalletUI();YatraEWalletPaymentUI.resetSlider();YatraEWalletPaymentUI.showPaymentDiv();YatraPaymentUI.notifyPayopToLOB();redeemWrapper=$("#redeem-block-id");redeemApplied=$("#redeem-applied-id");$(redeemWrapper).show();$(redeemApplied).hide();YatraPaymentUI.pushGAInfoEWallet("Cancel Redemption");YatraEWalletPaymentUI.enableCancelRedemption();redeemAuthJSON=null}else{YatraEWalletPaymentUI.setErrorMessage("Error occurred while cancelling eCash redeemed.");YatraEWalletPaymentUI.enableCancelRedemption()}},refreshEWalletUI:function(){YatraEWalletPaymentUI.updateEWalletHTML()},resetSlider:function(){$(".redeem-slider").slider({orientation:"horizontal",range:"min",value:sliderMaxLimit,min:0,max:sliderMaxLimit,step:1,slide:function(a,b){$("#total-redeemable-ecash").html(b.value);$("#eCashToBeRedeemed").val(b.value);if(YatraEWalletPaymentUI.isBookingForEcashGV()){$("#nexpEcashForGVToRedeem").val(b.value)}}})},resetPreviousEcashRedeemed:function(){previousEcashRedeemed=0},hidePaymentDiv:function(){$(".cpmt_Paymentdiv").addClass("fadeOut-payment")},showPaymentDiv:function(){$(".cpmt_Paymentdiv").removeClass("fadeOut-payment")},getAmountToBeRedeemed:function(){var a=$("#eCashToBeRedeemed").val();if(isNaN(a)){return 0}else{if(roundOffCart){return parseInt(a)}else{return a}}},getEcashForGVAmountToBeRedeemed:function(){var a=parseInt($("#expEcashForGVToRedeem").val())+parseInt($("#nexpEcashForGVToRedeem").val());if(isNaN(a)){return 0}else{return parseInt(a)}},getErrorJSON:function(a){return{status:"false",responseMsg:a}},getYLP:function(){return this.expEcash},getUserMoney:function(){return this.nexpEcash},getErrorJSON:function(a){return{status:"false",responseMsg:a}},setErrorMessage:function(a){$("#ecash-error-message").html(a);$("#ecash-error-message").show();setTimeout(function(){$("#ecash-error-message").hide("blind",{},500)},5000)},getAmountInPaise:function(a){return parseInt(a)*100},getAmountInRupee:function(a){return parseInt(a)/100},getCashAmount:function(){var d=$("#eCashRedeemed").val();if(d!=undefined&&d!=null&&d!=""){var b=parseInt(d);var a=getPaymentJSON();var c=parseInt(a.amount);return parseInt(c-b)}},disableRedeemButton:function(){$("#redeem-ecash-button").addClass("cpmt_disable_button");$("#redeem-ecash-button").prop("disabled",true)},enableRedeemButton:function(){$("#redeem-ecash-button").removeClass("cpmt_disable_button");$("#redeem-ecash-button").addClass("ytBtn ytBtnOrange");$("#redeem-ecash-button").prop("disabled",false)},disableCancelRedemption:function(){$(".cancel-redemption-active").hide();$(".cancel-redemption-inactive").show()},enableCancelRedemption:function(){$(".cancel-redemption-active").show();$(".cancel-redemption-inactive").hide()},isCompleteEwalletPayment:function(){var a=getPaymentJSON();if(a.cartAmount!=undefined){var b=parseInt(a.cartAmount);return(b==0)}return false}};var YatraFBPaymentUI={initialiseFB:false,postLogin:function(b,g){var d=YatraFBPaymentUI.getQBAuthURLForFBUser();var a=getPaymentJSON();var f=a.merchant;var e=a.product;var c=null;if(g!=null||g!=undefined){c=g.authResponse.accessToken}$.ajax({url:d,timeout:(5*1000),type:"POST",data:{merchant:f,product:e,accessToken:c,sourcepage:window.location.href},cache:false,success:function(h){YatraQBPaymentUI.generateQBHtmlFromJson(h)},error:function(k,h,j){alert("Error occurred while authenticating via facebook.. Please try again or use some other payment option..")}})},getQBAuthURLForFBUser:function(){return"/PaySwift/authenticate-fb-user.htm"},executeFn:function(a,d,b){return function(){a.apply(d,b)}},initFB:function(){YatraFBPaymentUI.initialiseFB=true;FB.init({appId:"326464424135609",cookie:true,status:true,xfbml:true,oauth:true})},getLoggedInFb:function(b,a,d){var c=null;if(!YatraFBPaymentUI.initialiseFB){YatraFBPaymentUI.initFB()}FB.login(function(e){if(e!=undefined&&e.status=="connected"&&e.authResponse!=null){c=e}a[a.length]=c;YatraFBPaymentUI.executeFn(b,this,a)()},{scope:"email"})},fbLogin:function(a,c,b){if(a==null||a=="undefined"){YatraFBPaymentUI.getLoggedInFb(YatraFBPaymentUI.postLogin,c,b)}},loginByFacebook:function(){authResponse={status:"noResponse"};YatraFBPaymentUI.fbLogin(null,[authResponse],"signin")}};var enableQuickBook=false;var showQB=false;var showQBCards=false;var showSaveOption=false;var showAuthDiv=false;var qbAuthFailed=false;var YatraQBPaymentUI={updateQBDiv:function(){var a=YatraQBPaymentUI.getSSOToken();if(enableQuickBook&&a!=undefined&&a!=null){YatraQBPaymentUI.getQuickBookCards()}else{YatraQBPaymentUI.removeQuickBookCards()}},getQuickBookCards:function(){try{if(qbJson!=undefined&&qbJson!=null&&qbJson!=""&&qbJson!="null"){YatraQBPaymentUI.generateQBHtmlFromJson(qbJson)}else{YatraQBPaymentUI.getQBJsonAndGenerateHtml()}}catch(a){log_error(a)}},getQBJsonAndGenerateHtml:function(){var a=getPaymentJSON();if(a!=undefined&&a!=null){var c=a.merchant;var b=a.product;var d=YatraQBPaymentUI.getQBJsonURL();$.ajax({url:d,timeout:(5*1000),type:"POST",async:false,data:{merchant:c,product:b},cache:false,success:function(e){qbJson=e;YatraQBPaymentUI.generateQBHtmlFromJson(e)},error:function(g,e,f){alert("Error while getting quickbook cards.")}})}},getQBJsonURL:function(){return"/PaySwift/qb.htm"},generateQBHtmlFromJson:function(a){YatraQBPaymentUI.processQuickBookResponse(a);try{if($.browser.msie&&parseInt($.browser.version)<9){$(".cpmt_quickBook").find("span.custom-Radiobox").removeClass("custom-Radiobox")}}catch(b){}},removeQuickBookCards:function(){showQB=false;showQBCards=false;showSaveOption=false;showAuthDiv=false;qbAuthFailed=false;qbJson="";$("#tab_ccQB").html("");$("#tab_dcQB").html("");$("#cc_SaveOptionDiv").hide();$("#cc_saveQuickBookCard_id").val("false");$("#dc_SaveOptionDiv").hide();$("#dc_saveQuickBookCard_id").val("false");$("#qb_newCreditCard").hide();$("#cc_newCard").show();$('#tab_cc_qb > input[name="payop"]').val("cc");$("#qb_newDebitCard").hide();$("#dc_newCard").show();$('#tab_dc_qb > input[name="payop"]').val("dc");$("#cc_qbEnabled").val("false");$("#dc_qbEnabled").val("false");YatraPaymentUI.notifyPayopToLOB()},getSSOToken:function(){var b,a,d;var c=document.cookie.split(";");for(b=0;b<c.length;b++){a=c[b].substr(0,c[b].indexOf("="));d=c[b].substr(c[b].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a=="userName"){return unescape(d)}}},processQuickBookResponse:function(d){var h=YatraQBPaymentUI.getQBDiv(d);if(typeof(h)!="undefined"&&h!=null){if(showQBCards){if(typeof(h.qbCcCards)!="undefined"&&h.qbCcCards!=null){$("#tab_ccQB").html(h.qbCcCards);$("#cc_newCard .save_card").show();$("#qb_newCreditCard").show();$("#cc_newCard_id").prop("checked",false);$("#cc_newCard .heading-p").hide();$("#cc_qbEnabled").val("true");$('#tab_cc_qb > input[name="payop"]').val("qb");$(".qb_ccCVV").focus(function(){$(".card-logos").addClass("dummy");$(".card-logos").removeClass("VISA");$(".card-logos").removeClass("MASTER");$(".card-logos").removeClass("DINERS");$(".card-logos").removeClass("AMEX");$(".card-logos").removeClass("RUPAY");$(".card-logos").removeClass("MAEST");binNumber="";$("#cc_cno_id").val("");$("#cc_cardholder_name_id").val("");$("#cc_expm_id").val("");$("#cc_expy_id").val("");$("#cc_cvv_id").val("");$("#cc_process-pay-type").hide();$(".qb_ccCVV").removeClass("nonValidate");$("#cc_cno_id").addClass("nonValidate");$("#cc_cardholder_name_id").addClass("nonValidate");$("#cc_expm_id").addClass("nonValidate");$("#cc_expy_id").addClass("nonValidate");$("#cc_cvv_id").addClass("nonValidate")});$(".qb_ccCVV").click(function(){$(".qb_ccCVV").removeClass("nonValidate");$("#cc_cno_id").addClass("nonValidate");$("#cc_cardholder_name_id").addClass("nonValidate");$("#cc_expm_id").addClass("nonValidate");$("#cc_expy_id").addClass("nonValidate");$("#cc_cvv_id").addClass("nonValidate")});$("#cc_cno_id,#cc_cardholder_name_id,#cc_expm_id,#cc_expy_id,#cc_cvv_id").focus(function(){$(".qb_ccCVV").val("");$('#tab_cc_qb > input[name="payop"]').val("cc");$("#cc_cno_id").removeClass("nonValidate");$("#cc_cardholder_name_id").removeClass("nonValidate");$("#cc_expm_id").removeClass("nonValidate");$("#cc_expy_id").removeClass("nonValidate");$("#cc_cvv_id").removeClass("nonValidate");$(".qb_ccCVV").addClass("nonValidate");$(".qb_multiFlowDiv").hide();$("#tab_cc_qb ul").find("li.active input[name=qb_cvv]").css({background:"#dedede"});$(".cpmt_quickBook ul li.active").removeClass("active").addClass("deactive")})}else{$("#tab_ccQB").html("");$("#cc_newCard .save_card").hide();$("#qb_newCreditCard").hide();$("#cc_newCard").show();$('#tab_cc_qb > input[name="payop"]').val("cc");$("#cc_qbEnabled").val("false")}if(typeof(h.qbDcCards)!="undefined"&&h.qbDcCards!=null){$("#tab_dcQB").html(h.qbDcCards);$("#dc_newCard .save_card").show();$("#qb_newDebitCard").show();$("#dc_newCard_id").prop("checked",false);$("#dc_newCard .heading-p").hide();$("#dc_qbEnabled").val("true");$('#tab_dc_qb > input[name="payop"]').val("qb");$(".qb_dcCVV").focus(function(){$(".card-logos").addClass("dummy");$(".card-logos").removeClass("VISA");$(".card-logos").removeClass("MASTER");$(".card-logos").removeClass("DINERS");$(".card-logos").removeClass("AMEX");$(".card-logos").removeClass("RUPAY");$(".card-logos").removeClass("MAEST");binNumber="";$("#dc_cno_id").val("");$("#dc_cardholder_name_id").val("");$("#dc_expm_id").val("");$("#dc_expy_id").val("");$("#dc_cvv_id").val("");$("#dc_process-pay-type").hide();$(".qb_dcCVV").removeClass("nonValidate");$("#dc_cno_id").addClass("nonValidate");$("#dc_cardholder_name_id").addClass("nonValidate");$("#dc_expm_id").addClass("nonValidate");$("#dc_expy_id").addClass("nonValidate");$("#dc_cvv_id").addClass("nonValidate")});$(".qb_dcCVV").click(function(){$(".qb_dcCVV").removeClass("nonValidate");$("#dc_cno_id").addClass("nonValidate");$("#dc_cardholder_name_id").addClass("nonValidate");$("#dc_expm_id").addClass("nonValidate");$("#dc_expy_id").addClass("nonValidate");$("#dc_cvv_id").addClass("nonValidate")});$("#dc_cno_id,#dc_cardholder_name_id,#dc_expm_id,#dc_expy_id,#dc_cvv_id").focus(function(){$(".qb_dcCVV").val("");$('#tab_dc_qb > input[name="payop"]').val("dc");$("#dc_cno_id").removeClass("nonValidate");$("#dc_cardholder_name_id").removeClass("nonValidate");$("#dc_expm_id").removeClass("nonValidate");$("#dc_expy_id").removeClass("nonValidate");$("#dc_cvv_id").removeClass("nonValidate");$(".qb_dcCVV").addClass("nonValidate");$(".qb_multiFlowDiv").hide();$("#tab_dc_qb ul").find("li.active input[name=qb_cvv]").css({background:"#dedede"});$(".cpmt_quickBook ul li.active").removeClass("active").addClass("deactive")})}else{$("#tab_dcQB").html("");$("#dc_newCard .save_card").hide();$("#qb_newDebitCard").hide();$("#dc_newCard").show();$('#tab_dc_qb > input[name="payop"]').val("dc");$("#dc_qbEnabled").val("false")}showAuthDiv=false;YatraQBPaymentUI.registerDeleteCardEvent();var c=YatraPaymentUI.getPaymentOption();if(c=="cc"){var a=$('#tab_ccQB input:radio[name="cardid"]:nth(0)');$(a).attr("checked","checked");YatraPaymentUI.enableQBCVVForCheckedCreditCard(a);if($(a).attr("cardNumberOriginal")!=null&&$(a).attr("cardNumberOriginal")!=undefined){var f=$(a).attr("cardNumberOriginal");var g=f.replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(g);YatraPaymentUI.setSkipOtpUiForQBIfRequired(a,"cc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired(a,"cc",b)}YatraPaymentUI.handleInternationalQBCard(a)}else{if(c=="dc"){var e=$('#tab_dcQB input:radio[name="cardid"]:nth(0)');$(e).attr("checked","checked");YatraPaymentUI.enableQBCVVForCheckedDebitCard(e);if($(e).attr("cardNumberOriginal")!=null&&$(e).attr("cardNumberOriginal")!=undefined){var f=$(e).attr("cardNumberOriginal");var g=f.replace(/-/g,"");var b=YatraPaymentUI.getBinDetails(g);YatraPaymentUI.setSkipOtpUiForQBIfRequired(e,"dc",b);YatraPaymentUI.setMultiPayUiForQBIfRequired(e,"dc",b)}YatraPaymentUI.handleInternationalQBCard(e)}}YatraQBPaymentUI.hideQBAuthFailMessage();YatraQBPaymentUI.IE_hideQBPassMessage()}if(typeof(h.authDivCC)!="undefined"&&typeof(h.authDivDC)!="undefined"){showAuthDiv=true;$("#tab_ccQB").html(h.authDivCC);$("#tab_dcQB").html(h.authDivDC);$("#qb_newCreditCard").show();$("#cc_newCard_id").prop("checked",false);$("#cc_qbEnabled").val("true");$('#tab_cc_qb > input[name="payop"]').val("cc");$("#qb_newDebitCard").show();$("#dc_newCard_id").prop("checked",false);$("#dc_qbEnabled").val("true");$('#tab_dc_qb > input[name="payop"]').val("dc");if(qbAuthFailed){YatraQBPaymentUI.showQBAuthFailMessage()}else{YatraQBPaymentUI.IE_showQBPassMessage()}}YatraQBPaymentUI.innerSwitch("#tab_ccQB");YatraQBPaymentUI.innerSwitch("#tab_dcQB");YatraPaymentUI.addEventsForQB()}if(showSaveOption&&"true"==showQBCheckBox){$("#cc_SaveOptionDiv").show();$("#cc_saveQuickBookCard_id").val("true");$("#dc_SaveOptionDiv").show();$("#dc_saveQuickBookCard_id").val("true")}YatraPaymentUI.notifyPayopToLOB()},getQBDiv:function(c){if(c!=null&&typeof(c)!="undefined"&&c!=""&&c!="null"){var a=new Object();var d=$.parseJSON(c);if(d!=null&&typeof(d.status)!="undefined"){if(d.saveCard=="ENABLED"){showSaveOption=true}if(d.status=="ENABLED"){showQB=true;if(d.authenticationFailed||d.authenticationRequired){a.authDivCC=YatraQBPaymentUI.getQBAuthenticationDiv(d,"cc");a.authDivDC=YatraQBPaymentUI.getQBAuthenticationDiv(d,"dc");var b="";if(detailsJson!=undefined&&detailsJson!=null){var e=detailsJson.userDetails;if(e!=undefined&&e!=null){b=e.email}}if(d.authenticationFailed){qbAuthFailed=true;YatraPaymentUI.recordEventInSentry("QuickBook: Failed to authenticate","error","qb-access-auth-fail","emailId",b)}else{YatraPaymentUI.recordEventInSentry("QuickBook: ssoToken stale, Authentication Required","info","qb-access-auth-require","emailId",b)}}else{showQBCards=true;a.qbCcCards=YatraQBPaymentUI.getQBCardsDiv(d,"Credit Card");a.qbDcCards=YatraQBPaymentUI.getQBCardsDiv(d,"Debit Card")}return a}}}},getQBAuthenticationDiv:function(f,e){var c="";if(detailsJson!=undefined&&detailsJson!=null){var h=detailsJson.userDetails;if(h!=undefined&&h!=null){c=h.email}}var d=YatraQBPaymentUI.getQBAuthRequiredMessage();var g='<p class="qblogin_heading"><span>Pay Using Saved Cards</span></p><p style="margin-top:20px"><span>'+d+"</span></p>";var b='<div id="qb_auth_fail_msg_'+e+'" style="font-size: 13px; color : red; display:none;float:left">';b+=YatraQBPaymentUI.getQBAuthFailedMessage()+"</div>";var a='<div id="qb_pass_msg_'+e+'" style="font-size: 13px; color : black; display:none;clear:both">';a+=YatraQBPaymentUI.IE_getQBPassMessage()+"</div>";if(f.authMode=="FACEBOOK"){g+='<input type="button" class="PaymentSprite FbLogin" onclick="YatraQBPaymentUI.authenticateFBUserForQB()"><div class="clear">&nbsp;</div>'}else{g+='<div class="new_cc_ui"><div class="qbLogin loginContainer"><div class="mt5 qb_mail">';g+='<input type="text" id="qb_user_email_'+e+'" class="ie6Input qb_mail_input" disabled="disabled" value="'+c+'" /></div><div class="mt5 qb_pwd">';g+='<input type="password" placeholder="Enter your password" class="ie6Input qb_pwd_input" id="qb_password_'+e+'" processQBPassword="true"/></div>';g+='<div class="qb_loginbtn"><input type="button" class="cpmt_Btn cpmt_BtnOrange latoBold qb_loginbtn_input" value="Login" onclick="YatraQBPaymentUI.authenticateYatraUserForQB()">';g+='</div></div><div class="clear">&nbsp;</div>'}g+=b+a;g+="</div>";return g},getAMEXAddressDiv:function(a){a+='<div id="qb_AddressShowHide" class="flL" style="display:none;">';a+='<article class="cpmt_amexCreditC" >';a+='<p class="block">Where was your Amex card issued?</p>';a+='<div class="mt10"><div class="cpmt_countryBox"><label for="qb_domestic_address_rdo">';a+='<span class="custom-Radiobox">';a+='<input type="radio" checked="checked" class="cpmt_alignMid radioMid" value="Domestic" id="qb_domestic_address_rdo" name="qb_address_check_rdo">';a+='<span class="box"><b class="tick"></b></span></span>India</label></div>';a+='<div class="cpmt_countryBox cpmt_international"><label for="qb_international_address_rdo">';a+='<span class="custom-Radiobox">';a+='<input type="radio" class="cpmt_alignMid radioMid" value="International" id="qb_international_address_rdo" name="qb_address_check_rdo">';a+='<span class="box"><b class="tick"></b></span></span>Outside India</label></div></div></article></div>';return a},getBillingAdddressDiv:function(c,a){c+='<div class="cpmt_IntCardDetails" id="qb_pmt_addressId" style="display:none;">';var b=$("#cc_pmt_addressId_template").html();b=b.replace(/temp/g,"qb_"+a);c+=b;c+="</div>";return c},getQBCardsDiv:function(m,b){var g;var o;var c;var h;if(b=="Credit Card"){g="qb_ccCVV";o="cc";c="ccCVV";h="ccMultiFlowId"}if(b=="Debit Card"){g="qb_dcCVV";o="dc";c="dcCVV";h="dcMultiFlowId"}var e='<div id="'+o+'_qb_divErrMsgBlock" class="pmt_errMsgBlock qb_msg" style="display:none;"></div>';e+='<div id="'+o+'_qb_divWarningMsgBlock" class="pmt_warningMsgBlock qb_msg" style="display:none;"></div>';e+='<p class="div_quickBook"><span class="mb-35" style="display:block;width:100%;float:left;font-size:18px;color:#666;" id="payWithQB">Your Tokenized Cards</span><label style="display:none;float:left;margin-bottom:10px;font-size:16px;cursor:pointer;" for="'+o+'_quickOrCard"><span class="custom-Radiobox" style="left:-1px"><input type="radio" class="cpmt_alignMid" id="'+o+'_quickOrCard" name="'+o+'_quickOrCard" checked="true"><span class="box"><b class="tick"></b></span></span><span style="margin-top:8px;margin-left:5px;float:left;font-size:16px;">Saved Cards</span></label></span></span></p><ul class="js-quick noListStyle div_quickBook pd-btm-0">';var d=m.quickBookCards;var k=0;var l=" ";var a=0;for(var f=0;f<d.length;f++){if(a==0){l="active"}else{l=" "}if(d[f].cardTypeLabel==b){var j=detailsJson.hasOwnProperty("crpInfo");if(j){var p=d[f].cardNumber;var n=d[f].cardNumber;p=p.replace(/^.{7}/g,"xxxx-xx")}else{var p=d[f].cardNumber}e+='<li li_index="'+k+'" class="'+o+"_"+k+" "+l+'">';e+="<label for="+d[f].cardId+'><span class="custom-Radiobox" style="visibility:hidden;margin-left:-10px;">';e+='<input type="radio" name="cardid" onclick=\'YatraPaymentUI.pushGAInfoForQuickBook("Use Saved Quickbook Card")\' id='+d[f].cardId+" value="+d[f].cardId;e+=" cardType="+d[f].cardBrand+' processCardId="'+o+'"';e+=" cardNumber="+p;e+=" cardNumberOriginal="+n;e+=' isAddressSaved="'+d[f].addressSaved+'" cardAccessType="'+d[f].cardAccessType+'"><span class="box"><b class="tick"></b></span></span>';e+='<i class="PaymentSprite '+d[f].cardLogoURL+'"></i>';e+='<div class="block-quickBook"><!--span class="wfull"> '+d[f].cardBrand+"</span-->";e+='<span class="wfull" style="font-size:14px;margin-top:7px;"> '+p+"</span></div>";e+='<div class="flR" style="margin-right:10px;"><span class="cpmt_CVVno">'+d[f].cvvLabel;e+='<small class="cpmt_cvvLength" style="display:none;">'+d[f].cvvLength+'-digit Number</small><i class="ico_info_cvv PaymentSprite" style="float:right;margin-right:5px;margin-top:3px;"></i><div class="info-tooltip"><div class="tooltip-content"><i class="PaymentSprite pay_cvvno"></i><div class="cpmt_CVVtxt" id="cc_cvvImageText_id" defaultval="3 digit CVV Number">3 digit CVV Number</div></div></div></span>';e+='<input type="password" name="qb_cvv" value="" id="'+g+k+'" readonly autocomplete="new-password" style="background-color: #DEDEDE;padding:7px"';e+=' processCVV="'+c+'" class="w45 cpmt_alignMid ie6Input cvvInput '+g+'" maxlength='+d[f].cvvLength+"/></div></label>";if(d[f].cardBrand=="AMEX"){e=YatraQBPaymentUI.getAMEXAddressDiv(e)}e=YatraQBPaymentUI.getBillingAdddressDiv(e,f);e+="</li>";e=YatraQBPaymentUI.getMultiPayFlowDiv(e,d[f].cardId);k++;a++}}if(k==0){return null}if(k>2){e+='<a class="cpmt_flR" href="javascript:void(0);" onclick=\'YatraPaymentUI.pushGAInfoForQuickBook("View More Quickbook Cards")\' attribute="view_more">View More</a>'}e+="</ul>";return e},validateQBAuth:function(){var a=YatraPaymentUI.getPaymentOption();if(a!="cc"&&a!="dc"){return true}if(YatraEWalletPaymentUI.isCompleteEwalletPayment()){return true}var b=false;if((a=="cc")||(a=="dc")){b=true}if(showAuthDiv&&!b){YatraQBPaymentUI.showQBAuthFailMessage();YatraQBPaymentUI.showQBPassReqdMessage();return false}return true},showQBAuthFailMessage:function(){YatraQBPaymentUI.IE_hideQBPassMessage();$("#qb_auth_fail_msg_cc").show();$("#qb_auth_fail_msg_dc").show()},showQBPassReqdMessage:function(){var a=YatraPaymentUI.getPaymentOption();if(a=="cc"){Toast.show("* required","qb_password_cc");$("#qb_password_cc").focus()}if(a=="dc"){Toast.show("* required","qb_password_dc");$("#qb_password_dc").focus()}},hideQBAuthFailMessage:function(){if($("#qb_auth_fail_msg_cc")){$("#qb_auth_fail_msg_cc").hide()}if($("#qb_auth_fail_msg_dc")){$("#qb_auth_fail_msg_dc").hide()}},getQBAuthRequiredMessage:function(){var a="For security reasons please log in to proceed";return a},getQBAuthFailedMessage:function(){var a="Your Yatra login failed. Please try again or proceed with some other payment option.";return a},IE_showQBPassMessage:function(){if($.browser.msie&&parseInt($.browser.version)<10){$("#qb_pass_msg_cc").show();$("#qb_pass_msg_dc").show()}},IE_hideQBPassMessage:function(){if($("#qb_pass_msg_cc")){$("#qb_pass_msg_cc").hide()}if($("#qb_pass_msg_dc")){$("#qb_pass_msg_dc").hide()}},IE_getQBPassMessage:function(){var a="Enter your password.";return a},registerDeleteCardEvent:function(){$(".js-quick li .removeIcon").each(function(a){$(this).on("click",function(){var b=$(this).parents("li").attr("li_index");var d=$(this).parents("li").find(".custom-Radiobox input").attr("value");var k=$(this).parents("li").attr("class");k=k.substring(0,k.indexOf("_"));YatraPaymentUI.callOnCardEntry("RESET","","");var e=$(this).parents("ul").children("li").length;if(e>1){$(this).parents("li").remove();$(".js-quick ."+k+"_"+(parseInt(b)+1)).show();var m=YatraPayment.getPayOp();if(k=="cc"){if(m=="qb"){var f=$('#tab_ccQB input:radio[name="cardid"]:nth(0)');$(f).prop("checked",true);YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard(f);YatraPaymentUI.enableQBCVVForCheckedCreditCard(f);if($(f).attr("cardNumberOriginal")!=null&&$(f).attr("cardNumberOriginal")!=undefined){var n=$(f).attr("cardNumberOriginal").replace(/-/g,"");var h=YatraPaymentUI.getBinDetails(n);YatraPaymentUI.setSkipOtpUiForQBIfRequired(f,"cc",h);YatraPaymentUI.setMultiPayUiForQBIfRequired(f,"cc",h)}}if(e==2){$("#tab_ccQB").find(".cpmt_flR").hide()}}if(k=="dc"){if(m=="qb"){var j=$('#tab_dcQB input:radio[name="cardid"]:nth(0)');$(j).prop("checked",true);YatraPaymentUI.disableQBCVVForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.disableMultiFlowUiForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard(j);YatraPaymentUI.enableQBCVVForCheckedDebitCard(j);if($(j).attr("cardNumberOriginal")!=null&&$(j).attr("cardNumberOriginal")!=undefined){var n=$(j).attr("cardNumberOriginal").replace(/-/g,"");var h=YatraPaymentUI.getBinDetails(n);YatraPaymentUI.setSkipOtpUiForQBIfRequired(j,"dc",h);YatraPaymentUI.setMultiPayUiForQBIfRequired(j,"dc",h)}}if(e==2){$("#tab_dcQB").find(".cpmt_flR").hide()}}}else{$(this).parents("li").remove();if(k=="cc"){$("#tab_ccQB").find(".div_quickBook").hide();$("#payWithQB").html("Pay with Credit Card");$("#cc_newCard .heading-p").show();$("#cc_qbEnabled").val("false");$("#qb_newCreditCard").hide();$("#cc_newCard").show();$('#tab_cc_qb > input[name="payop"]').val("cc");YatraPaymentUI.notifyPayopToLOB()}if(k=="dc"){$("#tab_dcQB").find(".div_quickBook").hide();$("#payWithQB").html("Pay with Debit Card");$("#dc_newCard .heading-p").show();$("#dc_qbEnabled").val("false");$("#qb_newDebitCard").hide();$("#dc_newCard").show();$('#tab_dc_qb > input[name="payop"]').val("dc");YatraPaymentUI.notifyPayopToLOB()}}var g=getPaymentJSON();var c=g.merchant;var l=g.product;YatraQBPaymentUI.deleteQBCard(d,c,l)})})},innerSwitch:function(a){var b=$(a);$("#dc_quickOrCard").prop("checked",true);$("#cc_quickOrCard").prop("checked",true);setTimeout(function(){b.find("ul.noListStyle li").not("li:eq(0), li:eq(1)").slideUp()},100);b.find(".noListStyle").off("click");b.find(".noListStyle").on("click","a.cpmt_flR",function(g){var f=this;if($(this).attr("attribute")=="view_more"){$(this).parents(".noListStyle").find("li:not(:visible)").slideDown();$(this).attr("attribute","view_less");$(this).text("View Less")}else{if($(this).attr("attribute")=="view_less"){var m=$(this).parents(".noListStyle").find("li").length;for(var d=2;d<m;d++){$(f).parents(".noListStyle").find("li:eq("+d+")").slideUp()}$(this).attr("attribute","view_more");$(this).text("View More");var c=YatraPayment.getPayOp();if(c=="qb"){var k=YatraPaymentUI.getPaymentOption();if(k=="cc"){var h=$('#tab_ccQB input:radio[name="cardid"]:nth(0)');$(h).attr("checked","checked");h.click();if($(h).attr("cardNumberOriginal")!=null&&$(h).attr("cardNumberOriginal")!=undefined){var n=$(h).attr("cardNumberOriginal").replace(/-/g,"");var l=YatraPaymentUI.getBinDetails(n);YatraPaymentUI.disableMultiFlowUiForCreditCard($("input:radio[processCardId=cc]"))}$("#tab_ccQB ul li:first").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableQBCVVForCreditCard($("input:radio[processCardId=cc]"));YatraPaymentUI.handleInternationalQBCard(h);YatraPaymentUI.enableQBCVVForCheckedCreditCard(h);YatraPaymentUI.setSkipOtpUiForQBIfRequired(h,"cc",l);YatraPaymentUI.setMultiPayUiForQBIfRequired(h,"cc",l)}else{if(k=="dc"){var j=$('#tab_dcQB input:radio[name="cardid"]:nth(0)');$(j).attr("checked","checked");j.click();if($(j).attr("cardNumberOriginal")!=null&&$(j).attr("cardNumberOriginal")!=undefined){var n=$(j).attr("cardNumberOriginal").replace(/-/g,"");var l=YatraPaymentUI.getBinDetails(n);YatraPaymentUI.disableMultiFlowUiForDebitCard($("input:radio[processCardId=dc]"))}$("#tab_dcQB ul li:first").addClass("active").siblings().removeClass("active");YatraPaymentUI.disableQBCVVForDebitCard($("input:radio[processCardId=dc]"));YatraPaymentUI.handleInternationalQBCard(j);YatraPaymentUI.enableQBCVVForCheckedDebitCard(j);YatraPaymentUI.setSkipOtpUiForQBIfRequired(j,"dc",l);YatraPaymentUI.setMultiPayUiForQBIfRequired(j,"dc",l)}}}}}})},authenticateYatraUserForQB:function(){var h=YatraQBPaymentUI.getQBAuthURLForYatraUser();var d=getPaymentJSON();var a=d.merchant;var f=d.product;var e=YatraPaymentUI.getPaymentOption();var b="qb_password_"+e;var j="qb_user_email_"+e;var g=$("#"+b).val();var c=$("#"+j).val();if(g==""||g==undefined||g==null){YatraQBPaymentUI.showQBPassReqdMessage();return}YatraPaymentUI.disableNewCreditCard();YatraPaymentUI.disableNewDebitCard();$.ajax({url:h,timeout:(5*1000),type:"POST",data:{merchant:a,product:f,email:c,password:g},cache:false,success:function(k){if(JSON.parse(k).status=="ENABLED"&&JSON.parse(k).quickBookCards.length){YatraPaymentUI.adobeTrackPaymentQBData()}YatraQBPaymentUI.generateQBHtmlFromJson(k);if(isssoTokenStaleForCorpCards!=undefined&&isssoTokenStaleForCorpCards==true){YatraCorpCardUI.getCorpCardsAfterReLogin()}},error:function(m,k,l){alert("Error occurred while authenticating.. Please try again or use some other payment option..")}})},getQBAuthURLForYatraUser:function(){return"/PaySwift/authenticate-yatra-user.htm"},authenticateFBUserForQB:function(){YatraPaymentUI.disableNewCreditCard();YatraPaymentUI.disableNewDebitCard();YatraFBPaymentUI.loginByFacebook()},resetQB:function(a){var b=$(a);setTimeout(function(){b.find("ul.noListStyle li").not("li:eq(0), li:eq(1)").slideUp()},100);b.find("ul.noListStyle a").attr("attribute","view_more");b.find("ul.noListStyle a").text("View More")},deleteQBCard:function(d,c,b){var a=YatraQBPaymentUI.getQBDeleteCardURL();$.ajax({url:a,type:"POST",data:{merchant:c,product:b,cardid:d,csrfToken:csrfToken},cache:false,success:function(e){},error:function(g,e,f){alert("Error while deleting quickbook card.")}})},getQBDeleteCardURL:function(){return"/PaySwift/delete-qb-card.htm"},getQBCardId:function(){var a=YatraPayment.getPaymentDiv();return $(a+" input[name= cardid]:checked").val()},getQBCardNumber:function(){var a=YatraPayment.getPaymentDiv();return $(a+" input[name= cardid]:checked").attr("cardNumberOriginal").trim().replace(/-/g,"")},getQBCardType:function(){var a=YatraPayment.getPaymentDiv();return $(a+" input[name= cardid]:checked").attr("cardtype")},getMultiPayFlowDiv:function(a,b){a+='<div class="qb_multiFlowDiv" id="qb_pmt_MultiFlowId_'+b+'" style="display:none;font-size: 12px;margin-top: 0px;position: relative;top: -6px;clear:both">';a+='<span style="font-weight: 600;color: #666;">Complete your payment using</span>';a+='<div class=" wfull" style="margin-bottom: 10px;margin-top: 8px;color: #666;" id="multiflow_type_div_'+b+'">';a+="</div></div>";return a}};var YatraCorpCardUI={cardList:[],cardListUrl:"/PaySwift/corporate-quickbook/corporateCardsTokenizationStatus?corporateId",updateCorpCardDiv:function(){if(isssoTokenStaleForCorpCards!=undefined&&isssoTokenStaleForCorpCards==true){YatraCorpCardUI.getCorpCardAuthenticationDiv()}},initialise:function(){var a=$('#corpCard input[type="radio"]')[0];$(a).attr("checked","checked");YatraCorpCardUI.handleCorpUI(a)},getCorporateCards:function(a){},getCorpCardURL:function(){return"/PaySwift/corporate-cards-html"},getCorpCardAuthenticationDiv:function(){var a="";if(detailsJson!=undefined&&detailsJson!=null){var b=detailsJson.userDetails;if(b!=undefined&&b!=null){a=b.email}}$("#corp_user_email").val(a);$("#corpCardAuthRequire").show();$("#corpLogin").show();YatraPaymentUI.recordEventInSentry("Corp Card: ssotoken stale, Authentication Required","info","corpcard-access-auth-require","emailId",a)},setUserEmailForAuth:function(){var a="";if(detailsJson!=undefined&&detailsJson!=null){var b=detailsJson.userDetails;if(b!=undefined&&b!=null){a=b.email}}$("#corp_user_email").val(a)},authenticateCorporateUser:function(){var b=$("#corp_user_email").val();var a=$("#corp_user_password").val();$.ajax({url:"/PaySwift/corporate-login.htm",type:"POST",data:"emailId="+b+"&password="+a,success:function(c){if(c!=null){if(c.status=="SUCCESS"){YatraCorpCardUI.updateCorpCardDivOnLoginSuccess(b,c.tokenId)}if((c.status=="FAIL")){YatraCorpCardUI.updateCorpCardDivOnLoginFailure();YatraPaymentUI.recordEventInSentry("Corp Card: Failed to authenticate","error","corpcard-access-auth-fail","emailId",b)}}}})},updateCorpCardDivOnLoginSuccess:function(a,b){$("#corpCardAuthRequire").hide();$("#corpLogin").hide();$("#corpAuthFailMsg").hide();$("#waitCorpCards").show();YatraCorpCardUI.updatessoTokenInB2BService(a,b)},updateCorpCardDivOnLoginFailure:function(){$("#corpAuthFailMsg").show()},updatessoTokenInB2BService:function(a,b){$.ajax({url:"/PaySwift/agent-login.htm",type:"POST",data:{email:a,ssoToken:b},success:function(c){if(c==null||c.resCode!="200"){$("#corpAuthFailMsg").text("Your login failed. Please proceed with some other payment option");$("#corpAuthFailMsg").show()}if(c!=null&&c.resCode=="200"){YatraCorpCardUI.getCorpCardsAfterReLogin(b);YatraQBPaymentUI.getQBJsonAndGenerateHtml()}}})},getCorpCardsAfterReLogin:function(a){$.ajax({url:"/PaySwift/corporate-cards-json.htm",type:"POST",data:"ssoToken="+a,success:function(b){var c=$.parseJSON(b);var d=YatraCorpCardUI.getCorpCardsDiv(c);$(".corpCardArticleTab").html("");$("#waitCorpCards").hide();$("#corpCardAuthRequire").hide();$("#corpLogin").hide();$("#corpAuthFailMsg").hide();$(".corpCardArticleTab").html(d);YatraCorpCardUI.initialise()}})},getCorpCardsDiv:function(f){var a='<ul class="noListStyle">';for(var k in f){var e=f[k]["cardId"];var b=f[k]["cardType"];var h=f[k]["cardNumber1"];var g=f[k]["cardNumber2"];var d=f[k]["cardNumber3"];var c=f[k]["cardNumber4"];var j=f[k]["firstName"];var l=f[k]["lastName"];a+="<li>";a+='<label style="width:82%" for='+e+">";a+='<span class="custom-Radiobox" style="visibility:hidden;margin-left:-10px;"><input type="radio" name="cardId" id='+e+" value="+e+" cardType ="+b+" cardBrand="+f[k]["cardBrand"]+" cardNumber ="+h+g+d+c+' processCardId="corpCard">';a+='<span class="box"><b class="tick"></b></span></span>';a+='<i class="PaymentSprite '+f[k]["cardBrand"]+'_cc"></i>';a+='<span class="cpmt_qbCardType">'+b+'</span><span class="cpmt_qbCardNo">'+h+"-"+g+"-"+d+"-"+c+"</span></label>";if(b=="CORPORATE"){a+='<span class="corporateCvv"><label for="corpCard_ccCVV ie6"><span class="cpmt_CVVno" style="display:none">CVV<small class="cpmt_cvvLength">3-digit Number</small></span>';a+='<input type="password" value="" id="corporate_cvv_id" placeholder="CVV" name="corpCard_ccCVV" processCVV="corpCardCVV" class="w45 cvvInput cpmt_alignMid ie6Input" maxlength=3  data-validation="required|regType[number]|lenCheck[3]" data-msginfo="* required|* number only|* invalid cvv length" />';a+="</label></span>"}a+='<div style="display: block; width: 50%; margin-left: 170px; ">'+j+" "+l+"</div></li>"}a+="</ul>";return a},handleCorpUI:function(c){$("#corpCard_cardType_id").val($(c).attr("cardType"));$("#corpCard_cno_id").val($(c).attr("cardNumber"));$("#corpCard_cardBrand_id").val($(c).attr("cardBrand"));$("#corpCard_email_id").val($(c).attr("email"));$("#corpCard_mob_id").val($(c).attr("mob"));$("#corpCard_cvv_id").val("");$(".corporateCvv").hide();var b=$(c).parents().eq(2);$(b).find(".corporateCvv").show();var a=$("#tab_corpCard input[name=corpCard_ccCVV]");a.each(function(){$(this).val("")})},getTokenizedCardList:function(){var a=YatraCorpCardUI.cardListUrl;$.ajax({url:a+"="+detailsJson.crpInfo.clientId,type:"GET",cache:false,success:function(b){if(b.corpTokenizedCards&&b.corpTokenizedCards.length>0){YatraCorpCardUI.cardList.push(b.corpTokenizedCards)}YatraCorpCardUI.tagTokenizedCardsList()},error:function(d,b,c){alert("Error occurred while getting saved cards.")}})},tagTokenizedCardsList:function(){if(YatraCorpCardUI.cardList&&YatraCorpCardUI.cardList[0].length>0){for(var b=0;b<YatraCorpCardUI.cardList[0].length;b++){var a=YatraCorpCardUI.cardList[0][b].cardId;if(YatraCorpCardUI.cardList[0][b].cardtype==="PCC"&&YatraCorpCardUI.cardList[0][b].tokenStatus==="INAC"){$("[li-card-id="+a+"]").hide()}else{if(YatraCorpCardUI.cardList[0][b].tokenStatus==="ACTI"){$("[card-id="+a+"]").show()}}}}},getSSOToken:function(){}};